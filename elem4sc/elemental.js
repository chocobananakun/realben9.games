!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=76)}([function(e,t,n){"use strict";function r(e){if(e.length<4)return e;const t=Math.floor(Math.random()*e.length);let n=t;for(;n===t;)n=Math.floor(Math.random()*e.length);let r=t;for(;r===n||r===t;)r=Math.floor(Math.random()*e.length);return[e[t],e[n],e[r]]}function i(e){return e.trim().replace(/\n/g," ").replace(/ +/g," ").trim().toLowerCase()}function o(e){return new Promise(t=>setTimeout(t,e))}function a(){return new Promise(e=>requestAnimationFrame(e))}function s(e){const t=e.getUTCMonth().toString().padStart(2,"0"),n=e.getUTCDate();let r=e.getUTCFullYear(),i=e.getUTCHours(),o="AM";i>12&&(i-=12,o="PM");let a=e.getUTCMinutes();return a<10&&(a="0"+a),`${r}-${t}-${n} ${i}:${a}${o} UTC`}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function l(...e){return e.sort()}function u(e,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"){for(var n="",r=e;r>0;--r)n+=t[Math.floor(Math.random()*t.length)];return n}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return u}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return y})),n.d(t,"g",(function(){return b})),n.d(t,"p",(function(){return _})),n.d(t,"B",(function(){return w})),n.d(t,"s",(function(){return k})),n.d(t,"D",(function(){return x})),n.d(t,"q",(function(){return S})),n.d(t,"z",(function(){return E})),n.d(t,"u",(function(){return O})),n.d(t,"t",(function(){return A})),n.d(t,"w",(function(){return C})),n.d(t,"v",(function(){return T})),n.d(t,"y",(function(){return j})),n.d(t,"x",(function(){return I})),n.d(t,"E",(function(){return D})),n.d(t,"F",(function(){return N})),n.d(t,"e",(function(){return q})),n.d(t,"f",(function(){return R})),n.d(t,"r",(function(){return B})),n.d(t,"C",(function(){return F})),n.d(t,"A",(function(){return U})),n.d(t,"c",(function(){return $})),n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return Z})),n.d(t,"n",(function(){return G})),n.d(t,"o",(function(){return V})),n.d(t,"m",(function(){return Y})),n.d(t,"k",(function(){return K})),n.d(t,"j",(function(){return X})),n.d(t,"h",(function(){return J})),n.d(t,"i",(function(){return Q})),n.d(t,"l",(function(){return ee}));var r=n(0),i=n(12),o=n(2),a=n(5),s=n(11),c=n(9),l=n(26),u=n(23),d=n(8),h=n(13),f=n(41),p=n(71),m=n.n(p);function g(e=""){document.querySelectorAll("#element-game-root .elem").forEach(t=>{t.classList.remove("restock"),t.style.display=t.innerHTML.toLowerCase().includes(e)?"":"none"})}let y,b,v,_,w,k,x,S,E,O,A,C,T,j,I,L,P,M,R,B,F,U,D=!1,N=!1,z=!1,q=null,H=null;async function $(e){if(q=null,H){const t=H;H=null,Object(s.c)("elementsDropped"),t.setAttribute("style","left:"+parseFloat(t.style.left)+"px;top:"+(parseFloat(t.style.top)-30+y.scrollTop)+"px"),y.appendChild(t),Object(o.i)("animations",!0)?e?(Object(c.d)("element.combine"),t.setAttribute("style","--offset-x:"+(e.offsetLeft-Object(d.c)()-parseFloat(t.style.left))+"px;--offset-y:"+(e.offsetTop-Object(d.c)()-parseFloat(t.style.top))+"px;left:"+t.style.left+";top:"+t.style.top),t.classList.add("combine"),await Object(r.b)(350),t.remove()):(Object(c.d)("element.drop"),t.classList.add("drop"),await Object(r.b)(500),t.remove()):t.remove()}}function W(){y=document.getElementById("element-game-root"),b=document.getElementById("info"),v=document.querySelector("#info .info-container"),_=document.querySelector("#suggest"),w=document.querySelector(".suggest-result-elem"),k=document.querySelector("#left-element"),x=document.querySelector("#right-element"),S=document.querySelector(".suggest-hint"),E=document.querySelector(".other-suggestions-header"),O=document.querySelector('[data-suggestion-other="0"]'),A=document.querySelector('[data-downvote-other="0"]'),C=document.querySelector('[data-suggestion-other="1"]'),T=document.querySelector('[data-downvote-other="1"]'),j=document.querySelector('[data-suggestion-other="2"]'),I=document.querySelector('[data-downvote-other="2"]'),document.addEventListener("mousemove",e=>{H&&(H.style.left=e.pageX+"px",H.style.top=e.pageY+4+"px")}),document.addEventListener("click",e=>{Object(s.c)("clicks"),e.target&&e.target.classList&&e.target.classList.contains("elem")||$();const t=e.path||e.composedPath&&e.composedPath();t&&t.includes(b)||z&&(b.style.display="none",z=!1,Object(l.a)())}),document.addEventListener("contextmenu",e=>{e.path&&e.path.includes(b)?(z=!1,Object(l.a)(),b.style.display="none",e.preventDefault()):q&&($(),e.preventDefault())}),document.getElementById("element-game-root").addEventListener("scroll",e=>{z=!1,Object(l.a)(),b.style.display="none"}),document.querySelector(".suggest-close").addEventListener("click",e=>{_.classList.contains("animate-panel")?(_.classList.add("animate-out"),setTimeout(()=>{_.classList.remove("animate-out"),_.classList.remove("animate-panel")},300)):_.classList.remove("animate-prompt"),document.querySelector("#suggest-block-div").classList.remove("animate-in"),N&&(document.querySelector("#tutorial2").classList.remove("tutorial-visible"),V(!1),Object(o.w)("tutorial2",!0),setTimeout(()=>{document.querySelector("#tutorial2").style.display="none"},250))}),document.querySelector(".suggest-label").addEventListener("click",e=>{_.classList.remove("animate-prompt"),_.classList.add("animate-panel"),document.querySelector("#suggest-block-div").classList.add("animate-in"),document.querySelector("#suggest-block-div").style.display="block",_.style.width="",N&&(document.querySelector("#tutorial2").classList.remove("tutorial-visible"),V(!1),Object(o.w)("tutorial2",!0),setTimeout(()=>{document.querySelector("#tutorial2").style.display="none"},250)),Object(a.c)("suggestion").getSuggestions([B.id,F.id]).then(e=>{const[t,n,i]=Object(r.a)(e);ee(t,n,i),t&&(O.classList.remove("no"),O.innerHTML=Object(r.e)(t.text),O.setAttribute("style",Object(h.a)({text:t.text,color:`${t.color.base}_${t.color.saturation}_${t.color.lightness}`})),A.classList.remove("no"),E.classList.remove("no")),n&&(C.classList.remove("no"),C.innerHTML=Object(r.e)(n.text),C.setAttribute("style",Object(h.a)({text:n.text,color:`${n.color.base}_${n.color.saturation}_${n.color.lightness}`})),T.classList.remove("no")),i&&(j.classList.remove("no"),j.innerHTML=Object(r.e)(i.text),j.setAttribute("style",Object(h.a)({text:i.text,color:`${i.color.base}_${i.color.saturation}_${i.color.lightness}`})),I.classList.remove("no"))})}),document.querySelector("#suggest-submit").addEventListener("click",async e=>{await async function(){const e=Object(a.c)("suggestion");if(e){const t=document.querySelector("textarea.elem");for(t.value=t.value.slice(0,50).replace(/^ |( ) +/,"$1").split(" ").map(i.capitalize).join(" ");t.scrollHeight>80;){if(0===t.value.length)return;t.value=t.value.slice(0,-1)}U.text=t.value,document.querySelector("#suggest-loader").classList.add("animate-in");const n=await e.createSuggestion([B.id,F.id],{color:U.color,text:U.text});if(document.querySelector("#suggest-loader").classList.remove("animate-in"),document.querySelector("#suggest-block-div").classList.remove("animate-in"),"failed"!==n.suggestType){if(n.newElements&&n.newElements.length>0){(await Promise.all(n.newElements.map(t=>e.getElement(t)))).forEach(e=>{Object(f.a)(e,w)}),w.style.display="none"}setTimeout(()=>{_.classList.add("animate-out"),setTimeout(()=>{_.classList.remove("animate-out"),_.classList.remove("animate-panel")},300)},n.newElements?400:0)}"suggest"===n.suggestType&&Object(s.c)("suggestionsCreated"),"vote"===n.suggestType&&Object(s.c)("suggestionsVoted"),Object(s.c)("suggestionsSent")}}()});const e=document.querySelector("#suggest-share");"write"in navigator.clipboard?e.addEventListener("click",async e=>{await async function(e){const t=e.currentTarget,n=_.querySelector(".suggest-content");n.classList.add("screenshot"),t.setAttribute("disabled","true"),t.removeAttribute("disabled"),t.blur(),await Object(r.c)(),await Object(r.c)(),await Object(r.c)(),await Object(r.c)();const i=await m.a.toSvg(_.querySelector(".suggest-content"),{style:{top:"0",position:"relative",border:"1px solid black"}});await Object(r.c)(),n.classList.remove("screenshot");const o=document.createElement("img");document.body.appendChild(o),o.onload=function(){const e=document.createElement("canvas");e.width=o.clientWidth,e.height=o.clientHeight;e.getContext("2d").drawImage(o,0,0),o.remove(),e.toBlob(e=>{navigator.clipboard.write([new window.ClipboardItem({[e.type]:e})])},"image/png")},o.src=i}(e)}):e.setAttribute("disabled","true");const t=document.querySelector("textarea.elem");t.addEventListener("input",e=>{for(t.value=t.value.slice(0,50).replace(/^ |( ) +/,"$1").split(" ").map(i.capitalize).join(" ");t.scrollHeight>80;){if(0===t.value.length)return;t.value=t.value.slice(0,-1)}U.text=t.value}),t.addEventListener("focus",e=>{S.classList.remove("animate-in")}),document.querySelectorAll(".color-btn").forEach(e=>{const t=e.getAttribute("data-color");e.addEventListener("click",()=>{U.color.base=t,Object(d.d)()})}),document.querySelectorAll("[data-suggestion-slider]").forEach(e=>{const t=e.getAttribute("data-suggestion-slider");e.addEventListener("input",()=>{U.color[t]=parseFloat(e.value),Object(d.d)()})}),document.querySelector("#left-element").addEventListener("click",()=>{const[e,t,n]=B.display.color.split("_");U.color={base:e,saturation:parseFloat(t),lightness:parseFloat(n)},U.text=B.display.text,Object(d.d)()}),O.addEventListener("click",()=>{U=L,Object(d.d)()}),C.addEventListener("click",()=>{U=P,Object(d.d)()}),j.addEventListener("click",()=>{U=M,Object(d.d)()}),A.addEventListener("click",()=>{O.classList.add("no"),A.classList.add("no");Object(a.c)("suggestion").downvoteSuggestion([B.id,F.id],L)}),T.addEventListener("click",()=>{C.classList.add("no"),T.classList.add("no");Object(a.c)("suggestion").downvoteSuggestion([B.id,F.id],P)}),I.addEventListener("click",()=>{j.classList.add("no"),I.classList.add("no");Object(a.c)("suggestion").downvoteSuggestion([B.id,F.id],M)}),document.querySelector("#right-element").addEventListener("click",()=>{const[e,t,n]=F.display.color.split("_");U.color={base:e,saturation:parseFloat(t),lightness:parseFloat(n)},U.text=F.display.text,Object(d.d)()}),document.querySelector('[data-suggestion-slider-value="saturation"]').addEventListener("click",()=>{U.color.saturation=0,Object(d.d)()}),document.querySelector('[data-suggestion-slider-value="lightness"]').addEventListener("click",()=>{U.color.lightness=0,Object(d.d)()}),document.querySelectorAll("[data-info-tab]").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-info-tab");b.querySelectorAll(".info-tab,.info-section").forEach(e=>e.classList.remove("selected")),b.querySelector(".info-section-"+t).classList.add("selected"),b.querySelector('[data-info-tab="'+t+'"]').classList.add("selected")})}),async function(){const e=document.querySelector("#search-container"),t=document.querySelector("#search");document.addEventListener("keyup",n=>{1!=n.key.length&&"Backspace"!==n.key||n.ctrlKey||n.altKey||document.activeElement!==document.body||document.querySelector(".dialog-open")||(n.preventDefault(),"Backspace"===n.key?t.value=t.value.slice(0,-1):t.value+=n.key,e.classList.add("animate-in"),t.disabled=!1,t.focus(),Object(r.b)(10).then(()=>g(t.value.toLowerCase())))}),t.addEventListener("input",e=>{g(t.value.toLowerCase())}),document.addEventListener("keydown",n=>{"Escape"!==n.key||t.disabled||(t.value="",t.disabled=!0,e.classList.remove("animate-in"),g())})}()}function Z(){y.querySelectorAll("[data-category],h3").forEach(e=>{e.remove()});const e=document.createElement("div");e.setAttribute("data-category","none"),y.appendChild(e),document.querySelector("#tutorial1").classList.remove("tutorial-visible"),document.querySelector("#tutorial2").classList.remove("tutorial-visible"),D=!1,N=!1,Object(o.i)("tutorial1",!1)||Object(a.c)()[u.b]||(D=!0,document.querySelector("#tutorial1").classList.add("tutorial-visible"),document.querySelector("#tutorial1").style.display="block")}function G(e){D=e}function V(e){N=e}function Y(e,t,n){U=e,B=t,F=n}function K(e){z=e}function X(e){R=e}function J(e){q=e}function Q(e){H=e}function ee(e,t,n){L=e,P=t,M=n}},function(e,t,n){"use strict";n.d(t,"m",(function(){return f})),n.d(t,"r",(function(){return p})),n.d(t,"C",(function(){return m})),n.d(t,"p",(function(){return g})),n.d(t,"A",(function(){return y})),n.d(t,"l",(function(){return b})),n.d(t,"q",(function(){return v})),n.d(t,"o",(function(){return _})),n.d(t,"B",(function(){return w})),n.d(t,"u",(function(){return k})),n.d(t,"s",(function(){return x})),n.d(t,"n",(function(){return E})),n.d(t,"z",(function(){return O})),n.d(t,"g",(function(){return A})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return j})),n.d(t,"t",(function(){return I})),n.d(t,"b",(function(){return L})),n.d(t,"e",(function(){return P})),n.d(t,"h",(function(){return M})),n.d(t,"v",(function(){return R})),n.d(t,"f",(function(){return B})),n.d(t,"i",(function(){return U})),n.d(t,"w",(function(){return D})),n.d(t,"k",(function(){return N})),n.d(t,"y",(function(){return z})),n.d(t,"j",(function(){return q})),n.d(t,"x",(function(){return H}));var r=n(3),i=n(29),o=n(25),a=n(0),s=n(5),c=n(10);const l=new o.b("data"),u=new o.b("theme_data"),d=(new o.b("pack_data"),{});function h(e){return e.replace(/\/(elemental\.json)?$/,"")}async function f(){return await Promise.all((await u.keys()).map(e=>u.get(e)))}function p(e){return u.set(e.id,e)}function m(e){return u.del(e)}async function g(e){const t=await M(e);return l.get("stats:"+t+":"+x(e.baseUrl))}async function y(e,t){const n=await M(e);return l.set("stats:"+n+":"+x(e.baseUrl),t)}async function b(){return await l.get("servers")||[]}async function v(e,t){const n=await l.get("servers")||[];if(e&&!e.startsWith("internal:")){e=h(e);const r=n.find(t=>t.baseUrl===e),i=t&&t.name;r?(r.config=t,r.name=t.name):n.push({baseUrl:e,name:i,config:t}),await l.set("servers",n)}const r=document.querySelector("#change-server");r.querySelectorAll("*:not(:first-child)").forEach(e=>{e.remove()});const i=document.createElement("optgroup");i.label="Official Servers";const o=document.createElement("optgroup");o.label='Testing/Internal "Servers"';const u=document.createElement("optgroup");u.label="Third Party Servers";const d=document.createElement("optgroup");d.label="Custom Servers",r.appendChild(i),r.appendChild(o),r.appendChild(u),r.appendChild(d),n.sort((e,t)=>c.h.indexOf(e.baseUrl)-c.h.indexOf(t.baseUrl)).concat(...c.c.concat(...U("config-show-internal-servers",!1)?c.b:[]).map(e=>({config:s.a[e],baseUrl:e,name:s.a[e].name}))).forEach(e=>{const t=document.createElement("option");t.value=e.baseUrl,t.innerHTML=Object(a.e)(c.d.includes(e.baseUrl)||c.c.includes(e.baseUrl)?""+e.name:`${e.name} - ${x(e.baseUrl)}`),c.d.includes(e.baseUrl)||c.c.includes(e.baseUrl)?i.appendChild(t):c.e.includes(e.baseUrl)?u.appendChild(t):c.b.includes(e.baseUrl)?o.appendChild(t):d.appendChild(t)}),r.value="internal:change-btn",0===i.childElementCount&&i.remove(),0===u.childElementCount&&u.remove(),0===d.childElementCount&&d.remove(),0===o.childElementCount&&o.remove()}async function _(e){e=h(e);return(await l.get("servers")||[]).find(t=>t.baseUrl===e)}async function w(e){e=h(e);const t=await l.get("servers")||[],n=await _(e);await l.set("servers",t.filter(t=>t.baseUrl!==e)),await Object(s.b)(c.a[0],null),await l.del("config:"+x(e));const r=":"+x(e);await Promise.all((await l.keys()).map(e=>{if(e.endsWith(r))return l.del(e)}).filter(Boolean));n.config.type,x(e)}async function k(){await u.clear();const e=await caches.keys();await Promise.all(e.map((function(e){if(e.startsWith("THEME."))return caches.delete(e)})))}function x(e){return e.replace(/^.*?:\/\//,"").replace(/\/(elemental\.json)?$/,"")}const S={};async function E(e){const t=Object(r.d)(e,"serverSaveFile"),n=await M(e);if(t)return await t.readSaveFileElements(n);{const t=x(e.baseUrl);if(!S[n+":"+t]){const r=await l.get("savefile:"+n+":"+t);S[n+":"+t]=r?new Set(r):new Set(await e.getStartingInventory())}return[...S[n+":"+t]]}}async function O(e,t){const n=Object(r.d)(e,"serverSaveFile"),i=await M(e);if(n)await n.writeNewElementToSaveFile(i,t);else{const n=x(e.baseUrl);await E(e),S[i+":"+n].add(t),await l.set("savefile:"+i+":"+n,[...S[i+":"+n]])}}async function A(e){const t=Object(r.d)(e,"serverSaveFile");if(!t)return await l.get("savefile_list:"+x(e.baseUrl))||[{id:"main",name:"Main Save"}];try{return t.getSaveFiles()}catch(e){return[]}}function C(e,t){if(t.length>16)return!1;const n=Object(r.d)(e,"serverSaveFile");if(!n)return!0;try{return n.canCreateSaveFile(t)}catch(e){return!1}}async function T(e,t){const n=Object(r.d)(e,"serverSaveFile");if(!n){const n=await l.get("savefile_list:"+x(e.baseUrl))||[{id:"main",name:"Main Save"}],r=Math.random().toString().slice(2,10);return n.push({id:r,name:t}),await l.set("savefile_list:"+x(e.baseUrl),n),r}try{return n.createNewSaveFile(t)}catch(e){return!1}}function j(e,t,n){if(n.length>16)return!1;const i=Object(r.d)(e,"serverSaveFile");if(!i)return!0;try{return i.canRenameSaveFile(t,n)}catch(e){return!1}}async function I(e,t,n){const i=Object(r.d)(e,"serverSaveFile");if(!i){const r=await l.get("savefile_list:"+x(e.baseUrl))||[{id:"main",name:"Main Save"}],i=r.find(e=>e.id===t);return i&&(i.name=n),await l.set("savefile_list:"+x(e.baseUrl),r),!0}try{return i.renameSaveFile(t,n)}catch(e){return!1}}function L(e,t){if(1===document.querySelector("#change-savefile").options.length)return!1;const n=Object(r.d)(e,"serverSaveFile");if(!n)return!0;try{return n.canDeleteSaveFile(t)}catch(e){return!1}}async function P(e,t){const n=Object(r.d)(e,"serverSaveFile");if(n)return n.deleteSaveFile(t);{const n=await l.get("savefile_list:"+x(e.baseUrl))||[{id:"main",name:"Main Save"}];return await l.set("savefile_list:"+x(e.baseUrl),n.filter(e=>e.id!==t)),!0}}async function M(e){if(!d[e.baseUrl]&&(d[e.baseUrl]=await l.get("savefile_name:"+x(e.baseUrl)),!d[e.baseUrl])){const t=Object(r.d)(e,"serverSaveFile");d[e.baseUrl]=t?t.getSaveFiles()[0].id:"main"}return d[e.baseUrl]}async function R(e,t){d[e.baseUrl]=t,await l.set("savefile_name:"+x(e.baseUrl),t)}async function B(e){const t=await l.get("config:"+x(e))||{};let n=!1;const r=Object(i.debounce)(()=>{n||l.set("config:"+x(e),t)},1e3);return{get:(e,n)=>e in t?t[e]:n,set:(e,n)=>{t[e]=n,r()},close:()=>{n=!0,l.set("config:"+x(e),t)}}}let F={};function U(e,t){if(e in F)return F[e];const n=localStorage["config-"+e];return F[e]=void 0===n?t:"true"===n,F[e]}function D(e,t){F[e]=t,localStorage["config-"+e]=t.toString()}function N(e,t){if(e in F)return F[e];const n=localStorage["config-"+e];return F[e]=void 0===n?t:n,F[e]}function z(e,t){F[e]=t,localStorage["config-"+e]=t}function q(e,t){if(e in F)return F[e];const n=localStorage["config-"+e];return F[e]=void 0===n?t:parseFloat(n),F[e]}function H(e,t){F[e]=t,localStorage["config-"+e]=t.toString()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(7),i=n.n(r);const o={White:"white",Black:"black",LightGrey:"light-grey",Grey:"grey",DarkGrey:"dark-grey",Brown:"brown",DarkBrown:"dark-brown",Red:"red",DarkRed:"dark-red",Orange:"orange",DarkOrange:"dark-orange",Yellow:"yellow",DarkYellow:"dark-yellow",YellowGreen:"yellow-green",DarkYellowGreen:"dark-yellow-green",Green:"green",DarkGreen:"dark-green",Aqua:"aqua",DarkAqua:"dark-aqua",Blue:"blue",DarkBlue:"dark-blue",NavyBlue:"navy-blue",Purple:"purple",DarkPurple:"dark-purple",Magenta:"magenta",DarkMagenta:"dark-magenta",Pink:"pink",HotPink:"hot-pink",DarkHotPink:"dark-hot-pink"};class a{constructor({baseUrl:e,saveFile:t,config:n,ui:r,store:i}){this.baseUrl=e,this.saveFile=t,this.config=n,this.ui=r,this.store=i}getRules(){return Object.assign({maxElementsToCombine:2,minElementsToCombine:2,selfCombine:!0},this.rules)}}a.type="unknown";const s={suggestion:["getSuggestions","createSuggestion"],customPalette:["lookupCustomPaletteColor"],optionsMenu:["getOptionsMenu"],serverSaveFile:["getSaveFiles"],recentCombinations:["getRecentCombinations"],hint:["getHint"]};function c(e,t){return t?s[t].every(t=>t in e)?e:null:e}function l(e,t,n){const r=i()(e.color),o=r.saturationl()/100,a=r.lightness()/100,s=0===n?0:n>0?(.9-a)*e.lightnessMultiplier:(a-.1)*e.lightnessMultiplier,c=0===t?0:t>0?(.9-o)*e.saturationMultiplier*2.5:(o-.1)*e.saturationMultiplier;let l=r;return 0!==t&&0!==o&&(l=l.saturate(t*c/o)),0!==n&&(l=l.lighten(n*s)),l}},function(e,t,n){"use strict";n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return m}));var r=n(0),i=n(16),o=n(9),a=n(40),s=n.n(a);let c=0;async function l(e){var t;Date.now()-c>500&&Object(o.d)("dialog.open"),window.focus(),e.classList.add("dialog-open"),e.classList.add("dialog-opening"),null===(t=e.firstElementChild)||void 0===t||t.focus(),await Object(r.b)(200),e.classList.remove("dialog-opening")}async function u(e){c=Date.now(),Object(o.d)("dialog.close"),e.classList.add("dialog-closing"),await Object(r.b)(200),e.classList.remove("dialog-closing"),e.classList.remove("dialog-open")}function d(){const e=document.createElement("div"),t=document.createElement("div");return e.classList.add("dialog"),t.classList.add("dialog-content"),e.appendChild(t),{root:e,content:t}}function h(e){const{title:t,parts:n,buttons:o}=e;let a;const c=document.createElement("form");c.classList.add("dialog-form"),c.onsubmit=e=>{var t,n;e.preventDefault(),a.close(null===(n=null===(t=o[0])||void 0===t?void 0:t.id)||void 0===n||n)};const h={};let f=null;for(var p=0;p<n.length;p++){const e=n[p];if("string"==typeof e){const t=document.createElement("div");t.classList.add("form-dialog-group"),t.innerHTML=s()(e),c.appendChild(t)}else{const t=document.createElement("div");t.classList.add("form-dialog-input"),t.classList.add("form-dialog-group");const n=document.createElement("input");n.type=e.type,n.value=e.default||"",n.placeholder=e.placeholder||"",n.disabled=e.disabled,h[e.id]=n,t.appendChild(n),c.appendChild(t),f||(f=e.id)}}return a=function(e){const{title:t,content:n,buttons:o=[{id:!0,label:"OK"}],className:a="dialog-generic-content"}=e,s=new i.Emitter,{root:c,content:h}=d();if(h.className+=" "+a,document.body.appendChild(c),t){const e=document.createElement("h2");e.innerHTML=Object(r.e)(t),h.appendChild(e)}if("string"==typeof n){const e=document.createElement("p");e.innerHTML=Object(r.e)(n),h.appendChild(e)}else Array.isArray(n)?n.forEach(e=>{if("string"==typeof e){const t=document.createElement("p");t.innerHTML=Object(r.e)(e),h.appendChild(t)}else h.appendChild(e)}):h.appendChild(n);if(o.length>0){const e=document.createElement("div");e.classList.add("dialog-buttons");for(let t=0;t<o.length;t++){const n=o[t],i=document.createElement("button");i.innerHTML=Object(r.e)(n.label),i.addEventListener("click",()=>{s.close(n.id)}),0!==t&&i.classList.add("secondary"),e.appendChild(i)}const t=document.createElement("div");t.style.flex="1",e.appendChild(t),h.appendChild(e)}return Object(r.b)(25).then(async()=>{l(c),await Object(r.b)(10),s.emit("ready")}),s.close=async e=>{s.emit("close",e),await u(c),await Object(r.b)(200),c.remove()},s}({title:t,content:[c],buttons:o}),a.on("ready",()=>{h[f]&&h[f].focus()}),new Promise(e=>{a.on("close",t=>{const n={};for(var r in h)n[r]=h[r].value;n.button=t,e(n)})})}async function f(e){const{title:t,text:n}=e;await h({title:t,parts:[n]})}async function p(e){const{title:t,text:n,trueButton:r="OK",falseButton:i="Cancel"}=e;return"true"===(await h({title:t,parts:[n],buttons:[r&&{id:"true",label:r},i&&{id:"false",label:i}].filter(Boolean)})).button}async function m(e){const{title:t,text:n,defaultInput:r,confirmButton:i="OK",cancelButton:o="Cancel"}=e,a=await h({title:t,parts:[n,{id:"input",default:r}],buttons:[i&&{id:"confirm",label:i},o&&{id:"cancel",label:o}].filter(Boolean)});return"confirm"===a.button&&a.input}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ie})),n.d(t,"d",(function(){return oe})),n.d(t,"b",(function(){return ae})),n.d(t,"f",(function(){return se})),n.d(t,"e",(function(){return le})),n.d(t,"c",(function(){return ue}));var r=n(3),i=n(38),o=n(0),a=n(16),s=n(51),c=n.n(s),l=n(22);function u(e){return`${e.getUTCFullYear()}-${(e.getUTCMonth()+1).toString().padStart(2,"0")}-${e.getUTCDate().toString().padStart(2,"0")}`}class d extends r.b{constructor(){super(...arguments),this.waitNewComboEmitter=new a.SimpleEmitter,this.waitNewEntryEmitter=new a.SimpleEmitter,this.processEntry=Object(l.b)(async e=>{if(null!==e)if(e.entry<=this.dbMeta.lastEntry)console.log("[E4API] Skipping Entry "+e.entry+"; "+e.type);else{if(e.entry!==this.dbMeta.lastEntry+1)return console.log("[E4API] Entry out of order. expected #"+(this.dbMeta.lastEntry+1)+" but got #"+e.entry+". calling later"),void this.processEntry.callLater(e);if("element"===e.type)await this.store.set(e.id,{id:e.id,display:{categoryName:e.color.base,color:`${e.color.base}_${e.color.saturation}_${e.color.lightness}`,text:e.text},createdOn:e.createdOn,stats:{creators:e.creators,comments:[],fundamentals:{air:"air"===e.text.toLowerCase()?1:0,earth:"earth"===e.text.toLowerCase()?1:0,fire:"fire"===e.text.toLowerCase()?1:0,water:"water"===e.text.toLowerCase()?1:0},recipeCount:0,recipeList:[],usageCount:0,usageList:[],treeComplexity:0,simplestRecipe:null}}),e.creators.includes(this.saveFile.get("clientPublic"))&&console.log("Request Comment",e);else if("combo"===e.type){this.dbMeta.recentCombos.length>35&&this.dbMeta.recentCombos.pop();const t=e.recipe.split("+");this.dbMeta.recentCombos.unshift({recipe:t,result:e.result}),await this.store.set(e.recipe,e.result),this.waitNewComboEmitter.emit();const n=await this.getRawElement(e.result);n.stats.recipeCount++,n.stats.recipeList.push(t);const r=await this.getRawElement(t[0]);r.stats.usageCount++,r.stats.usageList.push({recipe:t,result:[e.result]});let i=r;t[0]!==t[1]&&(i=await this.getRawElement(t[1]),i.stats.usageCount++,i.stats.usageList.push({recipe:t,result:[e.result]}),await this.store.set(i.id,i)),await this.store.set(r.id,r),await this.store.set(n.id,n),await this.calculateFundamentals(r,i,n)}else if("comment"===e.type){const t=await this.store.get(e.id);t.stats.comments.push({author:e.user,comment:e.comment}),await this.store.set(e.id,t)}this.dbMeta.lastEntry=e.entry,await this.store.set("last-entry",this.dbMeta.lastEntry),await this.saveFile.set("meta",this.dbMeta),this.waitNewEntryEmitter.emit(e)}}),this.running=!1}async calculateFundamentals(e,t,n){const r="string"==typeof e?await this.getRawElement(e):e,i="string"==typeof t?await this.getRawElement(t):t,a="string"==typeof n?await this.getRawElement(n):n,s=Math.max(r.stats.treeComplexity,i.stats.treeComplexity)+1;if(s<a.stats.treeComplexity||0===a.stats.treeComplexity&&0===a.stats.usageCount){a.stats.treeComplexity=s,a.stats.simplestRecipe=Object(o.h)(r.id,i.id),a.stats.fundamentals={air:r.stats.fundamentals.air+i.stats.fundamentals.air,fire:r.stats.fundamentals.fire+i.stats.fundamentals.fire,water:r.stats.fundamentals.water+i.stats.fundamentals.water,earth:r.stats.fundamentals.earth+i.stats.fundamentals.earth};const e=a.stats.usageList;await this.store.set(a.id,a);for(let t=0;t<e.length;t++){const n=e[t];await this.calculateFundamentals(n.recipe[0],n.recipe[1],n.result[0])}}}async notifyUsername(){const e=this.saveFile.get("clientSecret"),t=this.saveFile.get("clientName","[Ask on Element Suggestion]");if("[Ask on Element Suggestion]"!==t){const n=await fetch(this.baseUrl+"/api/v1/update-profile",{method:"POST",headers:{Authorization:`Elemental4User "${e}" "${encodeURIComponent(t)}"`}}).then(e=>e.json());n&&n.publicId&&"null-user"!==n.publicId&&this.saveFile.set("clientPublic",n.publicId)}}async debugUnlockAll(){this.store.bulkTransfer(async()=>{const e=await this.store.keys(),t=e.filter(e=>!e.includes("+"));console.log(e),console.log(t),t.forEach(async e=>{window.$ts.add.addElementToGame(await this.getRawElement(e))})})}async open(e,t=!1){window.repair=this.ui.loading.bind(this.ui,this.resetDatabase.bind(this)),"[unset]"===this.saveFile.get("clientSecret","[unset]")&&(this.saveFile.set("clientSecret",Object(o.g)(32)),this.saveFile.set("clientName","[Ask on Element Suggestion]"));try{e.status("Updating Profiles",.25);var n=await fetch(this.baseUrl+"/api/v1/profiles");e.status("Updating Profiles",.5),this.profiles=await n.json(),e.status("Updating Profiles",.75),await this.store.set("profiles",this.profiles),e.status("Updating Profiles",1)}catch(t){e.status("Updating Profiles",0),this.profiles=await this.store.get("profiles"),e.status("Updating Profiles",1)}let r,a;try{this.dbMeta=await this.saveFile.get("meta"),this.dbMeta.lastUpdated<1607103532524?(r="full",this.store.clear()):this.dbMeta.lastEntry!==await this.store.get("last-entry")?(console.warn("Database Corruption Detected"),r="full"):r=t||this.dbMeta.version!==d.DB_VERSION||this.dbMeta.dbId!==this.config.dbId?"full":u(new Date(Date.now()))===u(new Date(this.dbMeta.lastUpdated))?"today":Date.now()-this.dbMeta.lastUpdated>2592e6?"full":u(new Date(this.dbMeta.lastUpdated))}catch(e){r="full"}this.running=!0;let s=new Promise(e=>a=e);try{null==e||e.status("Updating Database"),"full"===r&&(await this.store.clear(),this.dbMeta={lastEntry:0,lastUpdated:Date.now(),recentCombos:[],version:d.DB_VERSION,dbId:this.config.dbId}),"none"!==r?(console.log(`[E4API] Fetch "${r}", have #${this.dbMeta.lastEntry} at ${this.dbMeta.lastUpdated}.`),await this.store.bulkTransfer(()=>new Promise(async(t,n)=>{try{const o="full"===r?"/api/v1/db/all":"today"===r?"/api/v1/db/after-entry/"+(this.dbMeta.lastEntry-1):"/api/v1/db/from-date/"+r,a=await fetch(this.baseUrl+o),u=Object(i.a)(a,!0);this.socket=c()(this.baseUrl),this.socket.on("new-entry",async e=>{s&&await s,this.processEntry(e)});let d=0,h=0,f=parseInt(a.headers.get("Elem4-Entry-Length"));u.on("progress",({percent:t,current:n,total:r})=>{d=t,null==e||e.status("Updating Database",(d+h)/2)}),u.on("done",async n=>{d=1,0===n.length?(null==e||e.status("Updating Database",1),t()):null==e||e.status("Updating Database",(d+h)/2)});let p=0;const m=Object(l.b)(async n=>{await this.processEntry(n),p++,h=p/f,null==e||e.status("Updating Database",(d+h)/2),p===f&&t()});let g="",y=!1;const b=Object(l.b)(e=>{if(!y)return m(e)});u.on("data",e=>{if(y)return;const t=(g+e).split("\n");g=t.pop(),t.forEach(e=>{let t;try{t=JSON.parse(e)}catch(e){n(e)}b(t).catch(e=>{y=!0,n(e)})})})}catch(e){n(e)}})).catch(()=>{}),this.dbMeta.lastUpdated=Date.now()):(this.socket=c()(this.baseUrl),this.socket.on("new-entry",async e=>{s&&await s,this.processEntry(e)})),await this.saveFile.set("meta",this.dbMeta),await this.notifyUsername(),this.socket.on("disconnect",()=>{console.log("[E4API] Disconnected"),this.onAPIDisconnect()})}catch(e){await this.getRawElement("4")||await this.ui.alert({title:"Database is Outdated",text:"To play Elemental 4, you will need to go online to download the database."}),this.onAPIDisconnect()}return a(),s=null,await this.processEntry(null),!0}async close(){this.running=!1,this.socket&&this.socket.close(),delete window.repair}async getStats(){return{totalElements:await this.store.length()}}async getRawElement(e){return await this.store.get(e)||null}async getElement(e){const t=await this.getRawElement(e);return Object.assign(Object.assign({},t),{stats:Object.assign(Object.assign({},t.stats),{creators:t.stats.creators&&t.stats.creators.map(e=>this.getProfile(e)),comments:t.stats.comments&&t.stats.comments.map(({author:e,comment:t})=>({author:this.getProfile(e),comment:t}))})})}getProfile(e){var t=this.profiles[e];return t||(t="Anonymous"),t}async getCombo(e){const t=await this.store.get(e.join("+"));return t?[t]:[]}async getStartingInventory(){return["1","2","3","4"]}async onAPIDisconnect(){for(;this.running;){try{if((await fetch(this.baseUrl+"/")).ok)return void this.ui.reloadSelf()}catch(e){}await Object(o.b)(8e3)}}getSuggestionColorInformation(){return{type:"dynamic-elemental4"}}async getSuggestions(e){return await fetch(this.baseUrl+"/api/v1/suggestion/"+e.join("+")).then(e=>e.json())}async downvoteSuggestion(e,t){await fetch(this.baseUrl+"/api/v1/suggestion/"+e.join("+"),{method:"POST",body:JSON.stringify(Object.assign(Object.assign({},t),{vote:!1})),headers:{Authorization:`Elemental4User "${this.saveFile.get("clientSecret")}" "${encodeURIComponent(this.saveFile.get("clientName"))}"`,"Content-Type":"application/json"}}).then(e=>e.json())}async createSuggestion(e,t){if("[Ask on Element Suggestion]"===this.saveFile.get("clientName")){const e=await this.ui.prompt({title:"Choose a Screen Name",text:"When suggesting elements, your name can appear on them. Enter a name, or enter nothing to be anonymously credited. This can be changed at any time in Settings -> Server.",confirmButton:"Choose Name",cancelButton:null});this.saveFile.set("clientName",e||"Anonymous")}const n=await fetch(this.baseUrl+"/api/v1/suggestion/"+e.join("+"),{method:"POST",body:JSON.stringify(Object.assign(Object.assign({},t),{vote:!0})),headers:{Authorization:`Elemental4User "${this.saveFile.get("clientSecret")}" "${encodeURIComponent(this.saveFile.get("clientName"))}"`,"Content-Type":"application/json"}}).then(e=>e.json());if(n.newElement&&await this.waitForElement(n.newElement),"vote-fraud-detected"===n.result)return await this.ui.alert({title:"VPN Detected",text:"To avoid vote manipulation, using an IP suspected of being from a VPN service is not allowed. Your suggestion will not be considered. Please try again without using a VPN."}),{suggestType:"failed"};if("vote-fraud-detect-down"===n.result)return await this.ui.alert({title:"Server Error",text:"To avoid vote manipulation, we use a service to detect users with a VPN. Unfortunately, our server cannot talk to it due to some error. Please try your vote again at a later point."}),{suggestType:"failed"};if("already-added"===n.result)return{suggestType:"already-added",newElements:n.newElement?[n.newElement]:null};if("suggested"===n.result)return{suggestType:"suggest"};if("voted"===n.result)return{suggestType:"vote"};if("element-added"===n.result){if(n.doCreatorMark){const e=await this.ui.prompt({title:"Suggestion Created!",text:"Since you cast the deciding vote, you get to add one of the two Creator Marks on this Element (The other is for the initial suggester). Leave it blank to not have one.",cancelButton:null,confirmButton:"Confirm Creator Mark",defaultInput:""});fetch(this.baseUrl+"/api/v1/comment/"+n.newElement,{method:"POST",body:JSON.stringify({comment:e}),headers:{Authorization:`Elemental4User "${this.saveFile.get("clientSecret")}" "${this.saveFile.get("clientName")}"`,"Content-Type":"application/json"}}).then(e=>e.text()).then(()=>{})}return{suggestType:"vote",newElements:n.newElement?[n.newElement]:null}}return"internal-error"===n.result?(await this.ui.alert({title:"Server Error",text:"An error occured during loading"}),{suggestType:"failed"}):void 0}lookupCustomPaletteColor(e,t){const[n,...i]=t.split("_"),[o,a]=i.map(e=>parseFloat(e));return Object(r.c)(e[n],o,a)}getOptionsMenu(){return[{title:"Identity",desc:"Settings related to your suggestions and logged in user. Logins are based on secret tokens associated with usernames.",items:[{type:"string",label:"Screen Name",saveFileProp:"clientName",validator:e=>e.length<3?"Too Short, Must be 3 characters or more.":e.length>32?"Too Long, Must be 32 characters of less.":!!e.match(/[A-Za-z0-9 !@#$%^&*(){}[]\,\.\<\>\/\\;':"=_\+-`~]/)||"Fancy symbols are not allowed.",onChange:()=>{this.notifyUsername()}},{type:"button",label:"Export Login",onChange:async()=>{await this.ui.confirm({title:"Export Login",text:"The following information is very sensitive, and links your username to your created elements. It does not contain your owned elements. Do not share it with others."})&&this.ui.alert({title:"Export Login",text:`Your login does not work on a username and password, but a secret token, yours is:\n**\`\n${this.saveFile.get("clientSecret")}\n\`**`})}},{type:"button",label:"Import Login",onChange:async()=>{const{secret:e}=await this.ui.dialog({title:"Import Login",parts:["By importing your login you will be logged out of your current profile.",{id:"secret",type:"password"}]});if(e){const t=await fetch(this.baseUrl+"/api/v1/update-profile",{method:"POST",headers:{Authorization:`Elemental4User "${e}" "${encodeURIComponent("Test")}"`}}).then(e=>e.json());t.exists?(this.saveFile.set("clientName",t.display),this.saveFile.set("clientSecret",e),this.saveFile.set("clientPublic",t.public_id)):await this.ui.confirm({title:"No Elements",text:"This account does not have any suggestions or elements sent. Continue with login?"})&&(this.saveFile.set("clientSecret",e),this.saveFile.set("clientPublic",null))}}}]},{title:"Database",items:[{label:"Reset Local Database",type:"button",onChange:()=>{this.ui.loading(this.resetDatabase.bind(this))}}]}]}async resetDatabase(e){e.status("Resetting Database"),this.dbMeta.version=-100,await this.saveFile.set("meta",this.dbMeta),await this.ui.reloadSelf()}async getRecentCombinations(e){return this.dbMeta.recentCombos.slice(0,e)}waitForNewRecent(){return new Promise(e=>{const t=()=>(this.waitNewComboEmitter.off(t),e());this.waitNewComboEmitter.on(t)})}waitForElement(e){return new Promise(t=>{this.getRawElement(e).then(n=>{if(n)t();else{const n=r=>{"element"===r.type&&r.id===e&&(this.waitNewEntryEmitter.off(n),t())};this.waitNewEntryEmitter.on(n)}})})}}d.type="elemental4",d.DB_VERSION=8;const h={tan:"brown",white:"white",black:"black",grey:"grey",brown:"dark-brown",dark_red:"dark-red",red:"red",orange:"orange",dark_yellow:"dark-yellow",yellow:"yellow",green:"green",aqua:"aqua",light_blue:"blue",blue:"dark-blue",dark_blue:"navy-blue",purple:"purple",magenta:"magenta",pink:"pink"};class f extends r.b{async open(e){if(this.accounts=this.saveFile.get("accounts",[]),0===this.accounts.length)for(;;){let e=await this.ui.prompt({title:"Elemental 5 Login",text:"Go to [dev.elemental5.net](https://dev.elemental5.net) and copy your API Token to login.",defaultInput:"",confirmButton:"Log In"});if(!e)return!1;if("true"===(await fetch(this.baseUrl+"/validate_user_string?user_string="+e).then(e=>e.json())).valid){this.accounts=[{id:e,name:"User"}],this.saveFile.set("accounts",this.accounts);break}this.saveFile.set("user_string","dummy")}return!0}async close(){}async getStats(){return{totalElements:0}}async getElement(e){const t=await this.store.get(encodeURIComponent(e))||null;if(t)return{id:t.name,display:{text:t.name,color:h[t.color]},stats:{creators:[t.pioneer]}}}async getCombo(e){const t=await this.store.get(e.map(e=>encodeURIComponent(e)).join("+"));if(t)return t;{const t=await fetch(this.baseUrl+"/combine_elements?user_string="+this.token+"&element1="+encodeURIComponent(e[0])+"&element2="+encodeURIComponent(e[1])).then(e=>e.json());return"already_has_element"===t.type||"invalid_user_elements"===t.type?[]:"combined"===t.type?(await this.store.set(encodeURIComponent(t.result.name),t.result),await this.store.set(e.map(e=>encodeURIComponent(e)).join("+"),[t.result.name]),[t.result.name]):[]}}async getStartingInventory(){return[]}getSaveFiles(){return this.accounts}async readSaveFileElements(e){this.token=e;const t=this.saveFile.get("element_count."+e,0),n=await fetch(this.baseUrl+"/sync_elements?user_string="+e+"&num_elements="+t).then(e=>e.text());if("up_to_date"!==n){const t=JSON.parse(n);await Promise.all(t.map(e=>this.store.set(encodeURIComponent(e.name),e)));const r=t.map(e=>e.name);return this.saveFile.set("inventory."+e,r),this.saveFile.set("element_count."+e,t.length),r}return this.saveFile.get("inventory."+e)}async writeNewElementToSaveFile(e,t){this.saveFile.set("inventory."+e,[...new Set(this.saveFile.get("inventory."+e,[]).concat(t).filter(Boolean))])}canCreateSaveFile(e){return!1}createNewSaveFile(e){throw new Error("Method not implemented.")}canDeleteSaveFile(e){return!1}deleteSaveFile(e){throw new Error("Method not implemented.")}canRenameSaveFile(e,t){return!1}renameSaveFile(e,t){throw new Error("Method not implemented.")}}async function p(e){let t=await fetch(e.prefix+"get_found/"+e.uid),n=await t.json();return await e.saveFile.set("found",n),n}async function m(e,t,n){let r=await fetch(e.prefix+"suggestion_combos/"+encodeURIComponent(t)+"/"+encodeURIComponent(n)),i=await r.json();return null==i&&(i=[]),i}async function g(e,t){let n=await fetch(e.prefix+"get_suggestion/"+encodeURIComponent(t)),r=await n.json();return null==r?null:r}async function y(e,t,n){let r=await fetch(t.prefix+"up_suggestion/"+e+"/"+t.uid);var i=await r.text();if("create"==i){let a=await t.ui.prompt({title:"Confirm Creator Mark",text:"Enter below what you want to use for your creator mark. You are responsible for the creation of this element!"});var o="No comment.";return a&&(o=a),r=await fetch(t.prefix+"create_suggestion/"+encodeURIComponent(n[0])+"/"+encodeURIComponent(n[1])+"/"+encodeURIComponent(e)+"/"+encodeURIComponent(o)+"/"+encodeURIComponent(t.saveFile.get("email","anonymous"))),""!=(i=await r.text())?(await t.ui.alert({text:i,title:"Error",button:"Ok"}),{suggestType:"failed"}):{suggestType:"vote",newElements:[e]}}return""!=i?(await t.ui.alert({text:i,title:"Error",button:"Ok"}),{suggestType:"failed"}):{suggestType:"vote"}}f.type="elemental5";class b{async init(){var e=window.indexedDB.open("Nv7Elemental",3);return new Promise((t,n)=>{e.onsuccess=e=>{this.db=e.target.result,this.db.onerror=function(e){n(e.target)},t()},e.onerror=function(e){n(e.target)},e.onupgradeneeded=e=>{var n=0;this.db=e.target.result;var r=this.db.createObjectStore("Elements",{keyPath:"name"});r.createIndex("name","name",{unique:!0}),r.transaction.oncomplete=function(e){2==++n&&t()},(r=this.db.createObjectStore("Found",{keyPath:"name"})).createIndex("name","name",{unique:!0}),r.transaction.oncomplete=function(e){2==++n&&t()}}})}async store(e){var t=this.db.transaction(["Elements"],"readwrite");return new Promise((n,r)=>{t.oncomplete=function(e){n()},t.onerror=function(e){r(e.target)},t.objectStore("Elements").put(e)})}async get(e){var t=this.db.transaction(["Elements"],"readwrite");return new Promise((n,r)=>{t.onerror=function(e){r(e.target)};var i=t.objectStore("Elements").get(e);i.onsuccess=function(e){n(i.result)}})}async getAllElements(){var e=this.db.transaction(["Elements"],"readwrite");return new Promise((t,n)=>{e.onerror=function(e){n(e.target)};var r=e.objectStore("Elements").getAll();r.onsuccess=function(e){t(r.result)}})}}class v extends r.b{constructor(){super(...arguments),this.votesRequired=3,this.elemCache={}}async open(e){return this.prefix=this.config.prefix,this.cache=new b,await this.cache.init(),await async function(e,t){var n=e.saveFile.get("email","default"),r=e.saveFile.get("password","default");if("default"==n||"default"==r)for(var i=!1;;){t.status("Requesting Login Info",0);let n=await e.ui.dialog({title:"Nv7 Elemental Login",parts:[{id:"email",type:"email",placholder:"example@example.com",required:!0},{id:"password",type:"password",required:!0}],buttons:[{id:1,label:i?i&&"Register":"Log In"},{id:0,label:i?i&&"Log In":"Register"},!i&&{id:-2,label:"Anonymous"},{id:-1,label:"Cancel"}].filter(Boolean)});if(t.status("Processing Login Info",0),1==n.button){t.status("Authenticating",0),a=i?await fetch(e.prefix+"create_user/"+encodeURIComponent(n.email)+"/"+encodeURIComponent(n.password)):await fetch(e.prefix+"login_user/"+encodeURIComponent(n.email)+"/"+encodeURIComponent(n.password)),t.status("Authenticating",.5);var o=await a.json();return t.status("Authenticating",1),1==o.success?(e.uid=o.data,e.saveFile.set("email",n.email),e.saveFile.set("password",n.password),t.status("Loading Game",0),!0):(t.status("Showing Error",0),await e.ui.alert({text:o.data,title:"Error",button:"Ok"}),!1)}if(0==n.button)i=!i;else{if(-2==n.button){t.status("Generating username",0);var a=await fetch(e.prefix+"new_anonymous_user");t.status("Generating username",.5);var s=await a.json();if(t.status("Generating username",1),!s.success)return t.status("Showing Error",0),await e.ui.alert({text:s.data,title:"Error",button:"Ok"}),!1;t.status("Creating account",0);const n=s.data;return a=await fetch(e.prefix+"create_user/"+encodeURIComponent(n)+"/"+encodeURIComponent("password")),t.status("Creating account",.5),s=await a.json(),t.status("Creating account",1),1==s.success?(e.uid=s.data,e.saveFile.set("email",n),e.saveFile.set("password","password"),t.status("Loading Game",0),!0):(t.status("Showing Error",0),await e.ui.alert({text:o.data,title:"Error",button:"Ok"}),!1)}if(-1==n.button)return!1}}else{if(t.status("Authenticated",0),a=await fetch(e.prefix+"login_user/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)),t.status("Authenticating",.5),o=await a.json(),t.status("Authenticating",1),o.success)return e.uid=o.data,t.status("Loading Game",0),!0;t.status("Showing Error",0),await e.ui.alert({text:o.data,title:"Error",button:"Ok"}),await e.saveFile.set("email","default"),await e.saveFile.set("password","default"),await e.ui.reloadSelf()}}(this,e),await async function(e,t){var n;t.status("Reading Elements",0);let r=await e.cache.getAllElements();for(n in t.status("Reading Elements",.5),r)e.elemCache[r[n].name]=r[n],t.status("Reading Elements",.5+(n+1/r.length/2));t.status("Loading Savefile",0);let i=await p(e);var o;for(n in t.status("Downloading Elements",0),i)if(o=i[n],t.status("Downloading Elements",n/i.length),!(o in e.elemCache)){var a=await e.cache.get(o);if(!a){var s=await fetch(e.prefix+"get_elem/"+encodeURIComponent(o));a=await s.json(),await e.cache.store(a)}e.elemCache[o]=a}}(this,e),!0}async close(){this.ref.close()}async getStats(){return{totalElements:0}}async getElement(e){return async function(e,t){var n=e.elemCache[t];if(!(t in e.elemCache)&&!(n=await e.cache.get(t))){var r=await fetch(e.prefix+"get_elem/"+encodeURIComponent(t));n=await r.json(),await e.cache.store(n)}return{id:n.name,display:{text:n.name,color:n.color,categoryName:n.color.split("_")[0]},createdOn:n.createdOn,stats:{creators:[n.creator,n.pioneer],comments:[{author:n.pioneer,comment:n.comment}],simplestRecipe:n.parents}}}(this,e)}async getCombo(e){return e.sort(),async function(e,t,n){const r=await fetch(e.prefix+"get_combo/"+encodeURIComponent(t)+"/"+encodeURIComponent(n));let i=await r.json();return i.exists?[i.combo]:[]}(this,e[0],e[1])}async getStartingInventory(){return["Air","Earth","Fire","Water"]}getSaveFiles(){return[{id:"main",name:"Main Save"}]}readSaveFileElements(e){return p(this)}writeNewElementToSaveFile(e,t){return async function(e,t){if(!(await e.saveFile.get("found")).includes(t)){await fetch(e.prefix+"new_found/"+e.uid+"/"+encodeURIComponent(t));var n=await e.saveFile.get("found");n.push(t),await e.saveFile.set("found",n)}}(this,t)}canCreateSaveFile(e){return!1}createNewSaveFile(e){throw new Error("Method not implemented.")}canDeleteSaveFile(e){return!1}deleteSaveFile(e){throw new Error("Method not implemented.")}canRenameSaveFile(e,t){return!1}renameSaveFile(e,t){throw new Error("Method not implemented.")}getSuggestionColorInformation(){return{type:"dynamic-elemental4"}}async getSuggestions(e){return e.sort(),async function(e,t,n){var r=await m(e,t,n),i=[];for(var o in r){var a=await g(e,r[o]);i.push({text:a.name,color:a.color})}return i}(this,e[0],e[1])}async createSuggestion(e,t){return e.sort(),async function(e,t,n,r){for(var i=await m(r,e,t),o=0;o<i.length;o++)if(i[o]==n.text)return y(i[o],r,[e,t]);var a={name:n.text,creator:r.saveFile.get("email","anonymous"),color:n.color,votes:0,voted:[r.uid]};let s=await fetch(r.prefix+"new_suggestion/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(JSON.stringify(a))),c=await s.text();if(""!=c){if("create"==c){let i=await r.ui.prompt({title:"Confirm Creator Mark",text:"Enter below what you want to use for your creator mark. You are responsible for the creation of this element!"});var l="No comment.";return i&&(l=i),s=await fetch(r.prefix+"create_suggestion/"+encodeURIComponent(e)+"/"+encodeURIComponent(t)+"/"+encodeURIComponent(n.text)+"/"+encodeURIComponent(l)+"/"+encodeURIComponent(r.saveFile.get("email","anonymous"))),c=await s.text(),""!=c?(await r.ui.alert({text:c,title:"Error",button:"Ok"}),{suggestType:"failed"}):{suggestType:"vote",newElements:[n.text]}}await r.ui.alert({text:c,title:"Error",button:"Ok"})}return{suggestType:"suggest"}}(e[0],e[1],t,this)}async downvoteSuggestion(e,t){return e.sort(),async function(e,t){var n=e.text;let r=await fetch(t.prefix+"down_suggestion/"+n+"/"+t.uid);var i=await r.text();""!=i&&await t.ui.alert({text:i,title:"Error",button:"Ok"})}(t,this)}async getRecentCombinations(e){return async function(e){let t=await fetch(e.prefix+"recents"),n=await t.json();for(var r=0;r<n.length;r++)n[r].recipe=n[r].Recipe,n[r].result=n[r].Result;return n}(this)}async waitForNewRecent(){return async function(e){return e.ref=new EventSource(e.config.databaseURL+"/recent.json"),new Promise((t,n)=>{var r=0;e.ref.addEventListener("put",(function(){++r>1&&(e.ref.close(),t())}))})}(this)}lookupCustomPaletteColor(e,t){const[n,...i]=t.split("_"),[o,a]=i.map(e=>parseFloat(e));return Object(r.c)(e[n],o,a)}getOptionsMenu(){return[{title:"Nv7's Elemental",desc:this.config.description,items:[{type:"button",label:"Log Out",onChange:async()=>{await this.saveFile.set("email","default"),await this.saveFile.set("password","default"),await this.ui.reloadSelf()}}]}]}}class _{async init(e){var t=window.indexedDB.open("Nv7Single",e.saveFile.get("dbVers",1));return this.api=e,new Promise((e,n)=>{t.onsuccess=t=>{this.db=t.target.result,this.db.onerror=function(e){n(e.target)},e()},t.onerror=function(e){n(e.target)},t.onupgradeneeded=async t=>{this.db=t.target.result;var n=this.db.createObjectStore("default",{keyPath:"index"});n.createIndex("index","index",{unique:!0}),n.transaction.oncomplete=async t=>{await this.add("default","Air",{name:"Air",color:"blue_0_0",comment:"The first element!",parents:[]}),await this.add("default","Earth",{name:"Earth",color:"brown_0_-1",comment:"The second element!",parents:[]}),await this.add("default","Fire",{name:"Fire",color:"orange_0_0",comment:"The third element!",parents:[]}),await this.add("default","Water",{name:"Water",color:"dark-blue_0_0",comment:"The third element!",parents:[]}),e()}}})}newPack(e){let t=this.api.saveFile.get("dbVers",1);t++,this.api.saveFile.set("dbVers",t),this.db.close();var n=window.indexedDB.open("Nv7Single",t);return new Promise(async(t,r)=>{n.onerror=function(e){r(e.target)},n.onupgradeneeded=n=>{this.db=n.target.result;var r=this.db.createObjectStore(e,{keyPath:"index"});r.createIndex("index","index",{unique:!0}),r.transaction.oncomplete=function(e){t()}}})}async add(e,t,n){var r=this.db.transaction([e],"readwrite");return new Promise((i,o)=>{r.oncomplete=function(e){i()},r.onerror=function(e){o(e.target)},r.objectStore(e).put({index:t,val:n})})}async get(e,t){var n=this.db.transaction([e],"readwrite");return new Promise((r,i)=>{n.onerror=function(e){i(e.target)};var o=n.objectStore(e).get(t);o.onsuccess=function(e){null==o.result?r(null):r(o.result.val)}})}async getAll(e){var t=this.db.transaction([e],"readwrite");return new Promise((n,r)=>{t.onerror=function(e){r(e.target)};var i=t.objectStore(e).getAll();i.onsuccess=function(e){let t={};if(null==i.result)n(t);else{for(let e=0;e<i.result.length;e++)t[i.result[e].index]=i.result[e].val;n(t)}}})}}function w(e){let t=[],n=function(e){let t=e.saveFile.get("packs",[]),n=[{type:"button",label:"New Pack",onChange:async()=>{let n=await e.ui.prompt({title:"Pack Name",text:"Enter the name of the pack below!"}),r=await e.ui.prompt({title:"Pack Description",text:"Enter the description of the pack below!"});if(""==n||""==r)return;let i={title:n,description:r,id:encodeURIComponent(n.toLowerCase())};if(t.includes(i))return void await e.ui.alert({title:"Pack Already Exists",text:"That pack already exists!"});e.pack=i.id,await e.cache.newPack(e.pack),t.push(i),e.saveFile.set("pack",e.pack),e.saveFile.set("packs",t),await e.cache.add(e.pack,"Air",{name:"Air",color:"blue_0_0",comment:"The first element!",parents:[]}),await e.cache.add(e.pack,"Earth",{name:"Earth",color:"brown_0_-1",comment:"The second element!",parents:[]}),await e.cache.add(e.pack,"Fire",{name:"Fire",color:"orange_0_0",comment:"The third element!",parents:[]}),await e.cache.add(e.pack,"Water",{name:"Water",color:"dark-blue_0_0",comment:"The third element!",parents:[]});let o=e.saveFile.get("found",{default:["Air","Earth","Water","Fire"]});o[e.pack]=["Air","Earth","Fire","Water"],e.saveFile.set("found",o),await e.ui.reloadSelf()}},{type:"button",label:"Upload Pack",onChange:async()=>{const n=document.createElement("input");n.type="file",n.accept=".pack",n.value=null,document.body.appendChild(n),n.click(),n.onchange=r=>{const i=new FileReader;i.onerror=e=>{console.error(e.target)},i.onload=async n=>{const r=JSON.parse(n.target.result);let i=JSON.parse(r.data);await e.ui.loading(async n=>{n.status("Creating Pack",0);try{await e.cache.newPack(r.id)}catch(t){await e.cache.init(e)}n.status("Installing Pack",0);let o=Object.keys(i);for(let t=0;t<o.length;t++)await e.cache.add(r.id,o[t],i[o[t]]),n.status("Installing Pack",t/o.length);n.status("Setting Up Pack",0),t=e.saveFile.get("packs",[]);let a=!1;for(let e=0;e<t.length;e++)t[e].id==r.id&&(a=!0);a||t.push({title:r.title,description:r.description,id:r.id}),n.status("Setting Up Pack",.1),e.pack=r.id,n.status("Setting Up Pack",.2),e.saveFile.set("packs",t),n.status("Setting Up Pack",.4),e.saveFile.set("pack",e.pack),n.status("Setting Up Pack",.8);let s=e.saveFile.get("found",{default:["Air","Earth","Water","Fire"]});s[e.pack]=["Air","Earth","Fire","Water"],e.saveFile.set("found",s),n.status("Setting Up Pack",1)}),await e.ui.reloadSelf()},i.readAsText(n.files[0])},document.body.removeChild(n)}}],r=[{label:"Edit",id:"edit"},{label:"Export",id:"export"},{label:"Select",id:"select"}];e.hasWifi&&r.splice(0,0,{label:"Upload",id:"upload"});for(let i=0;i<t.length;i++)n.push({type:"listItem",label:t[i].description,title:t[i].title,choices:r,onChange:async n=>{if("select"==n)e.saveFile.set("pack",t[i].id),e.pack=t[i].id,await e.ui.reloadSelf();else if("upload"==n)e.ui.loading(async n=>{n.status("Converting Data",0);let r=JSON.stringify(await e.cache.getAll(t[i].id));n.status("Converting Data",.5);let o={id:t[i].id,title:t[i].title,description:t[i].description,data:r,uid:e.uid},a=JSON.stringify(o);n.status("Initializing Request",0);let s=new XMLHttpRequest;s.open("POST",e.prefix+"single_upload",!0),s.setRequestHeader("Content-Type","application/json"),n.status("Uploading",0),await new Promise(async(t,r)=>{s.onreadystatechange=async()=>{4===s.readyState&&(500==s.status&&(n.status("Showing Error",0),await e.ui.alert({title:"Error",text:s.responseText})),t())},s.send(a)}),await e.ui.reloadSelf()});else if("export"==n)e.ui.loading(async n=>{n.status("Converting Data",0);let r=JSON.stringify(await e.cache.getAll(t[i].id));n.status("Converting Data",.5);let o={id:t[i].id,title:t[i].title,description:t[i].description,data:r,uid:e.uid},a=JSON.stringify(o);n.status("Downloading Pack",0);var s=document.createElement("a");n.status("Downloading Pack",.2),s.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(a)),n.status("Downloading Pack",.4),s.setAttribute("download",o.id+".pack"),n.status("Downloading Pack",.6),document.body.appendChild(s),n.status("Downloading Pack",.8),s.click(),n.status("Downloading Pack",1),document.body.removeChild(s)});else if("edit"==n){let n=await e.ui.prompt({title:"Pack Name",text:"Enter the name of the pack below!"}),r=await e.ui.prompt({title:"Pack Description",text:"Enter the description of the pack below!"});if(""==n||""==r)return;let o={title:n,description:r,id:encodeURIComponent(n.toLowerCase())};if(t.includes(o))return void await e.ui.alert({title:"Pack Already Exists",text:"That pack already exists!"});t[i].title=o.title,t[i].description=o.description,e.saveFile.set("packs",t),await e.ui.reloadSelf()}}});return n}(e);if(t.push({title:"Your Packs",desc:"These are the installed packs on your computer:",items:n}),e.hasWifi)try{let n=function(e){let t=[];return t.push({type:"select",label:"Sort By",choices:[{label:"Likes",id:"likes"},{label:"Date",id:"date"},{label:"A-Z",id:"az"},{label:"Z-A",id:"za"}],defaultValue:e.saveFile.get("kind"),onChange:async t=>{e.saveFile.set("kind",t),await e.ui.reloadSelf()}}),t.push({type:"string",label:"Query: ",defaultValue:e.saveFile.get("search",""),onChange:t=>{e.saveFile.set("search",t)}}),t.push({type:"button",label:"Search",onChange:async()=>{await e.ui.reloadSelf()}}),t}(e);n=n.concat(function(e){let t=[];for(let n=0;n<e.items.length;n++){let r=e.items[n];t.push({type:"listItem",label:r.description,title:r.title,choices:[{label:"Like",id:"like"},{label:"Install",id:"install"}],onChange:async t=>{"like"==t?(await e.ui.loading(async t=>{t.status("Liking Pack",0);let n=await fetch(e.prefix+"single_like/"+r.id+"/"+r.uid);t.status("Liking Pack",.5);let i=await n.text();""!=i&&(t.status("Showing Error",0),await e.ui.alert({text:i,title:"Error"}))}),await e.ui.reloadSelf()):"install"==t&&(await e.ui.loading(async t=>{t.status("Downloading Pack",0);let n=await fetch(e.prefix+"single_download/"+r.id+"/"+r.uid);if(t.status("Downloading Pack",.5),500==n.status){t.status("Downloading Error",0);let r=await n.text();return t.status("Showing Error",0),void await e.ui.alert({text:r,title:"Error"})}let i=await n.json(),o={title:r.title,description:r.description,id:r.id};t.status("Creating Pack",0);try{await e.cache.newPack(o.id)}catch(t){await e.cache.init(e)}t.status("Installing Pack",0);let a=Object.keys(i);for(let n=0;n<a.length;n++)await e.cache.add(o.id,a[n],i[a[n]]),t.status("Installing Pack",n/a.length);t.status("Setting Up Pack",0);let s=e.saveFile.get("packs",[]),c=!1;for(let e=0;e<s.length;e++)s[e].id==o.id&&(c=!0);c||s.push(o),t.status("Setting Up Pack",.1),e.pack=r.id,t.status("Setting Up Pack",.2),e.saveFile.set("packs",s),t.status("Setting Up Pack",.4),e.saveFile.set("pack",e.pack),t.status("Setting Up Pack",.8);let l=e.saveFile.get("found",{default:["Air","Earth","Water","Fire"]});l[e.pack]=["Air","Earth","Fire","Water"],e.saveFile.set("found",l),t.status("Setting Up Pack",1)}),await e.ui.reloadSelf())}})}return t}(e)),t.push({title:"Available Packs",desc:"A list of packs that people have uploaded!",items:n})}catch(t){e.hasWifi=!1}return t}class k extends r.b{constructor(){super(...arguments),this.hasWifi=!0}async open(e){try{this.prefix=this.config.prefix,await async function(e,t){var n=e.saveFile.get("email","default"),r=e.saveFile.get("password","default");if("default"==n||"default"==r)for(var i=!1;;){t.status("Requesting Login Info",0);let n=await e.ui.dialog({title:"Nv7 Elemental Login",parts:[{id:"email",type:"email",placeholder:"example@example.com"},{id:"password",type:"password"}],buttons:[{id:"login",label:i?i&&"Register":"Log In"},{id:"switch",label:i?i&&"Log In":"Register"},!i&&{id:"anonymous",label:"Anonymous"},{id:"cancel",label:"Cancel"}].filter(Boolean)});if(t.status("Processing Login Info",0),"login"==n.button){t.status("Authenticating",0),a=i?await fetch(e.prefix+"create_user/"+encodeURIComponent(n.email)+"/"+encodeURIComponent(n.password)):await fetch(e.prefix+"login_user/"+encodeURIComponent(n.email)+"/"+encodeURIComponent(n.password)),t.status("Authenticating",.5);var o=await a.json();return t.status("Authenticating",1),1==o.success?(e.uid=o.data,e.saveFile.set("email",n.email),e.saveFile.set("password",n.password),t.status("Loading Game",0),!0):(t.status("Showing Error",0),await e.ui.alert({text:o.data,title:"Error"}),!1)}if("switch"==n.button)i=!i;else{if("anonymous"==n.button){t.status("Generating username",0);var a=await fetch(e.prefix+"new_anonymous_user");t.status("Generating username",.5);var s=await a.json();if(t.status("Generating username",1),!s.success)return t.status("Showing Error",0),await e.ui.alert({text:s.data,title:"Error"}),!1;t.status("Creating account",0);const n=s.data;return a=await fetch(e.prefix+"create_user/"+encodeURIComponent(n)+"/"+encodeURIComponent("password")),t.status("Creating account",.5),s=await a.json(),t.status("Creating account",1),1==s.success?(e.uid=s.data,e.saveFile.set("email",n),e.saveFile.set("password","password"),t.status("Loading Game",0),!0):(t.status("Showing Error",0),await e.ui.alert({text:o.data,title:"Error"}),!1)}if("cancel"==n.button)return!1}}else{if(t.status("Authenticated",0),a=await fetch(e.prefix+"login_user/"+encodeURIComponent(n)+"/"+encodeURIComponent(r)),t.status("Authenticating",.5),o=await a.json(),t.status("Authenticating",1),o.success)return e.uid=o.data,t.status("Loading Game",0),!0;t.status("Showing Error",0),await e.ui.alert({text:o.data,title:"Error"}),e.saveFile.set("email","default"),e.saveFile.set("password","default"),await e.ui.reloadSelf()}}(this,e),await async function(e,t){t.status("Getting Pack List",0);let n=await fetch(e.prefix+"single_list/"+e.saveFile.get("kind","likes")+"/"+e.saveFile.get("search",""));if(500==n.status){t.status("Loading Error",0);let r=await n.text();return t.status("Showing Error",0),void await e.ui.alert({text:r,title:"Error"})}t.status("Getting Pack List",.5),e.items=await n.json()}(this,e)}catch(e){this.hasWifi=!1}return e.status("Loading packs",0),"default"==this.saveFile.get("packs","default")&&(this.saveFile.set("packs",[{title:"Default",description:"The default pack.",id:"default"}]),this.saveFile.set("pack","default"),this.saveFile.set("dbVers",1),this.saveFile.set("found",{default:["Air","Earth","Water","Fire"]}),this.saveFile.set("kind","likes"),this.saveFile.set("search","")),this.pack=this.saveFile.get("pack","default"),e.status("Initializing cache",0),this.cache=new _,e.status("Initializing cache",.1),await this.cache.init(this),e.status("Loading Elements",0),!0}async close(){}async getStats(){return{totalElements:0}}async getElement(e){return async function(e,t){for(var n=await e.cache.get(e.pack,t);!n;)await new Promise(e=>setTimeout(e,500)),n=await e.cache.get(e.pack,t);return{id:n.name,display:{text:n.name,color:n.color,categoryName:n.color.split("_")[0]},stats:{creators:[],comments:[{author:"",comment:n.comment}],simplestRecipe:n.parents}}}(this,e)}async getCombo(e){return e.sort(),async function(e,t,n){let r=await e.cache.get(e.pack,encodeURIComponent(t)+"+"+encodeURIComponent(n));return r?[r]:[]}(this,e[0],e[1])}async getStartingInventory(){return["Air","Earth","Fire","Water"]}lookupCustomPaletteColor(e,t){const[n,...i]=t.split("_"),[o,a]=i.map(e=>parseFloat(e));return Object(r.c)(e[n],o,a)}getSuggestionColorInformation(){return{type:"dynamic-elemental4"}}async getSuggestions(e){return[]}async createSuggestion(e,t){return e.sort(),async function(e,t,n,r){let i=await e.ui.prompt({title:"Comment",text:"Enter what you want the element comment to be below!"});var o="No comment.";i&&(o=i);var a={name:t.text,color:t.color.base+"_"+t.color.saturation+"_"+t.color.lightness,comment:o,parents:[n,r]};return await e.cache.add(e.pack,a.name,a),await e.cache.add(e.pack,encodeURIComponent(n)+"+"+encodeURIComponent(r),a.name),{suggestType:"suggest",newElements:[a.name]}}(this,t,e[0],e[1])}async downvoteSuggestion(e,t){}getOptionsMenu(){return w(this)}readSaveFileElements(e){return this.saveFile.get("found",{default:["Air","Earth","Water","Fire"]})[this.pack]}writeNewElementToSaveFile(e,t){let n=this.saveFile.get("found",{default:["Air","Earth","Water","Fire"]});n[this.pack].push(t),this.saveFile.set("found",n)}canCreateSaveFile(e){return!1}createNewSaveFile(e){throw new Error("Method not implemented.")}canDeleteSaveFile(e){return!1}deleteSaveFile(e){throw new Error("Method not implemented.")}canRenameSaveFile(e,t){return!1}renameSaveFile(e,t){throw new Error("Method not implemented.")}getSaveFiles(){return[{id:"main",name:"Main Save"}]}}class x{constructor(e){this.map=new Map,this.options=Object.assign({ttl:300,checkTime:600},e),this.timeout=null}set(e,t,n=this.options.ttl){const r=this.map.get(e);r?(r.value=t,r.expires=n?Date.now()+1e3*n:null):(this.map.set(e,{key:e,value:t,expires:n?Date.now()+1e3*n:null}),null!==this.timeout&&(this.timeout=setTimeout(this.update,1e3*this.options.checkTime)))}get(e){const t=this.map.get(e);return t&&(!t.expires||t.expires>Date.now())?t.value:null}has(e){return this.map.has(e)}touch(e,t=this.options.ttl){const n=this.map.get(e);n&&(n.expires=t?Date.now()+1e3*t:null)}update(){this.map.forEach(e=>{e.expires&&e.expires<Date.now()&&this.delete(e.key)}),this.map.size>=1&&(this.timeout=setTimeout(this.update,this.options.checkTime))}delete(e){const t=this.map.get(e);t&&this.options.onDelete&&this.options.onDelete(e,t.value),this.map.delete(e),0===this.map.size&&this.timeout&&clearTimeout(this.timeout)}deleteAll(){this.map.forEach(e=>{this.delete(e.key)})}dispose(){this.timeout&&clearTimeout(this.timeout),this.map.clear()}}var S=n(25);function E(e){if(!e)return"01";for(var t=0,n=0;t<e.length;t++)n=Math.imul(17,n)+e.charCodeAt(t)|0;return(Math.abs(n)%256).toString(16)}class O extends S.a{constructor(e){super(),this.dbCache=new x({ttl:5,checkTime:60}),this.dbWritingPaused=!1,this.dbDirty={},this.entryWriteCounter=0,this.createQueue=Object(l.a)(),this.writeGroup=this.createQueue(async e=>{this.dbWritingPaused||this.dbDirty[e]&&(await this.store.set("g"+e,this.dbCache.get(e)),this.dbCache.touch(e))}),this.writeAllGroups=this.createQueue(async()=>Promise.all(Object.keys(this.dbDirty).filter(e=>this.dbDirty[e]).map(async e=>{await this.store.set("g"+e,this.dbCache.get(e)),this.dbDirty[e]=!1}))),this.get=this.createQueue(async e=>{const t=E(e);if(this.dbCache.has(t))return this.dbCache.touch(t),this.dbCache.get(t)[e];{const n=await this.store.get("g"+t)||{};return this.dbCache.set(t,n),n[e]}}),this.set=this.createQueue(async(e,t)=>{const n=E(e);if(this.dbCache.has(n)){this.dbCache.touch(n);this.dbCache.get(n)[e]=t}else{const r=await this.store.get("g"+n)||{};this.dbCache.set(n,r),this.dbDirty[n]=!0,r[e]=t}this.dbWritingPaused||this.writeGroup.callLater(n),this.entryWriteCounter++,this.entryWriteCounter>2e3&&(this.entryWriteCounter=0,await Object(o.b)(0))}),this.clear=this.createQueue(async()=>{await this.dbCache.deleteAll(),await this.store.clear()}),this.keys=this.createQueue(async()=>(await Promise.all((await this.store.keys()).map(async e=>Object.keys(await this.store.get(e))))).flat()),this.del=this.createQueue(async e=>{const t=E(e);if(this.dbCache.has(t)){this.dbCache.touch(t);delete this.dbCache.get(t)[e]}else{const n=await this.store.get("g"+t)||{};this.dbCache.set(t,n),this.dbDirty[t]=!0,delete n[e]}this.writeGroup(t),this.entryWriteCounter++,this.entryWriteCounter>1e3&&(this.entryWriteCounter=0,await Object(o.b)(0))}),this.store=new S.b(e)}bulkTransfer(e){return new Promise((t,n)=>{this.dbWritingPaused=!0,e().then(()=>{this.dbWritingPaused=!1,this.writeAllGroups().then(()=>{t()})}).catch(e=>{n(e)})})}length(){throw new Error("Method not implemented.")}}class A extends r.b{async open(e){return console.log("holy hell you actually called the singleplayer api somehow"),!1}async close(){}async getStats(){return{totalElements:0}}async getElement(e){return await this.store.get("e."+e)}async getCombo(e){const t=await Promise.all(e.map(e=>this.getElement(e))),n=t.slice(1).reduce((e,t)=>t.stats.alternateIds.map(e=>e.split(":")[0]).filter(t=>e.includes(t)),t[0].stats.alternateIds.map(e=>e.split(":")[0])),r=n.length?await Promise.all(n.map(async e=>this.store.get("c."+t.map(t=>t.stats.alternateIds.find(t=>t.startsWith(e))).join("+")))):await this.store.get("c."+t.map(e=>e.id));return console.log(n),console.log(r),[]}async getStartingInventory(){return["fire","air","water","earth"]}}var C=n(4),T=n(1),j=n(41),I=n(8),L=n(9);async function P(e,t){const n=document.createElement("div");n.classList.add("news-combo");const r=document.createElement("div");r.classList.add("equation-symbol");const i=document.createElement("div");i.classList.add("equation-symbol"),r.innerHTML="+",i.innerHTML="=";const[o,a,s]=await Promise.all([e.getElement(t.recipe[0]).then(e=>Object(I.a)(e)),e.getElement(t.recipe[1]).then(e=>Object(I.a)(e)),e.getElement(t.result).then(e=>Object(I.a)(e))]);return n.appendChild(o),n.appendChild(r),n.appendChild(a),n.appendChild(i),n.appendChild(s),n}var M=n(15),R=n(2),B=n(11);const F={sky:"blue",brown:"dark-brown",orange:"orange",blue:"dark-blue",navy:"navy-blue",silver:"light-grey",purple:"dark-purple",maroon:"dark-red",gray:"grey",green:"dark-green",lime:"green",yellow:"yellow",olive:"dark-yellow",white:"white",tan:"brown",black:"black",red:"red",lavender:"purple",pink:"pink",magenta:"magenta"};class U extends r.b{async open(e){return this.clientId=this.config.googleAuth.clientId,!0}async close(){}async getStats(){return{totalElements:0}}async getElement(e){const t=await this.store.get(e);if(!t){const t=await fetch(this.baseUrl+"/api/get-full-element/"+e).then(e=>e.json());if(Array.isArray(t)&&0===t.length)return null;{const e={id:t.id.toString(),display:{color:F[t.color],text:t.name},createdOn:t.createdOn,stats:{creators:[t.suggestedBy,t.pioneer],comments:[{comment:t.pioneerNote,author:t.pioneer}]}};return await this.store.set(t.id.toString(),e),e}}return t}async getCombo(e){const t=await this.store.get(e.join("+"));if(!t){const t=e.map(e=>parseInt(e)).sort((e,t)=>e-t),n=await fetch(this.baseUrl+"/api/get-recipe/"+t.join("/")).then(e=>e.json());return Array.isArray(n)&&0===n.length?[]:(await this.store.set(n.id.toString(),{id:n.id.toString(),display:{color:F[n.color],text:n.name},stats:null}),[n.id.toString()])}return[t]}async getStartingInventory(){return["1","2","3","4"]}getSuggestionColorInformation(){return{type:"palette",palette:[{id:"blue",color:{base:"blue",lightness:0,saturation:0}},{id:"dark-brown",color:{base:"dark-brown",lightness:0,saturation:0}},{id:"orange",color:{base:"orange",lightness:0,saturation:0}},{id:"dark-blue",color:{base:"dark-blue",lightness:0,saturation:0}},{id:"navy-blue",color:{base:"navy-blue",lightness:0,saturation:0}},{id:"light-grey",color:{base:"light-grey",lightness:0,saturation:0}},{id:"dark-purple",color:{base:"dark-purple",lightness:0,saturation:0}},{id:"dark-red",color:{base:"dark-red",lightness:0,saturation:0}},{id:"grey",color:{base:"grey",lightness:0,saturation:0}},{id:"dark-green",color:{base:"dark-green",lightness:0,saturation:0}},{id:"green",color:{base:"green",lightness:0,saturation:0}},{id:"yellow",color:{base:"yellow",lightness:0,saturation:0}},{id:"dark-yellow",color:{base:"dark-yellow",lightness:0,saturation:0}},{id:"white",color:{base:"white",lightness:0,saturation:0}},{id:"brown",color:{base:"brown",lightness:0,saturation:0}},{id:"black",color:{base:"black",lightness:0,saturation:0}},{id:"red",color:{base:"red",lightness:0,saturation:0}},{id:"purple",color:{base:"purple",lightness:0,saturation:0}},{id:"pink",color:{base:"pink",lightness:0,saturation:0}},{id:"magenta",color:{base:"magenta",lightness:0,saturation:0}}]}}async getSuggestions(e){return[]}async downvoteSuggestion(e,t){return null}async createSuggestion(e,t){return{suggestType:"failed"}}}U.type="reborn";var D=n(10);class N extends r.b{async open(e){return!0}async close(){}async getStats(){return{totalElements:0}}async getElement(e){return null}async getCombo(e){return[]}async getStartingInventory(){return[]}}N.type="ledom";var z=n(20),q=n(23);const H=["red","orange","yellow","yellow-green","green","aqua","blue","dark-blue","purple","magenta","hot-pink"];class $ extends r.b{async open(e){return!0}async close(){}async getStats(){return{}}async getElement(e){return{display:{text:"Element",color:H[parseInt(e)%H.length],categoryName:"Elements"},id:e}}async getCombo(e){return e.slice(0,1)}async getStartingInventory(){return Array(this.config.elements).fill(null).map((e,t)=>t.toString())}}const W=["white","black","grey","brown","red","orange","yellow","yellow-green","green","aqua","blue","dark-blue","purple","magenta","hot-pink"];class Z extends r.b{async open(e){return!0}async close(){}async getStats(){return{}}async getElement(e){return{display:{text:e,color:e,categoryName:W.includes(e)?"Main Palette":"Extended Palette (Derived from Main Palette)"},id:e}}async getCombo(e){return[]}async getStartingInventory(){return["white","black","light-grey","grey","dark-grey","brown","dark-brown","red","dark-red","orange","dark-orange","yellow","dark-yellow","yellow-green","dark-yellow-green","green","dark-green","aqua","dark-aqua","blue","dark-blue","navy-blue","purple","dark-purple","magenta","dark-magenta","pink","hot-pink","dark-hot-pink"]}}class G extends r.b{async open(e){return!0}async close(){}async getStats(){return{totalElements:0}}async getElement(e){return null}async getCombo(e){return[]}async getStartingInventory(){return[]}}var V=n(72);let Y=!1;function K(){document.getElementById("server-config").innerHTML=""}function X(e){K();const t=document.getElementById("server-config");e.getOptionsMenu().forEach(n=>{t.appendChild(function(e,t){const n=document.createElement("div"),r=document.createElement("h1");if(r.innerHTML=Object(o.e)(t.title),n.appendChild(r),t.desc){const e=document.createElement("p");e.innerHTML=Object(o.e)(t.desc),n.appendChild(e)}return t.items.forEach(t=>n.appendChild(function(e,t){return J[t.type](e,t)}(function(e,t){let n=t.saveFileProp&&e.saveFile.get(t.saveFileProp)||t.value||t.defaultValue;const r=new V.SimpleState(n);let i=!1;return r.onChange(o=>{i?i=!1:!t.validator||t.validator(o)?(n=o,t.requiresRestart&&(Y=!0),t.saveFileProp&&e.saveFile.set(t.saveFileProp,n),t.onChange(n)):(i=!0,r.set(n))}),r}(e,t),t))),n}(e,n))})}const J={string:function(e,t){const n=document.createElement("div"),r=document.createElement("span");r.classList.add("text-field-label"),r.innerHTML=Object(o.e)(t.label),n.appendChild(r);const i=document.createElement("input");return n.appendChild(i),i.addEventListener("change",t=>{e.set(i.value)}),e.onChange(e=>{i.value=e.toString()}),i.value=e.get(),n},number:function(e,t){return document.createTextNode(JSON.stringify(t))},checkbox:function(e,t){return document.createTextNode(JSON.stringify(t))},switch:function(e,t){return document.createTextNode(JSON.stringify(t))},select:function(e,t){const n=document.createElement("select"),r=document.createElement("option");r.innerHTML=Object(o.e)(t.label),r.disabled=!0,r.value="default",n.appendChild(r);for(let e=0;e<t.choices.length;e++){const r=document.createElement("option");r.innerHTML=Object(o.e)(t.choices[e].label),r.value=t.choices[e].id,n.appendChild(r)}t.defaultValue?n.value=t.defaultValue:n.value="default";return n.onchange=e=>{t.onChange(n.value)},n},checkboxGroup:function(e,t){return document.createTextNode(JSON.stringify(t))},button:function(e,t){const n=document.createElement("button");return n.innerHTML=Object(o.e)(t.label),n.onclick=t.onChange,n},label:function(e,t){const n=document.createElement("p");return n.innerHTML=Object(o.e)(t.label),n},listItem:function(e,t){const n=document.createElement("div");n.classList.add("theme-item");const r=document.createElement("div");r.classList.add("theme-info");const i=document.createElement("div");i.classList.add("theme-title");const a=document.createElement("strong");a.innerHTML=Object(o.e)(t.title),i.appendChild(a);const s=document.createElement("div");s.classList.add("theme-description"),s.innerHTML=Object(o.e)(t.label),r.appendChild(i),r.appendChild(s),n.appendChild(r);for(let e=0;e<t.choices.length;e++){const r=document.createElement("button");r.classList.add("huge"),r.innerHTML=Object(o.e)(t.choices[e].label),e!=t.choices.length-1&&(r.style.marginRight="5px"),r.onclick=function(){t.onChange(t.choices[e].id)},n.appendChild(r)}return n}};r.b;const Q={"internal:null":q.a,"internal:blank":G,"internal:all-colors":Z,"internal:stress-test":$,"internal:singleplayer":A,reborn:U,elemental4:d,elemental5:f,e4:N,le4:N,nv7:v,nv7single:k};let ee,te,ne,re;const ie={"internal:null":{type:"internal:null",name:"No Server",description:"You are not connected to any server.",icon:location.origin+"/null-server.png"},"internal:singleplayer":{type:"internal:singleplayer",name:"Singleplayer with Element Packs",description:"Create Element Packs to create your own Elemental Game, or play back shut down databases.",icon:location.origin+"/singleplayer.png"},"internal:all-colors":{type:"internal:all-colors",name:"Theme Debug: All Colors",description:"Contains all colors from the Elemental Palette.",icon:location.origin+"/all-colors-server.png"},"internal:stress-test-1k":{type:"internal:stress-test",name:"Stress Test: 5k Elements, 1 Category",description:"1k Dummy Elements",elements:1e3},"internal:stress-test-5k":{type:"internal:stress-test",name:"Stress Test: 5k Elements, 1 Category",description:"5k Dummy Elements",elements:5e3},"internal:stress-test-10k":{type:"internal:stress-test",name:"Stress Test: 10k Elements, 1 Category",description:"10k Dummy Elements",elements:1e4}};async function oe(){return Object.keys(Q)}async function ae(e,t,n){if(e=e.replace(/\/(elemental\.json)?$/,""),ee){try{te.close(),K(),ee.close()}catch(e){console.error("Could not close the current API. This will probably cause a memory leak."),console.error(e)}ee=null,te=null}let i=!1;n||(n=Object(M.a)(),i=!0),await Object(B.a)();try{const a=t||ie[e]||await fetch(e+"elemental.json").then(e=>e.json()).catch(async()=>(await Object(R.o)(e)).config);if(!a)throw new Error("Could not find Server.");Object(R.q)(e,a);const s=Q[a.type];te=await Object(R.f)(e);const c=new s({baseUrl:e,config:a,saveFile:te,ui:{alert:C.a,confirm:C.b,prompt:C.e,dialog:C.c,popup:e=>Promise.resolve(null),loading:async e=>{const t=Object(M.a)(),n=await e(t);return t.dispose(),n},reloadSelf:async()=>{await ae(e,t,null)}},store:a.type.startsWith("internal:")?new O("data."+a.type.slice(9)):new O(a.type+":"+Object(R.s)(e))});if(!await c.open(n)){try{c.close()}catch(e){}throw new Error("Could not open API connection.")}ee=c,Object(T.a)(),document.querySelector("#element-sidebar").style.display=Object(r.d)(c,"suggestion")?"block":"none",document.querySelector("#null_server").style.display=c[q.b]?"flex":"none",document.querySelector("#server-name").innerHTML=c[q.b]?"":"<b>Server:</b> "+Object(o.e)(`${a.name||`Untitled Server (type=${a.type})`}${e.startsWith("internal:")?"":"  "+e}`),document.querySelector("#server-title").innerHTML=Object(o.e)(a.name||`Unnamed Server (type=${a.type})`),document.querySelector("#server-description").innerHTML=Object(o.e)(a.description||"[No description provided]"),a.icon?document.querySelector("#server-icon").setAttribute("style",`background-image:url(${Object(z.resolve)(e,a.icon)});background-size:cover;`):document.querySelector("#server-icon").setAttribute("style","background-color:#888;"),D.a.includes(e)?document.querySelector("#server-remove").setAttribute("disabled","true"):document.querySelector("#server-remove").removeAttribute("disabled"),n.status("Loading News");const l=Object(r.d)(ee,"optionsMenu");return l&&X(l),n.status("Loading News"),await async function(){const e=ue("recentCombinations");if(e){const t=await e.getRecentCombinations(30),n=await Promise.all(t.map(t=>P(e,t))),r=document.querySelector(".news-container");r.innerHTML="",n.forEach(e=>r.appendChild(e)),e.waitForNewRecent().then((async function t(){e.waitForNewRecent().then(t),Object(L.d)("news.new-element");const n=await e.getRecentCombinations(1),i=await P(e,n[0]);i.classList.add("animate-in"),r.prepend(i),r.lastElementChild.remove()}))}}(),await ce(n),n.status("Starting Statistics"),await Object(B.d)(),i&&n.dispose(),Object(D.i)(e),!0}catch(t){console.error(t),await Object(C.a)({title:"Error Connecting",text:`Failed to connect to ${e}.`}),await ae("internal:null",null,n)}}async function se(e){const t=Object(M.a)();try{e!==ne&&(t.status("Saving Current Game",0),await Object(B.a)(),Object(T.a)(),t.status("Loading Savefile",0),await Object(R.v)(ee,e),await ce(t),t.status("Finalizing",0),await Object(B.d)())}catch(e){}t.dispose()}async function ce(e){e.status("Loading Elements");const t=await Object(R.n)(ee),n=await Promise.all(t.map(e=>ee.getElement(e)));for(let t=0;t<n.length;t++)t%500==0&&(e.status("Loading Elements",t/n.length),await Object(o.b)(1)),Object(j.a)(n[t],null,!0);e.status("Loading Elements",1),await Object(o.c)(),await Object(o.c)(),await le()}async function le(){re=await Object(R.g)(ee),ne=await Object(R.h)(ee);const e=document.getElementById("change-savefile");e.innerHTML=re.map(e=>`<option value="save:${Object(o.e)(e.id)}">${Object(o.e)(e.name)}</option>`).join(""),e.value="save:"+ne,document.getElementById("modify-savefile-create").disabled=!Object(R.a)(ee,""),document.getElementById("modify-savefile-rename").disabled=!Object(R.c)(ee,await Object(R.h)(ee),""),document.getElementById("modify-savefile-delete").disabled=!Object(R.b)(ee,await Object(R.h)(ee))}function ue(e){return Object(r.d)(ee,e)}},function(e,t,n){"use strict";n.d(t,"h",(function(){return k})),n.d(t,"g",(function(){return x})),n.d(t,"e",(function(){return S})),n.d(t,"k",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return C})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return j})),n.d(t,"m",(function(){return I})),n.d(t,"a",(function(){return M})),n.d(t,"l",(function(){return R})),n.d(t,"n",(function(){return F})),n.d(t,"f",(function(){return U}));var r=n(7),i=n.n(r),o=n(69),a=n.n(o),s=n(0),c=n(14),l=n(34),u=n(2),d=n(9),h=n(24),f=n(4),p=n(12),m=n(13),g=n(22);let y=!1;const b=[["elem4_default","themes/elem4_default",2],["elem4_dark","themes/elem4_dark",1]];let v,_=[],w=JSON.parse(localStorage.getItem("config-theme-order")||"[]");function k(){return _}function x(){return v}function S(){return w}function E(){return Promise.all(b.map(e=>I(e[0])))}function O(e){w=[...new Set([e,...w])]}function A(e){w=w.filter(t=>t!==e)}function C(e){const t=w.indexOf(e);if(-1===t||0===t)return;const n=w[t-1];w[t-1]=e,w[t]=n}function T(e){const t=w.indexOf(e);if(-1===t||t===w.length-1)return;const n=w[t+1];w[t+1]=e,w[t]=n}async function j(e,t){await Object(u.r)(e),_=await Object(u.m)(),t&&y&&(O(e.id),await F()),y&&Object(h.a)(e)}function I(e){return Object(u.C)(e)}const L=document.querySelector("#THEME_SWAP_OVERLAY");let P;async function M(){_=await Object(u.m)(),await Promise.all(b.filter(e=>!_.some(t=>t.id===e[0]&&t.version===l.version)).map(e=>Object(c.a)(e[1],"theme",!0))),await Object(s.b)(100),y=!0}async function R(){try{const e=JSON.parse(localStorage.getItem("workshop_add"));localStorage.removeItem("workshop_add"),e&&e.url&&e.type&&await Object(f.b)({title:"Add "+Object(p.capitalize)(e.type)+"?",text:`You are about to install DLC from \`${e.url}\`, make sure you trust the content you are installing.`,trueButton:"Add DLC"})&&await Object(c.a)(e.url,e.type),localStorage.setItem("close_workshop_dialog",e.date)}catch(e){}const e=Object(g.b)(async(e,t)=>{await Object(f.b)({title:"Add "+Object(p.capitalize)(t)+"?",text:`You are about to install DLC from \`${e}\`, make sure you trust the content you are installing.`,trueButton:"Add DLC"})&&await Object(c.a)(e,t)});window.addEventListener("storage",async t=>{if("workshop_add"==t.key)try{const t=JSON.parse(localStorage.getItem("workshop_add")||"x");localStorage.removeItem("workshop_add"),t.url&&t.type&&await e(t.url,t.type),localStorage.setItem("close_workshop_dialog",t.date)}catch(e){}})}let B=null;async function F(e=!0){L.style.pointerEvents="all";const t=JSON.stringify(w);"[]"===t?localStorage.removeItem("config-theme-order"):localStorage.setItem("config-theme-order",t);const n=P;P=document.createElement("style"),function(){const e=k(),t={sounds:{},music:[],colors:{},styles:[],sketch:"",sketch_developer:"",style_developer:""};w.concat("elem4_default").reverse().map(t=>e.find(e=>e.id===t)).filter(Boolean).forEach(e=>{e.sounds&&("merge"===e.sound_merge_mode?t.sounds=Object.assign(Object.assign({},t.sounds),e.sounds):t.sounds=e.sounds),e.colors&&(t.colors=Object.assign(Object.assign({},t.colors),e.colors)),e.music&&(t.music=t.music.concat({id:e.id,name:e.name,tracks:e.music})),e.styles&&(t.styles=Array.isArray(e.styles)?t.styles.concat(...e.styles):t.styles.concat(e.styles)),e.sketch&&(t.sketch=e.sketch),e.style_developer&&(t.style_developer=e.style_developer),e.sketch_developer&&(t.sketch_developer=e.sketch_developer)}),v={colors:{white:Object.assign(Object.assign({},t.colors.white),{color:i()(t.colors.white.color)}),black:Object.assign(Object.assign({},t.colors.black),{color:i()(t.colors.black.color)}),"light-grey":Object.assign(Object.assign({},t.colors.grey),{color:i()(t.colors.grey.color).lighten(.5)}),grey:Object.assign(Object.assign({},t.colors.grey),{color:i()(t.colors.grey.color)}),"dark-grey":Object.assign(Object.assign({},t.colors.grey),{color:i()(t.colors.grey.color).darken(.5)}),brown:Object.assign(Object.assign({},t.colors.brown),{color:i()(t.colors.brown.color)}),"dark-brown":Object.assign(Object.assign({},t.colors.brown),{color:i()(t.colors.brown.color).darken(.5)}),red:Object.assign(Object.assign({},t.colors.red),{color:i()(t.colors.red.color)}),"dark-red":Object.assign(Object.assign({},t.colors.red),{color:i()(t.colors.red.color).darken(.5)}),pink:Object.assign(Object.assign({},t.colors.red),{color:i()(t.colors.red.color).lighten(.3)}),orange:Object.assign(Object.assign({},t.colors.orange),{color:i()(t.colors.orange.color)}),"dark-orange":Object.assign(Object.assign({},t.colors.orange),{color:i()(t.colors.orange.color).darken(.5)}),yellow:Object.assign(Object.assign({},t.colors.yellow),{color:i()(t.colors.yellow.color)}),"dark-yellow":Object.assign(Object.assign({},t.colors.yellow),{color:i()(t.colors.yellow.color).darken(.5)}),"yellow-green":Object.assign(Object.assign({},t.colors["yellow-green"]),{color:i()(t.colors["yellow-green"].color)}),"dark-yellow-green":Object.assign(Object.assign({},t.colors["yellow-green"]),{color:i()(t.colors["yellow-green"].color).darken(.5)}),green:Object.assign(Object.assign({},t.colors.green),{color:i()(t.colors.green.color)}),"dark-green":Object.assign(Object.assign({},t.colors.green),{color:i()(t.colors.green.color).darken(.5)}),aqua:Object.assign(Object.assign({},t.colors.aqua),{color:i()(t.colors.aqua.color)}),"dark-aqua":Object.assign(Object.assign({},t.colors.aqua),{color:i()(t.colors.aqua.color).darken(.5)}),blue:Object.assign(Object.assign({},t.colors.blue),{color:i()(t.colors.blue.color)}),"dark-blue":Object.assign(Object.assign({},t.colors["dark-blue"]),{color:i()(t.colors["dark-blue"].color)}),"navy-blue":Object.assign(Object.assign({},t.colors["dark-blue"]),{color:i()(t.colors["dark-blue"].color).darken(.5)}),purple:Object.assign(Object.assign({},t.colors.purple),{color:i()(t.colors.purple.color)}),"dark-purple":Object.assign(Object.assign({},t.colors.purple),{color:i()(t.colors.purple.color).darken(.5)}),magenta:Object.assign(Object.assign({},t.colors.magenta),{color:i()(t.colors.magenta.color)}),"dark-magenta":Object.assign(Object.assign({},t.colors.magenta),{color:i()(t.colors.magenta.color).darken(.5)}),"hot-pink":Object.assign(Object.assign({},t.colors["hot-pink"]),{color:i()(t.colors["hot-pink"].color)}),"dark-hot-pink":Object.assign(Object.assign({},t.colors["hot-pink"]),{color:i()(t.colors["hot-pink"].color).darken(.5)})},music:t.music,sounds:t.sounds,styles:t.styles,sketch:t.sketch,sketch_developer:t.sketch_developer,style_developer:t.style_developer}}(),B&&(URL.revokeObjectURL(B),B=null);const r=x();let o=r.sketch||"";r.sketch_developer&&(o=B=URL.createObjectURL(new Blob([r.sketch_developer])));const c=document.getElementById("p5_background");if(o){const e=await fetch(o).then(e=>e.text());localStorage.setItem("p5",e),c.src="/p5_background?sha="+a()(e)}else c.src="about:blank";P.innerHTML=function(){const e=x();return e.styles.map(e=>`@import "${e}";`).join("\n")+"\n"+["white","black","grey","brown","red","orange","yellow","yellow-green","green","aqua","blue","dark-blue","purple","magenta","hot-pink"].map(t=>`[data-color="${t}"]{--color:${e.colors[t].color}}`).join("\n")}(),n&&e&&(L.style.opacity="1",L.style.transitionDuration="150ms",await Object(s.b)(150)),document.head.appendChild(P),n&&(await Object(d.e)(),await Object(s.b)(20),n.remove(),Object(m.c)(),e&&(await Object(s.b)(20),L.style.transitionDuration="300ms",L.style.opacity="0")),L.style.pointerEvents="none"}function U(){return v.music.flatMap(e=>e.tracks)}},function(e,t,n){"use strict";var r=n(78),i=n(81),o=[].slice,a=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(e){s[o.call(i[e].labels).sort().join("")]=e}));var c={};function l(e,t){if(!(this instanceof l))return new l(e,t);if(t&&t in a&&(t=null),t&&!(t in i))throw new Error("Unknown model: "+t);var n,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof l)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var d=r.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,u=i[this.model].channels,this.color=d.value.slice(0,u),this.valpha="number"==typeof d.value[u]?d.value[u]:1}else if(e.length){this.model=t||"rgb",u=i[this.model].channels;var h=o.call(e,0,u);this.color=f(h,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var p=Object.keys(e);"alpha"in e&&(p.splice(p.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var m=p.sort().join("");if(!(m in s))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[m];var g=i[this.model].labels,y=[];for(n=0;n<g.length;n++)y.push(e[g[n]]);this.color=f(y)}if(c[this.model])for(u=i[this.model].channels,n=0;n<u;n++){var b=c[this.model][n];b&&(this.color[n]=b(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(c[e]||(c[e]=[]))[t]=n})),e=e[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[e]()).color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e){return Array.isArray(e)?e:[e]}function f(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in r.to?this:this.rgb(),n=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return r.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=i[this.model].channels,n=i[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new l(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,d(255)),green:u("rgb",1,d(255)),blue:u("rgb",2,d(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,d(100)),lightness:u("hsl",2,d(100)),saturationv:u("hsv",1,d(100)),value:u("hsv",2,d(100)),chroma:u("hcg",1,d(100)),gray:u("hcg",2,d(100)),white:u("hwb",1,d(100)),wblack:u("hwb",2,d(100)),cyan:u("cmyk",0,d(100)),magenta:u("cmyk",1,d(100)),yellow:u("cmyk",2,d(100)),black:u("cmyk",3,d(100)),x:u("xyz",0,d(100)),y:u("xyz",1,d(100)),z:u("xyz",2,d(100)),l:u("lab",0,d(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new l(e):i[this.model].keyword(this.color)},hex:function(e){return arguments.length?new l(e):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return l.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),i=void 0===t?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,c=1-s;return l.rgb(s*n.red()+c*r.red(),s*n.green()+c*r.green(),s*n.blue()+c*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(e){if(-1===a.indexOf(e)){var t=i[e].channels;l.prototype[e]=function(){if(this.model===e)return new l(this);if(arguments.length)return new l(arguments,e);var n="number"==typeof arguments[t]?t:this.valpha;return new l(h(i[this.model][e].raw(this.color)).concat(n),e)},l[e]=function(n){return"number"==typeof n&&(n=f(o.call(arguments),t)),new l(n,e)}}})),e.exports=l},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(1),i=n(13),o=n(12);function a(e){return Math.round(50*e+50)+"%"}function s(){const e=document.querySelector(".elem");if(e){return parseFloat(getComputedStyle(e).marginLeft)}return 8}function c(){var e;r.B.value=r.A.text,r.B.setAttribute("style",Object(i.a)({text:"",color:""+[r.A.color.base,r.A.color.saturation,r.A.color.lightness].join("_")})),null===(e=document.querySelector(".color-btn.selected"))||void 0===e||e.classList.remove("selected"),document.querySelector(`.color-btn[data-color="${r.A.color.base}"]`).classList.add("selected"),document.querySelector('[data-suggestion-slider="saturation"]').value=r.A.color.saturation.toString(),document.querySelector('[data-suggestion-slider-value="saturation"]').innerHTML=a(r.A.color.saturation),document.querySelector('[data-suggestion-slider="lightness"]').value=r.A.color.lightness.toString(),document.querySelector('[data-suggestion-slider-value="lightness"]').innerHTML=a(r.A.color.lightness),document.querySelector(".suggest-hint").style.color=r.B.style.color}function l(e){const t=e.display,n=document.createElement("div");return n.appendChild(document.createTextNode(t.text)),n.className="elem "+Object(i.b)(t),n}function u(e){return e.split("-").map(o.capitalize).join(" ")}},function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return _}));var r=n(18),i=n(30),o=n(6),a=n(2);let s=new Map,c=new Map,l=new Set,u=null,d=null,h=null;async function f(){s.forEach(e=>{e.stop(),e.unload()}),s=new Map,c=new Map,l=new Set,u=null,d=null,h=null,p=!0,await _(),await g(b())}let p=!1,m=!0;function g(e){var t,n,i;if(u=e,!u)return;if(d=s.get(u.url),!d)return;let o,c=!1;d.on("playerror",()=>{c=!0,clearTimeout(o),d.once("unlock",()=>{g(u)})}),m?(d.fade(0,.5*Object(a.j)("volume-music",.35)*(null!==(t=u.volume)&&void 0!==t?t:1),5e3),m=!1):p?(d.fade(0,.5*Object(a.j)("volume-music",.35)*(null!==(n=u.volume)&&void 0!==n?n:1),700),p=!1):d.volume(.5*Object(a.j)("volume-music",.35)*(null!==(i=u.volume)&&void 0!==i?i:1)),h=d.play(),setTimeout(()=>{let t;if(t=d.duration(h),d.loop(!0,h),!c)if("no-loop"===u.loop){d.loop(!1,h);const n=b();o=setTimeout(()=>{g(n||e)},1e3*t+(n?0:Object(r.randomInt)(5e3,1e4)))}else{const e=b();if(e){const n=0===Object(r.randomInt)(0,4)?Object(r.randomInt)(4,12):0;if(0===n)d.loop(!1,h),d.once("end",()=>{o=setTimeout(()=>{g(e)},1e3*t+(e?0:Object(r.randomInt)(5e3,1e4)))});else{let t=0;d.loop(!0,h);const r=()=>{t++,t>n?(g(e),d.off("end",r)):t===n&&setTimeout(()=>{d.loop(!1,h)},100)};d.on("end",r)}}else d.loop(!0,h)}},100)}function y(){var e;d&&h&&u&&d.volume(.5*Object(a.j)("volume-music",.35)*(null!==(e=u.volume)&&void 0!==e?e:1),h)}function b(){return Object(r.randomOf)([...l].filter(e=>e!==u))}function v(e){if("running"!==i.Howler.ctx.state)return;const t=c.get(e);if(!t||0===t.length)return;const n=Object(r.randomOf)(t);if(!n)return;const o=s.get(n.url);if(o){const e=Object(a.j)("volume-sounds",1)*n.volume;o.volume(e);o.play()}}async function _(){const e=Object(o.g)();Object.keys(e.sounds).forEach(t=>{c.set(t,e.sounds[t].map(e=>Object.assign({volume:1,pitch:0},e))),e.sounds[t].forEach(({url:e,volume:t,pitch:n})=>{s.has(e)||s.set(e,new i.Howl({src:e,preload:!0}))})});const t=Object(o.f)();await Promise.all(t.map(e=>{if(l.add(e),!s.has(e.url))return new Promise(t=>{const n=new i.Howl({src:e.url,preload:!0});n.on("load",t),s.set(e.url,n)})}))}},function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"i",(function(){return h})),n.d(t,"f",(function(){return f}));var r=n(14),i=n(2);const o=["https://elemental-api.stary.pc.pl"],a=[],s=["internal:null","internal:all-colors","internal:stress-test-1k","internal:stress-test-5k","internal:stress-test-10k"],c=["https://elemental-reborn.tk","https://nv7haven.tk","https://nv7haven.tk/single"],l=[...o,...c],u=[...a,...o,...s,...c];async function d(){const e=await Object(i.l)(),t=l.filter(t=>!e.some(e=>e.baseUrl===t)&&t.startsWith("https://"));await Promise.all(t.map(e=>Object(r.a)(e,"server",!0)))}async function h(e){Object(i.y)("server",e)}async function f(){const e=Object(i.k)("server",l[0]);return(await async function(){return await Object(i.l)()}()).find(t=>t.baseUrl===e)||{baseUrl:e,name:"Unknown Server"}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var r=n(29),i=n(33),o=n(23),a=n(5),s=n(2);let c,l=null,u=null;async function d(){const e=Object(a.c)();if(e[o.b])return;const t=await Object(s.p)(e)||{clicks:0,combinationsFailure:0,combinationsSuccess:0,rediscoveries:0,elementsDropped:0,elementsPickedUp:0,playTime:0,sessionCount:0,infoOpened:0,startTime:Date.now(),suggestionsSent:0,suggestionsVoted:0,suggestionsDownvoted:0,suggestionsCreated:0,hintsUsed:0};if(t.sessionCount++,!l){let n=parseInt(localStorage.getItem("time"));isNaN(n)||(t.playTime+=n),Object(s.A)(e,t),setInterval(()=>{localStorage.setItem("time",Math.round((Date.now()-c)/1e3).toString())},5e3)}c=Date.now(),localStorage.setItem("time","0"),u=e,l=t}async function h(){u&&(l.playTime+=Math.round(Date.now()-c)/1e3,Object(s.A)(u,l))}async function f(){const e=await Object(s.n)(u);return[["Savefile Started",new Date(l.startTime).toLocaleDateString()+" "+new Date(l.startTime).toLocaleTimeString()],["Time Played",Object(i.humanize)(Math.floor(l.playTime+(Date.now()-c)/1e3))],["Sessions",l.sessionCount],["Elements Discovered",e.length],["Newest Element",e[e.length-1]],["Elements Rediscovered",l.rediscoveries],["Combinations Tried",l.combinationsFailure+l.combinationsSuccess],["Combinations Succeeded",l.combinationsSuccess],["Combinations Failed",l.combinationsFailure],["Combination Success Rate",(l.combinationsSuccess/(l.combinationsFailure+l.combinationsSuccess||1)*100).toFixed(1)+"%"],...Object(a.c)("suggestion")?[["Suggestions Sent",l.suggestionsSent],["Suggestions Voted",l.suggestionsVoted],["Suggestions Down Voted",l.suggestionsDownvoted],["Combinations Created",l.suggestionsCreated]]:[],...Object(a.c)("hint")?[["Hints Used",l.hintsUsed]]:[],["Clicks",l.clicks],["Elements Inspected",l.infoOpened],["Elements Picked Up",l.elementsPickedUp],["Elements Dropped",l.elementsDropped]]}const p=Object(r.debounce)(()=>{Object(s.A)(u,l)},1e4);function m(e,t=1){l&&(l[e]+=t,p())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)},t.format=function(e,...t){return e.replace(/\$[0-9]+/g,e=>String(t[parseInt(e.substring(1))-1]))},t.isValidEmail=function(e){if("string"!=typeof e)throw new TypeError("Email must be typeof string.");return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},t.plural=function(e,t){if("number"!=typeof e)throw new TypeError("Passed number must be typeof number.");if("string"!=typeof t)throw new TypeError("Passed word must be typeof string.");return`${t}${1===e?"":"s"}`}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(6),i=n(5);const o={},a=document.createElement("style");function s(e,t){const n=`${e.color}:::${e.image}`;if(!t&&n in o)return o[n];const r=o[n]||"p"+Object.keys(o).length;o[n]=r;const i=`.${r}{${l(e)};}`;return a.sheet.insertRule(i,a.sheet.cssRules.length),r}function c(){const e=a.sheet.cssRules.length;for(let t=0;t<e;t++)a.sheet.deleteRule(0);Object.keys(o).forEach(e=>{const[t,n]=e.split(":::");s({text:"Element",color:t,image:n},!0)})}function l(e){const t=Object(r.g)(),n=t.colors[e.color];let o;const a=Object(i.c)("customPalette");return o=a?a.lookupCustomPaletteColor(t.colors,e.color):n.color,`background-color:rgb(${o.red()},${o.green()},${o.blue()});color:`+(o.isLight()?"rgba(0,0,0,0.8)":"rgba(255,255,255,0.8)")}document.head.appendChild(a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(4),i=n(6),o=n(5),a=n(20),s=n(34),c=n(2),l=n(12),u=n(17),d=n(15);async function h(e,t){try{return{cors:!0,response:await fetch(e,t)}}catch(n){return{cors:!1,response:await fetch("https://proxy.elemental4.net/"+e,t)}}}async function f(e,t,n=!1){if(!e)return;let f,p;n||(f=Object(d.a)(),f.status("Adding DLC",0));try{p=await async function(e,t,n=!1){let d,f;try{if(d=JSON.parse(e),e=location.origin+"/","server"===d.type)throw new Error("Cannot use inline JSON for a Server")}catch(t){e.endsWith(".json")||(e+=(e.endsWith("/")?"":"/")+"elemental.json"),e.match(/^[a-zA-Z-]+:\/\//)||n||(e=e.startsWith("localhost")?"http://"+e:"https://"+e);try{const t=await h(e).then(async e=>({cors:e.cors,response:await e.response.json()}));d=t.response,f=t.cors}catch(e){return n||await Object(r.a)({title:"Error Adding DLC",text:"Could not find an elemental.json file at this URL."}),null}}if("object"!=typeof d||null===d||"string"!=typeof d.type)return n||await Object(r.a)({title:"Error Adding DLC",text:"Found a malformed elemental.json file"}),null;if((await Object(o.d)()).includes(d.type)){if(!("name"in d))return n||await Object(r.a)({title:"Error Adding DLC",text:"The specified server is missing metadata."}),null;if("server"!==t&&(n||!await Object(r.b)({title:"Not a "+Object(l.capitalize)(t),text:"The url you provided points to an Elemental 4 Server, would you still like to add it?",trueButton:"Continue"})))return null;if(!f)return n||await Object(r.a)({title:"Error Adding Server",text:"This server does not have CORS Headers. Elemental 4 is not allowed to communicate with it."}),null;d.icon&&(d.icon=Object(a.resolve)(e,d.icon)),await Object(c.q)(e.replace(/elemental\.json$/,""),d),n||await Object(o.b)(e.replace(/elemental\.json$/,""),d)}else{if("elemental4:theme"!==d.type)return"pack"===d.type?(n||await Object(r.a)({title:"Error Adding DLC",text:"Singleplayer mode has not been added yet."}),null):(n||await Object(r.a)({title:"Error Adding DLC",text:"Don't know how to add server type \""+d.type+'"'}),null);{if(!("format_version"in d&&"id"in d&&"name"in d&&"description"in d))return n||await Object(r.a)({title:"Error Adding DLC",text:"The specified theme is missing metadata."}),null;if("theme"!==t&&!await Object(r.b)({title:"Not a "+Object(l.capitalize)(t),text:"The url you provided points to an Elemental 4 Theme, would you still like to add it?",trueButton:"Continue"}))return null;if(d.format_version<u.a&&!await Object(r.b)({title:"Incorrect Theme Version",text:"This theme was made for an older version of Elemental 4, would you still like to use it.",trueButton:"Continue"}))return null;if(d.format_version>u.a&&!await Object(r.b)({title:"Incorrect Theme Version",text:"This theme was made for an older version of Elemental 4, would you still like to use it.",trueButton:"Continue"}))return null;const o=await caches.open("THEME."+d.id);if(d.styles){const t=await h(Object(a.resolve)(e,d.styles)).then(e=>e.response.text()),n=`cache_data/${d.id}/style`;await o.put(n,new Response(new Blob([t],{type:"text/css"}),{status:200})),d.styles=n}if(d.sketch){const t=await h(Object(a.resolve)(e,d.sketch)).then(e=>e.response.text()),n=`cache_data/${d.id}/sketch`;await o.put(n,new Response(new Blob([t],{type:"text/javascript"}),{status:200})),d.sketch=n}if(d.icon){const t=(await h(Object(a.resolve)(e,d.icon))).response,n=`cache_data/${d.id}/icon`;await o.put(n,t.clone()),d.icon=n}if(d.sounds){const t=[];d.sounds=Object.fromEntries(await Promise.all(Object.keys(d.sounds).map(async n=>[n,await Promise.all(d.sounds[n].map(async n=>{const r=`cache_data/${d.id}/audio`/* /${encodeURIComponent(n.url)} */;if(!t.includes(n.url)){const i=(await h(Object(a.resolve)(e,n.url))).response;await o.put(r,i.clone()),t.push(n.url)}return Object.assign(Object.assign({},n),{url:r})}))])))}if(d.music){const t=[];d.music=await Promise.all(d.music.map(async n=>{const r=`cache_data/${d.id}/audio` /* /${encodeURIComponent(n.url)} */;if(!t.includes(n.url)){const i=(await h(Object(a.resolve)(e,n.url))).response;await o.put(r,i.clone()),t.push(n.url)}return Object.assign(Object.assign({},n),{url:r})}))}d.isBuiltIn=n,n&&(d.version=s.version),await Object(i.j)(d,!0)}}}(e,t,n)}catch(e){n||await Object(r.a)({title:"Error Adding DLC",text:e.toString()})}return f&&f.dispose(),p}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(16),i=n(4);function o(e){return new Promise(t=>{const{root:n,content:o}=Object(i.d)(),a=document.createElement("iframe");a.setAttribute("sandbox",""),a.src=e||"about:blank";const s=new r.Emitter;s.postMessage=e=>{},s.close=()=>{Object(i.f)(n)},Object(i.g)(n)})}function a(){let e,t,n,r;const i=document.createElement("div");i.classList.add("quick-loader"),document.body.appendChild(i);const a={popup:o,show:()=>{void 0!==e&&clearTimeout(e),e=void 0,t=document.createElement("main"),t.innerHTML=n+(void 0!==r?'<div class="progress" style="width:'+100*r+'%"></div>':""),i.appendChild(t)},status:(i,o)=>{t?t.innerHTML=i+(void 0!==o?'<div class="progress" style="width:'+100*o+'%"></div>':""):(e||(e=setTimeout(()=>{a.show()},200)),n=i,r=o)},dispose:()=>{void 0!==e&&clearTimeout(e),i.remove()}};return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Emitter=class{constructor(){this.listenerMap=new Map}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}on(e,t){const n=this.listenerMap.get(e);n?n.add(t):this.listenerMap.set(e,new Set([t]))}off(e,t){const n=this.listenerMap.get(e);n&&(n.delete(t),0===n.size&&this.listenerMap.delete(e))}removeAllListener(e){this.listenerMap.delete(e)}emit(e,...t){const n=this.listenerMap.get(e);n&&n.forEach(e=>e(...t))}},t.SimpleEmitter=class{constructor(){this.listeners=new Set}addListener(e){return this.on(e)}removeListener(e){return this.off(e)}on(e){this.listeners.add(e)}off(e){this.listeners.delete(e)}removeAllListeners(){this.listeners.clear()}emit(...e){this.listeners.forEach(t=>t(...e))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=1},function(e,t,n){"use strict";function r(e){if(!Array.isArray(e))throw new TypeError("Passed array must be an array.");return e[Math.floor(Math.random()*e.length)]}Object.defineProperty(t,"__esModule",{value:!0});const i=Symbol("MissingItem");t.chance=function(e){if("number"!=typeof e)throw new TypeError("Provided percent must be a number.");return 100*Math.random()<=e},t.randomInt=function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new TypeError("Provided range must be numbers.");if(e>t)throw new TypeError("Minimum number must be less than or equal to the maximum number.");return Math.floor(Math.random()*(t-e+1))+e},t.randomList=function(e,t=1,n=[]){if(!Array.isArray(e))throw new TypeError("Passed list must be an array.");if("number"!=typeof t)throw new TypeError("Item count must be a number.");if(!Array.isArray(n))throw new TypeError("Required values must be an array.");const o=n.map(()=>-1),a=Array(t).fill(i);return n.forEach((e,n)=>{let r;do{r=Math.floor(Math.random()*t)}while(o.includes(r));o[n]=r}),o.forEach((e,t)=>{a[e]=n[t]}),a.map(t=>t===i?r(e):t)},t.randomOf=r},function(e,t,n){"use strict";let r;function i(e){r=e}function o(){return null==r?void 0:r.active}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";var r=n(111),i=n(112);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=v(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),d=["%","/","?",";","#"].concat(u),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(113);function v(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(s);if(v=v.trim(),!n&&1===e.split("#").length){var _=c.exec(v);if(_)return this.path=v,this.href=v,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(v);if(w){var k=(w=w[0]).toLowerCase();this.protocol=k,v=v.substr(w.length)}if(n||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===v.substr(0,2);!x||w&&g[w]||(v=v.substr(2),this.slashes=!0)}if(!g[w]&&(x||w&&!y[w])){for(var S,E,O=-1,A=0;A<h.length;A++){-1!==(C=v.indexOf(h[A]))&&(-1===O||C<O)&&(O=C)}-1!==(E=-1===O?v.lastIndexOf("@"):v.lastIndexOf("@",O))&&(S=v.slice(0,E),v=v.slice(E+1),this.auth=decodeURIComponent(S)),O=-1;for(A=0;A<d.length;A++){var C;-1!==(C=v.indexOf(d[A]))&&(-1===O||C<O)&&(O=C)}-1===O&&(O=v.length),this.host=v.slice(0,O),v=v.slice(O),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var j=this.hostname.split(/\./),I=(A=0,j.length);A<I;A++){var L=j[A];if(L&&!L.match(f)){for(var P="",M=0,R=L.length;M<R;M++)L.charCodeAt(M)>127?P+="x":P+=L[M];if(!P.match(f)){var B=j.slice(0,A),F=j.slice(A+1),U=L.match(p);U&&(B.push(U[1]),F.unshift(U[2])),F.length&&(v="/"+F.join(".")+v),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var D=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+D,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[k])for(A=0,I=u.length;A<I;A++){var z=u[A];if(-1!==v.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),v=v.split(z).join(q)}}var H=v.indexOf("#");-1!==H&&(this.hash=v.substr(H),v=v.slice(0,H));var $=v.indexOf("?");if(-1!==$?(this.search=v.substr($),this.query=v.substr($+1),t&&(this.query=b.parse(this.query)),v=v.slice(0,$)):t&&(this.search="",this.query={}),v&&(this.pathname=v),y[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){D=this.pathname||"";var W=this.search||"";this.path=D+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(n[u]=e[u])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var f=d[h];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",b=n.search||"";n.path=m+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||v||n.host&&e.pathname,k=w,x=n.pathname&&n.pathname.split("/")||[],S=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===x[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=x.shift(),(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=x.slice(-1)[0],O=(n.host||e.host||x.length>1)&&("."===E||".."===E)||""===E,A=0,C=x.length;C>=0;C--)"."===(E=x[C])?x.splice(C,1):".."===E?(x.splice(C,1),A++):A&&(x.splice(C,1),A--);if(!w&&!k)for(;A--;A)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),O&&"/"!==x.join("/").substr(-1)&&x.push("");var T,j=""===x[0]||x[0]&&"/"===x[0].charAt(0);S&&(n.hostname=n.host=j?"":x.length?x.shift():"",(T=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=T.shift(),n.host=n.hostname=T.shift()));return(w=w||n.host&&x.length)&&!j&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(){let e=!1,t=[];const n=function(n){const r=async function r(...i){if(e)return new Promise((e,n)=>t.push([r,i,e,n]));e=!0;const o=await n(...i);if(e=!1,t.length>0){const[e,n,r,i]=t.shift();e(...n).then(r).catch(i)}return o};return r.callLater=(...e)=>new Promise((r,i)=>t.push([n,e,r,i])),r};return n.callLater=(e,...n)=>new Promise((r,i)=>t.push([e,n,r,i])),n}function i(e){return r()(e)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r,i=n(3);const o=Symbol("IsNullAPI");class a extends i.b{constructor(){super(...arguments),this[r]=!0}async open(){return!0}async close(){}async getStats(){return{}}async getElement(e){return null}async getCombo(e){return[]}async getStartingInventory(){return[]}}r=o,a.type="internal:null"},function(e,t,n){"use strict";n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return S}));var r=n(6),i=n(0),o=n(29),a=n(39),s=n.n(a),c=n(73),l=n(27),u=n(5);let d;try{if(d=JSON.parse(localStorage.getItem("developer_theme")),!d)throw new Error}catch(e){d=Object.assign({},l)}async function h(){localStorage.setItem("developer_theme",JSON.stringify(d)),await Object(r.j)(Object.assign(Object.assign({},d.json),{isBuiltIn:!1,id:"internal:developer_mode",name:d.json&&d.json.name&&"[Developer] "+d.json.name||"[Developer] Theme",style_developer:d.style,sketch_developer:""!==d.sketch.trim()&&d.sketch.replace(/\s/g,"")!==l.sketch.replace(/\s/g,"")?d.sketch:""}),!1),await Object(r.d)("internal:developer_mode"),await Object(r.n)(!1)}const f={default:l,customizing_colors:n(118),p5_basic:n(119)};const p=Object(o.debounce)(e=>{d=e,h()},100);let m,g;async function y(){m&&m.close(),await h(),m=window.open("/theme_editor","","width=640,height=480,menubar=no,resizable=yes,scrollbars=no,titlebar=yes,toolbar=no"),m.addEventListener("message",({data:e})=>{"ready"===e.type&&(m.postMessage({type:"set-theme",theme:d},"*"),m.postMessage({type:"presets",list:Object(r.h)().filter(e=>"internal:developer_mode"!==e.id).map(e=>({id:"theme:"+e.id,name:e.name,category:e.isBuiltIn?"builtin":"custom"})).concat(...Object.keys(f).map(e=>({id:"template:"+e,name:f[e].name,category:"template"})))},"*")),"update_editor"===e.type&&p(e.theme),"edit"===e.type&&p(e.theme),"action.preset"===e.type&&(!async function(e){if(e.startsWith("template:"))d={json:f[e.slice(9)].json,style:f[e.slice(9)].style,sketch:f[e.slice(9)].sketch};else if(e.startsWith("theme:")){const t=Object(r.h)().find(t=>t.id===e.slice(6));t&&(d={json:Object.assign(Object.assign({},t),{styles:void 0,sketch:void 0,isBuiltIn:void 0}),style:t.styles&&"string"==typeof t.styles?await fetch(t.styles).then(e=>e.text()):"",sketch:t.sketch?await fetch(t.sketch).then(e=>e.text()):l.sketch})}m&&m.postMessage({type:"set-theme",theme:d},"*"),h()}(e.preset),m.postMessage({type:"set-theme",theme:d},"*")),"action.downloadZip"===e.type&&async function(){var e=new s.a;const t=Object.assign({},d.json);""!==d.style.trim()&&(e.file("style.css",d.style),t.styles="./style.css"),""!==d.sketch.trim()&&d.sketch.replace(/\s/g,"")!==l.sketch.replace(/\s/g,"")&&(e.file("sketch.js",d.sketch),t.sketch="./sketch.js"),e.file("elemental.json",JSON.stringify(t,null,2)),e.generateAsync({type:"blob"}).then((function(e){Object(c.saveAs)(e,"theme.zip")}))}(),"action.test_colors"===e.type&&Object(u.b)("internal:all-colors",null,null)}),g||(g=setInterval(()=>{m.postMessage({type:"ping"},"*")},500))}window.addEventListener("beforeunload",()=>{m&&m.close()});var b=n(4),v=n(14);let _=!1;function w(e){_=e}function k(e){const t=document.createElement("div");t.setAttribute("data-theme-item",e.id),t.classList.add("theme-item");const n=document.createElement("div");n.classList.add("theme-move-buttons"),e.icon&&n.setAttribute("style",`background-image:url(${e.icon});background-size:cover;`),t.appendChild(n);const o=document.createElement("div");o.classList.add("theme-info");const a=document.createElement("div"),s=document.createElement("div");if(a.classList.add("theme-title"),s.classList.add("theme-description"),a.innerHTML=Object(i.e)(e.name),s.innerHTML=Object(i.e)(e.description),o.appendChild(a),o.appendChild(s),"elem4_default"!==e.id){n.innerHTML=`\n      <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="60" height="60" fill="black" fill-opacity="0.4"/>\n        <path class="svg-btn btn-when-activated btn-down" d="M32 32H55L43.5 49L32 32Z" fill="white"/>\n        <path class="svg-btn btn-when-activated btn-up" d="M55 28L32 28L43.5 11L55 28Z" fill="white"/>\n        <path class="svg-btn btn-when-activated btn-deactivate" d="M28 11V49L5 30L28 11Z" fill="white"/>\n        <path class="svg-btn btn-when-deactivated btn-activate" d="M30 49L30 11L53 30L30 49Z" fill="white"/>\n        ${e.isBuiltIn?"":'<path class="svg-btn btn-when-deactivated btn-trash" d="M22 32H18.5L17.5 31H12.5L11.5 32H8V34H22V32ZM9 47C9 47.5304 9.21071 48.0391 9.58579 48.4142C9.96086 48.7893 10.4696 49 11 49H19C19.5304 49 20.0391 48.7893 20.4142 48.4142C20.7893 48.0391 21 47.5304 21 47V35H9V47Z" fill="white"/>'}\n      </svg>\n    `;const i=n.querySelector(".btn-activate"),o=n.querySelector(".btn-deactivate"),a=n.querySelector(".btn-up"),s=n.querySelector(".btn-down"),c=n.querySelector(".btn-trash");i.addEventListener("click",()=>{document.querySelector(".active-themes .theme-list").prepend(t),Object(r.d)(e.id),_=!0}),o&&o.addEventListener("click",()=>{document.querySelector(".available-themes .theme-list").prepend(t),Object(r.c)(e.id),_=!0}),a.addEventListener("click",()=>{Object(r.b)(e.id),t.parentElement.insertBefore(t,t.previousElementSibling),_=!0}),s.addEventListener("click",()=>{Object(r.i)(e.id),t.parentElement.insertBefore(t,t.nextElementSibling.nextElementSibling),_=!0}),c&&c.addEventListener("click",()=>{t.remove(),Object(r.c)(e.id),Object(r.m)(e.id),_=!0})}return t.appendChild(o),t}function x(e){if(e&&"elemental4:theme"===e.type){const t=document.querySelector('[data-theme-item="'+e.id+'"]');if(t){const n=k(e);t.parentElement.insertBefore(n,t),t.remove()}else{document.querySelector(".active-themes .theme-list").prepend(k(e))}}}function S(){const e=Object(r.h)(),t=Object(r.e)().concat("elem4_default"),n=document.querySelector(".active-themes .theme-list"),i=document.querySelector(".available-themes .theme-list");t.forEach(t=>{const r=e.find(e=>e.id===t);r&&n.appendChild(k(r))}),e.forEach(e=>{t.includes(e.id)||i.appendChild(k(e))}),document.querySelector("#theme-browse").addEventListener("click",()=>{window.open("workshop#themes","","width=800,height=600",!0)}),document.querySelector("#theme-devmode").addEventListener("click",()=>{y()}),document.querySelector("#theme-apply").addEventListener("click",()=>{Object(r.n)(),w(!1)}),document.querySelector("#theme-add").addEventListener("click",async()=>{const e=await Object(b.e)({title:"Add Theme",text:"Paste the Theme URL or JSON content here.",confirmButton:"Add Theme",cancelButton:"Cancel"});e&&Object(v.a)(e,"theme")})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(19);class i{}class o extends i{constructor(e){super(),this.storeName=e}get(e){return new Promise(t=>{const n=Math.random().toString().substr(2);Object(r.a)().postMessage({type:"elem4-worker:get",return_id:n,store:this.storeName,key:e}),navigator.serviceWorker.addEventListener("message",(function e(r){r.data.return_id===n&&(navigator.serviceWorker.removeEventListener("message",e),t(r.data.return_value))}))})}set(e,t){return new Promise(n=>{const i=Math.random().toString().substr(2);Object(r.a)().postMessage({type:"elem4-worker:set",return_id:i,store:this.storeName,key:e,item:t}),navigator.serviceWorker.addEventListener("message",(function e(t){t.data.return_id===i&&(navigator.serviceWorker.removeEventListener("message",e),n(t.data.return_value))}))})}del(e){return new Promise(t=>{const n=Math.random().toString().substr(2);Object(r.a)().postMessage({type:"elem4-worker:del",return_id:n,store:this.storeName,key:e}),navigator.serviceWorker.addEventListener("message",(function e(r){r.data.return_id===n&&(navigator.serviceWorker.removeEventListener("message",e),t(r.data.return_value))}))})}keys(){return new Promise(e=>{const t=Math.random().toString().substr(2);Object(r.a)().postMessage({type:"elem4-worker:keys",return_id:t,store:this.storeName}),navigator.serviceWorker.addEventListener("message",(function n(r){r.data.return_id===t&&(navigator.serviceWorker.removeEventListener("message",n),e(r.data.return_value))}))})}length(){return console.log("Length will fail"),new Promise(e=>{const t=Math.random().toString().substr(2);Object(r.a)().postMessage({type:"elem4-worker:length",return_id:t,store:this.storeName}),navigator.serviceWorker.addEventListener("message",(function n(r){r.data.return_id===t&&(navigator.serviceWorker.removeEventListener("message",n),e(r.data.return_value))}))})}clear(){return new Promise(e=>{const t=Math.random().toString().substr(2);Object(r.a)().postMessage({type:"elem4-worker:clear",return_id:t,store:this.storeName}),navigator.serviceWorker.addEventListener("message",(function n(r){r.data.return_id===t&&(navigator.serviceWorker.removeEventListener("message",n),e(r.data.return_value))}))})}bulkTransfer(e){return e()}static removeStore(e){throw new Error("Not Implemented")}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return v}));var r=n(5),i=n(6);async function o(e){return e.stats.simplestRecipe&&e.stats.simplestRecipe.length>0?{elem:e,parent1:await o(await Object(r.c)().getElement(e.stats.simplestRecipe[0])),parent2:e.stats.simplestRecipe[1]===e.stats.simplestRecipe[0]?null:await o(await Object(r.c)().getElement(e.stats.simplestRecipe[1]))}:{elem:e,parent1:null,parent2:null}}let a,s,c=null;let l=175,u=350,d=1,h=[];function f(e,t,n,r=!1){r?c.fill(255):c.fill(0),c.textSize(10),c.text(e,t+4,n+4,31,31)}function p(e,t,n,r,i,o){c.fill(c.color(e)),c.rect(n+i,r+o,35,35,4),"rgb(0, 0, 0)"===e?f(t,n+i,r+o+17.5-8,!0):f(t,n+i,r+o+17.5-8),c.strokeWeight(2),c.line(n+17.5,r,n+17.5,r-35/8),c.line(n+17.5,r-35/8,n+i+17.5,r-35/8),c.line(n+i+17.5,r-35/8,n+i+17.5,r+o+35),c.strokeWeight(0)}function m(e,t){const n=Object(i.g)().colors[s.elem.display.categoryName].color.toString();c.fill(n),c.rect(e,t,35,35,4),"rgb(0, 0, 0)"===n?f(s.elem.display.text,e,t+7.5,!0):f(s.elem.display.text,e,t+7.5),function e(t,n,r){const o=null!==t.parent1,a=null!==t.parent2,s=!(!o||a),l=!!(o&&0===t.parent1.elem.stats.treeComplexity||a&&0===t.parent2.elem.stats.treeComplexity),u=!(!h.includes(t.elem.id)||0===t.elem.stats.treeComplexity),d=o&&a?Math.max(t.parent1.elem.stats.treeComplexity,t.parent2.elem.stats.treeComplexity):.8,f=!!(o&&h.includes(t.parent1.elem.id)||a&&h.includes(t.parent2.elem.id));let m=Math.max(Math.min(d/1.7,3),.8);return o&&null!==t.parent1.parent2&&(m=.8*7),l&&(m=.8),f&&(m=.8),u?(c.strokeWeight(2),c.line(n+17.5,r,n+17.5,r-5),c.line(n+17.5,r-10,n+17.5,r-15),c.line(n+17.5,r-20,n+17.5,r-25),void c.strokeWeight(0)):s?(c.strokeWeight(2),c.line(n+17.5,r,n+17.5,r-8.75),c.line(n,r-8.75,n+35,r-8.75),c.strokeWeight(0),void(null!==t.parent1.parent2||0===t.parent1.elem.stats.treeComplexity?(p(Object(i.g)().colors[t.parent1.elem.display.categoryName].color.toString(),t.parent1.elem.display.text,n,r,0,-53),e(t.parent1,n,r-35-17.5)):e(t.parent1,n,r-8.75))):(o&&(p(Object(i.g)().colors[t.parent1.elem.display.categoryName].color.toString(),t.parent1.elem.display.text,n,r,-30*m,-45),e(t.parent1,n-30*m,r-45)),a&&(p(Object(i.g)().colors[t.parent2.elem.display.categoryName].color.toString(),t.parent2.elem.display.text,n,r,30*m,-45),e(t.parent2,n+30*m,r-45)),void h.push(t.elem.id))}(s,e,t)}function g(){c.createCanvas(350,400),l=175,u=350,c.strokeWeight(0),c.textAlign("center"),d=1,m(175,350)}function y(){h.length=0,c.scale(d),c.mouseIsPressed&&(c.background(200),m(l,u))}async function b(e){v(),a=document.getElementById("element-info-tree"),s=e,window.p5&&(c=new window.p5(e=>{c=e,c.setup=g,c.draw=y,c.mouseWheel=e=>{d-=e.deltaY/1e3,c.background(200),m(l,u)},c.mouseDragged=()=>{l+=(c.mouseX-c.pmouseX)/d,u+=(c.mouseY-c.pmouseY)/d}},a))}async function v(){c&&c.remove(),s=null}},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return i})),n.d(t,"json",(function(){return o})),n.d(t,"style",(function(){return a})),n.d(t,"sketch",(function(){return s}));var r=n(17);const i="Developer Default",o={type:"elemental4:theme",format_version:r.a,id:"example",version:1,name:"Default Example",description:"An example theme to show the basics.",author:"Dave Caruso",icon:"developer.png"},a=":root {\n  --text-main: black;\n  --background-main: #FFFFFF;\n  --background-element-game: #F1F1F1;\n  --text-warning: red;\n  --primary: #F8571C;\n  --link-click: red;\n\n  --background-hover: rgba(127,127,127,0.15);\n  --background-active: rgba(127,127,127,0.4);\n  --background-selected: rgba(127,127,127,0.3);\n  --text-hover: rgba(127,127,127,0.15);\n  --text-active: rgba(127,127,127,0.4);\n  --text-selected: rgba(127,127,127,0.3);\n\n  --text-top-bar: var(--background-main);\n  --background-top-bar: var(--text-main);\n  --background-button: var(--primary);\n  --background-button-discord: #7289DA;\n  --background-button-source: #7eda72;\n\n  --text-info: var(--text-main);\n  --background-info:var(--background-main);\n\n  --text-dialog: var(--text-main);\n  --background-dialog: var(--background-main);\n  --text-suggest: var(--text-dialog);\n  --background-suggest: var(--background-dialog);\n  --background-suggest-title: var(--background-top-bar);\n  --text-suggest-title: var(--text-top-bar);\n\n  --border-info: 1px solid #000000;\n\n  --popup-background: rgba(0, 0, 0, .25);\n}\n",s="// p5.js code for custom backgrounds, see https://p5js.org/ for more info\n// there is one small modification, which is that you do not need to call createCanvas\n// leave this tab blank or untouched to disable.\n\nfunction setup() {\n  \n}\n\nfunction draw() {\n  background(0, 0, 0, 0);\n}\n"},function(e,t,n){var r,i=n(96),o=n(59),a=n(97),s=n(98),c=n(99);"undefined"!=typeof ArrayBuffer&&(r=n(100));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;t.protocol=3;var h=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=i(h),p={type:"error",data:"parser error"},m=n(101);function g(e,t,n){for(var r=new Array(e.length),i=s(e.length,n),o=function(e,n,i){t(n,(function(t,n){r[e]=n,i(t,r)}))},a=0;a<e.length;a++)o(a,e[a],i)}t.encodePacket=function(e,n,r,i){"function"==typeof n&&(i=n,n=!1),"function"==typeof r&&(i=r,r=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=h[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(e,n,i);if(void 0!==m&&o instanceof m)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(d)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);i[0]=h[e.type];var o=new m([i.buffer,e.data]);return r(o)}(e,n,i);if(o&&o.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,i);var a=h[e.type];return void 0!==e.data&&(a+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+a)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if(void 0!==m&&e.data instanceof m){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a[c];r=String.fromCharCode.apply(null,s)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return p;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return p;var i=e.charAt(0);return Number(i)==i&&f[i]?e.length>1?{type:f[i],data:e.substring(1)}:{type:f[i]}:p}i=new Uint8Array(e)[0];var o=a(e,1);return m&&"blob"===n&&(o=new m([o])),{type:f[i],data:o}},t.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&m&&(i=new m([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var i=o(e);if(n&&i)return m&&!d?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");g(e,(function(e,r){t.encodePacket(e,!!i&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===e)return r(p,0,1);for(var o,a,s="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===s||s!=(o=Number(s)))return r(p,0,1);if(s!=(a=e.substr(c+1,o)).length)return r(p,0,1);if(a.length){if(i=t.decodePacket(a,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,c+o,l))return}c+=o,s=""}else s+=u}return""!==s?r(p,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),o=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}i[o++]=t?0:1;var s=n.byteLength.toString();for(a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]})),n(i.buffer)}))},t.encodePayloadAsBlob=function(e,n){g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),a=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,m){var s=new m([t.buffer,a.buffer,e]);n(null,s)}}))}),(function(e,t){return n(new m(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),c=0===s[0],l="",u=1;255!==s[u];u++){if(l.length>310)return r(p,0,1);l+=s[u]}i=a(i,2+l.length),l=parseInt(l);var d=a(i,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(u=0;u<h.length;u++)d+=String.fromCharCode(h[u])}o.push(d),i=a(i,l)}var f=o.length;o.forEach((function(e,i){r(t.decodePacket(e,n,!0),i,f)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(e,t,...r)}},t.queueExec=function(e,t){const n=[];let r=!1;function i(...n){r=!0,e(...n),setTimeout(o,t)}function o(){r=!1;const e=n.shift();void 0!==e&&i(...e)}return function(...e){r?n.push(e):i(...e)}},t.throttle=function(e,t){let n=null,r=0;var i=function(...t){r=Date.now(),n=null,e(...t)};return function(...e){const o=Date.now(),a=t-(o-r);a<=0||a>t?(n&&clearTimeout(n),i(...e)):n||(n=setTimeout(i,a,...e))}}},function(e,t,n){(function(n){var r;
/*!
 *  howler.js v2.2.0
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var c=e.ctx.createBufferSource();c.buffer=e._scratchBuffer,c.connect(e.ctx.destination),void 0===c.start?c.noteOn(0):c.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),c.onended=function(){c.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new i,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return o.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&l(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var c=s._id;return n._queue.push({event:"play",action:function(){n.play(c)}}),c}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),u=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),d=1e3*u/Math.abs(s._rate),h=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var p=function(){s._paused=!1,s._seek=l,s._start=h,s._stop=f,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(l>=f)){var m=s._node;if(n._webAudio){var g=function(){n._playLock=!1,p(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;m.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===m.bufferSource.start?s._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):s._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(s._id))}else{var y=function(){m.currentTime=l,m.muted=s._muted||n._muted||o._muted||m.muted,m.volume=s._volume*o.volume(),m.playbackRate=s._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,p(),r.then((function(){n._playLock=!1,m._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,p(),n._emit("play",s._id),n._loadQueue()),m.playbackRate=s._rate,m.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),m.removeEventListener("ended",n._endTimers[s._id],!1)},m.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var b=window&&window.ejecta||!m.readyState&&o._navigator.isCocoonJS;if(m.readyState>=3||b)y();else{n._playLock=!0;var v=function(){y(),m.removeEventListener(o._canPlayEvent,v,!1)};m.addEventListener(o._canPlayEvent,v,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var c=0;c<t.length;c++)(n=r._soundById(t[c]))&&(n._volume=e,i[2]||r._stopFade(t[c]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var c=i._soundById(a[s]);if(c){if(r||i._stopFade(a[s]),i._webAudio&&!c._muted){var l=o.ctx.currentTime,u=l+n/1e3;c._volume=e,c._node.gain.setValueAtTime(e,l),c._node.gain.linearRampToValueAtTime(t,u)}i._startFadeInterval(c,e,t,n,a[s],void 0===r)}}return i},_startFadeInterval:function(e,t,n,r,i,o){var a=this,s=t,c=n-t,l=Math.abs(c/.01),u=Math.max(4,l>0?r/l:r),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var i=(Date.now()-d)/r;d=Date.now(),s+=c*i,s=c<0?Math.max(n,s):Math.min(n,s),s=Math.round(100*s)/100,a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],r._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=r._getSoundIds(t),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var c=0;c<t.length;c++)if(n=r._soundById(t[c])){r.playing(t[c])&&(n._rateSeek=r.seek(t[c]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var l=r.seek(t[c]),u=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-l,d=1e3*u/Math.abs(n._rate);!r._endTimers[t[c]]&&n._paused||(r._clearTimer(t[c]),r._endTimers[t[c]]=setTimeout(r._ended.bind(r,n),d)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var c=n.playing(t)?o.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+c*Math.abs(s._rate))}return s._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var d=function(){n._emit("seek",t),u&&n.play(t,!0)};if(u&&!n._webAudio){var h=function(){n._playLock?setTimeout(h,0):d()};setTimeout(h,0)}else d()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return c&&i&&delete c[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=c[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var c={},l=function(e){var t=e._src;if(c[t])return e._duration=c[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);d(r.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){o.setRequestHeader(t,e._xhr.headers[t])})),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?d(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete c[t],e.load())},u(o)}},u=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(c[t._src]=e,h(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r).catch(n):o.ctx.decodeAudioData(e,r,n)},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(t,[]))||(e.exports=r),t.Howler=o,t.Howl=a,void 0!==n?(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.0
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof e?a:(this._orientation=[e,t,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,r,i,o),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(e,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof e)return o._pos;o._pos=[e,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var c=o._soundById(a[s]);if(c){if("number"!=typeof e)return c._pos;c._pos=[e,n,r],c._node&&(c._panner&&!c._panner.pan||t(c,"spatial"),void 0!==c._panner.positionX?(c._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(e,n,r)),o._emit("pos",c._id)}}return o},Howl.prototype.orientation=function(e,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(e,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof e)return o._orientation;o._orientation=[e,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var c=o._soundById(a[s]);if(c){if("number"!=typeof e)return c._orientation;c._orientation=[e,n,r],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),t(c,"spatial")),void 0!==c._panner.orientationX?(c._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(e,n,r)),o._emit("orientation",c._id)}}return o},Howl.prototype.pannerAttr=function(){var e,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;e=o[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(e=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var c=r._pannerAttr;c={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:c.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:c.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:c.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:c.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:c.panningModel};var l=r._panner;l?(l.coneInnerAngle=c.coneInnerAngle,l.coneOuterAngle=c.coneOuterAngle,l.coneOuterGain=c.coneOuterGain,l.distanceModel=c.distanceModel,l.maxDistance=c.maxDistance,l.refDistance=c.refDistance,l.rolloffFactor=c.rolloffFactor,l.panningModel=c.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),t(r,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(21))},function(e,t,n){"use strict";(function(t){!function(t){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},i={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function o(e){var t,o,a,s,c,l,u,d,h,f,p,m,g,y,b,v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_=[],w=0,k=void 0,x=void 0;if(isNaN(e))throw new TypeError("Invalid number");return o=!0===v.bits,p=!0===v.unix,t=v.base||2,f=void 0!==v.round?v.round:p?1:2,l=void 0!==v.locale?v.locale:"",u=v.localeOptions||{},m=void 0!==v.separator?v.separator:"",g=void 0!==v.spacer?v.spacer:p?"":" ",b=v.symbols||{},y=2===t&&v.standard||"jedec",h=v.output||"string",s=!0===v.fullform,c=v.fullforms instanceof Array?v.fullforms:[],k=void 0!==v.exponent?v.exponent:-1,a=2<t?1e3:1024,(d=(x=Number(e))<0)&&(x=-x),(-1===k||isNaN(k))&&(k=Math.floor(Math.log(x)/Math.log(a)))<0&&(k=0),8<k&&(k=8),"exponent"===h?k:(0===x?(_[0]=0,_[1]=p?"":r[y][o?"bits":"bytes"][k]):(w=x/(2===t?Math.pow(2,10*k):Math.pow(1e3,k)),o&&a<=(w*=8)&&k<8&&(w/=a,k++),_[0]=Number(w.toFixed(0<k?f:0)),_[0]===a&&k<8&&void 0===v.exponent&&(_[0]=1,k++),_[1]=10===t&&1===k?o?"kb":"kB":r[y][o?"bits":"bytes"][k],p&&(_[1]="jedec"===y?_[1].charAt(0):0<k?_[1].replace(/B$/,""):_[1],n.test(_[1])&&(_[0]=Math.floor(_[0]),_[1]=""))),d&&(_[0]=-_[0]),_[1]=b[_[1]]||_[1],!0===l?_[0]=_[0].toLocaleString():0<l.length?_[0]=_[0].toLocaleString(l,u):0<m.length&&(_[0]=_[0].toString().replace(".",m)),"array"===h?_:(s&&(_[1]=c[k]?c[k]:i[y][k]+(o?"bit":"byte")+(1===_[0]?"":"s")),"object"===h?{value:_[0],symbol:_[1],exponent:k}:_.join(g)))}o.partial=function(e){return function(t){return o(t,e)}},e.exports=o}("undefined"!=typeof window&&window)}).call(this,n(21))},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(87)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(42))},function(e,t,n){(function(e){var r,i,o,a,s,c,l,u;o=function(e,t){if(!c(e))throw"juration.stringify(): Unable to stringify a non-numeric value";if("object"==typeof t&&void 0!==t.format&&"micro"!==t.format&&"short"!==t.format&&"long"!==t.format&&"chrono"!==t.format)throw"juration.stringify(): format cannot be '"+t.format+"', and must be either 'chrono', micro', 'short', or 'long'";var n=l({format:"short",units:void 0},t),r=["years","months","days","hours","minutes","seconds"],o=[];"chrono"!==n.format&&r.push("milliseconds");for(var u=e,d=0,h=0,f=r.length;h<f&&(null==n.units||d<n.units);h++){var p=i[r[h]];o[h]=Math.floor(Math.round(1e3*u)/1e3/p.value),(o[h]>0||d>0)&&d++,"micro"===n.format||"chrono"===n.format?o[h]+=p.formats[n.format]:o[h]+=" "+s(o[h],p.formats[n.format]),u%=p.value}var m="";for(h=0,f=o.length;h<f;h++)"0"!==o[h].charAt(0)&&"chrono"!=n.format?m+=o[h]+" ":"chrono"==n.format&&(m+=a(o[h]+"","0",h==o.length-1?2:3));return m.replace(/\s+$/,"").replace(/^(00:)+/g,"").replace(/^0/,"")},a=function(e,t,n){if(!e||!t||e.length>=n)return e;for(var r=(n-e.length)/t.length,i=0;i<r;i++)e=t+e;return e},s=function(e,t,n){return 1==e?t:n||t+"s"},c=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},l=function(e,t){for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e},u={UNITS:i={milliseconds:{patterns:["millisecond","mil","milli","ms"],value:.001,formats:{chrono:null,micro:"ms",short:"mil",long:"millisecond",plural:"milliseconds"}},seconds:{patterns:["second","sec","s"],value:1,formats:{chrono:"",micro:"s",short:"sec",long:"second",plural:"seconds"}},minutes:{patterns:["minute","min","m(?!s)"],value:60,formats:{chrono:":",micro:"m",short:"min",long:"minute",plural:"minutes"}},hours:{patterns:["hour","hr","h"],value:3600,formats:{chrono:":",micro:"h",short:"hr",long:"hour",plural:"hours"}},days:{patterns:["day","dy","d"],value:86400,formats:{chrono:":",micro:"d",short:"day",long:"day",plural:"days"}},weeks:{patterns:["week","wk","w"],value:604800,formats:{chrono:":",micro:"w",short:"wk",long:"week",plural:"weeks"}},months:{patterns:["month","mon","mo","mth"],value:2628e3,formats:{chrono:":",micro:"m",short:"mth",long:"month",plural:"months"}},years:{patterns:["year","yr","y"],value:31536e3,formats:{chrono:":",micro:"y",short:"yr",long:"year",plural:"years"}}},setLanguage:function(e){n(110)("./"+e)},parse:function(e){for(var t in i)for(var n=0,r=i[t].patterns.length;n<r;n++){var o=new RegExp("((?:\\d+\\.\\d+)|\\d+)\\s?("+i[t].patterns[n]+"s?(?=\\s|\\d|\\b))","gi");e=e.replace(o,(function(e,n,r){return" "+(n*i[t].value).toString()+" "}))}for(var a=0,s=e.replace(/(?!\.)\W+/g," ").replace(/^\s+|\s+$|(?:and|plus|with)\s?/g,"").split(" "),c=0,l=s.length;c<l;c++){if(!s[c]||!isFinite(s[c]))throw s[c]?"juration.parse(): Unable to parse: "+s[c].replace(/^\d+/g,""):"juration.parse(): Unable to parse: a falsey value";a+=parseFloat(s[c])}return a},stringify:o,humanize:o},e&&"object"==typeof e.exports?e.exports=u:(window.juration=u,void 0===(r=function(){return u}.apply(t,[]))||(e.exports=r))}).call(this,n(65)(e))},function(e){e.exports=JSON.parse('{"name":"elemental4","version":"4.4.1","description":"Modern reboot of the old item combination game.","main":"dist_server/server/index.js","private":true,"author":"Dave Caruso","dependencies":{"@reverse/array":"^1.7.3","@reverse/compact":"^1.1.4","@reverse/debounce":"^1.0.5","@reverse/emitter":"^2.0.6","@reverse/encoder":"^1.2.10","@reverse/random":"^1.0.12","@reverse/state":"^2.1.8","@reverse/string":"^1.1.3","@types/file-saver":"^2.0.1","aws-sdk":"^2.780.0","chalk":"^2.4.1","color":"^3.1.2","dom-to-image":"^2.6.0","dotenv":"^6.0.0","dts-minify":"^0.2.0","expr-eval":"^2.0.2","express":"^4.16.3","file-saver":"^2.0.2","filesize":"^6.1.0","fs-extra":"^7.0.0","google-spreadsheet":"^3.0.13","howler":"^2.1.1","indexeddb-export-import":"^2.1.2","jsonpath":"^1.0.2","jszip":"^3.5.0","juration":"^0.1.1","markdown-escape":"^1.1.0","marked":"^1.2.3","moment":"^2.29.0","monaco-editor":"^0.21.2","node-fetch":"^2.3.0","p5":"^1.1.9","proxycheck-node.js":"^2.0.0-a","semver":"^7.3.4","sha256":"^0.2.0","showdown":"^1.9.1","socket.io":"^2.3.0","socket.io-client":"^2.3.0","sqlite3":"^5.0.0","uuid":"^8.3.1","ws":"^7.4.0"},"devDependencies":{"@types/color":"^3.0.1","@types/dotenv":"^4.0.3","@types/express":"^4.16.0","@types/fs-extra":"^5.0.4","@types/google-spreadsheet":"^3.0.1","@types/howler":"^2.0.5","@types/jsonpath":"^0.2.0","@types/marked":"^1.1.0","@types/node":"^14.10.0","@types/node-fetch":"^2.1.4","@types/p5":"^0.9.1","@types/semver":"^7.3.4","@types/sha256":"^0.2.0","@types/socket.io":"^2.1.11","@types/socket.io-client":"^1.4.33","@types/sqlite3":"^3.1.6","file-loader":"^2.0.0","html-minifier":"^3.5.21","serve":"^11.3.2","terser":"^5.3.4","ts-loader":"^5.1.1","typescript":"^4.0.2","uglify-es":"^3.3.9","webpack":"^4.28.4","webpack-bundle-analyzer":"^3.9.0","webpack-cli":"^3.2.1","worker-loader":"^3.0.2"},"scripts":{"start":"node .","build-server":"tsc -p server","watch-server":"tsc -p server -w","build-game":"node build-client","watch-game":"node build-client -s && webpack -w","cloc":"cloc game server shared res --fullpath --not-match-d=\\"(game\\\\/out|server\\\\/out)\\"","serve":"serve dist_client -l 8000","upload":"ssh -t elemental4.net \\"cd ~/app/elemental4 && sh production.sh\\""}}')},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(89),i=n(90),o=n(91);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return q(N(t,e.length-n),e,n,r)}function w(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return w(e,t,n,r)}function x(e,t,n,r){return q(z(t),e,n,r)}function S(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){o=l[d],a=u[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=D(e[o]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:N(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(21))},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(102)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(16);function i(e,t=!1){const n=new r.Emitter;return n.headers=e.headers,(async()=>{const r=e.body.getReader(),i=+e.headers.get("Content-Length");let o=0,a=[];for(;;){const{done:e,value:s}=await r.read();if(e)break;a.push(s),o+=s.length,t&&n.emit("data",new TextDecoder("utf-8").decode(s)),n.emit("progress",{percent:o/i,current:o,total:i})}let s=new Uint8Array(o),c=0;for(let e of a)s.set(e,c),c+=e.length;let l=new TextDecoder("utf-8").decode(s);n.emit("done",l)})(),n}},function(e,t,n){(function(t,n,r){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,c,l,u=[],d=0,h=e.length,f=h,p="string"!==r.getTypeOf(e);d<e.length;)f=h-d,i=p?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,c=1<f?(15&n)<<2|i>>6:64,l=2<f?63&i:64,u.push(o.charAt(a)+o.charAt(s)+o.charAt(c)+o.charAt(l));return u.join("")},n.decode=function(e){var t,n,r,a,s,c,l=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=o.indexOf(e.charAt(l++))<<2|(a=o.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(l++)))>>2,r=(3&s)<<6|(c=o.indexOf(e.charAt(l++))),h[u++]=t,64!==s&&(h[u++]=n),64!==c&&(h[u++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/DataLengthProbe"),a=e("./stream/Crc32Probe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}o=e("./stream/DataLengthProbe"),s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var o=i,a=0+n;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function c(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(c,a),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new c("Deflate",e)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,u){var d,h,f=e.file,p=e.compression,m=u!==s.utf8encode,g=o.transformTo("string",u(f.name)),y=o.transformTo("string",s.utf8encode(f.name)),b=f.comment,v=o.transformTo("string",u(b)),_=o.transformTo("string",s.utf8encode(b)),w=y.length!==f.name.length,k=_.length!==b.length,x="",S="",E="",O=f.dir,A=f.date,C={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(C.crc32=e.crc32,C.compressedSize=e.compressedSize,C.uncompressedSize=e.uncompressedSize);var T=0;t&&(T|=8),m||!w&&!k||(T|=2048);var j=0,I=0;O&&(j|=16),"UNIX"===a?(I=798,j|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,O)):(I=20,j|=function(e){return 63&(e||0)}(f.dosPermissions)),d=A.getUTCHours(),d<<=6,d|=A.getUTCMinutes(),d<<=5,d|=A.getUTCSeconds()/2,h=A.getUTCFullYear()-1980,h<<=4,h|=A.getUTCMonth()+1,h<<=5,h|=A.getUTCDate(),w&&(S=r(1,1)+r(c(g),4)+y,x+="up"+r(S.length,2)+S),k&&(E=r(1,1)+r(c(v),4)+_,x+="uc"+r(E.length,2)+E);var L="";return L+="\n\0",L+=r(T,2),L+=p.magic,L+=r(d,2),L+=r(h,2),L+=r(C.crc32,4),L+=r(C.compressedSize,4),L+=r(C.uncompressedSize,4),L+=r(g.length,2),L+=r(x.length,2),{fileRecord:l.LOCAL_FILE_HEADER+L+g+x,dirRecord:l.CENTRAL_FILE_HEADER+r(I,2)+L+r(v.length,2)+"\0\0\0\0"+r(j,4)+r(i,4)+g+x+v}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),c=e("../crc32"),l=e("../signature");function u(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(u,a),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var s=o.transformTo("string",a(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.5.0",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=(r=e("./utils"),e("./zipEntries")),s=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(l(r[o]));return i.Promise.all(n)})).then((function(e){for(var r=e.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){"use strict";n.exports={isNode:void 0!==t,newBufferFrom:function(e,n){if(t.from&&t.from!==Uint8Array.from)return t.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,n)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var n=new t(e);return n.fill(0),n},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=p(e))&&g.call(this,r,!0);var d,y="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!y),(t instanceof l&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string"),d=t instanceof l||t instanceof a?t:h.isNode&&h.isStream(t)?new f(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var b=new u(e,d,s);this.files[e]=b}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(y(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new c(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,n,r){"use strict";var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),c=e("../support"),l=e("../external"),u=null;if(c.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,n){return new l.Promise((function(r,o){var a=[],c=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",(function(e,t){a.push(e),n&&n(t)})).on("error",(function(e){a=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return i.transformTo(e,t)}}(l,function(e,n){var r,i=0,o=null,a=0;for(r=0;r<n.length;r++)a+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(c,a),u);r(e)}catch(e){o(e)}a=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),r.blob=0===o.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),o=a=0;a<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,c=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)c[n++]=i;else if(4<(o=s[i]))c[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,a),l.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),c=t;a!==t.length&&(i.uint8array?(c=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(c=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,r.inherits(u,a),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("set-immediate-shim"),s=e("./external");function c(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=d;var f={};f.string={string:c,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},f.array={string:d,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},f.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return o.newBufferFrom(e)}},f.nodebuffer={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:c},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return f[r][e](t)},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){a((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,a,c){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=i.decode(t):o&&!0!==a&&(t=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),c=e("./compressions"),l=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),c=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)r.prototype[l[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}t.exports=function(e){1!==l.push(e)||r||n()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=p((function(){t(i,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){o.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return o.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,l=new this(i);++c<n;)u(e[c],c);return l;function u(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(l,a))}),(function(e){r||(r=!0,o.reject(l,e))}))}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<t;)r=e[a],this.resolve(r).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString;function l(e){if(!(this instanceof l))return new l(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(a[n]);this._dict_set=!0}}function u(e,t){var n=new l(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}l.prototype.push=function(e,t){var n,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=l,n.deflate=u,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,c,l,d,h,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=o.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(f.output,f.next_out),l=f.next_out-c,d=o.buf2string(f.output,c),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,c,l,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),o=a=0;a<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,l=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)l[r++]=i;else if(4<(o=a[i]))l[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return c(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),c=e("./messages"),l=-2,u=258,d=262,h=113;function f(e,t){return e.msg=c[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function y(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function b(e,t){e.pending_buf[e.pending++]=t}function v(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function _(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,l=e.window,h=e.w_mask,f=e.prev,p=e.strstart+u,m=l[o+a-1],g=l[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===g&&l[n+a-1]===m&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<p);if(r=u-(p-o),o=p-u,a<r){if(e.match_start=t,s<=(a=r))break;m=l[o+a-1],g=l[o+a]}}}while((t=f[t&h])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function w(e){var t,n,r,o,c,l,u,h,f,p,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);o+=m}if(0===e.strm.avail_in)break;if(l=e.strm,u=e.window,h=e.strstart+e.lookahead,p=void 0,(f=o)<(p=l.avail_in)&&(p=f),n=0===p?0:(l.avail_in-=p,i.arraySet(u,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,u,p,h):2===l.state.wrap&&(l.adler=s(l.adler,u,p,h)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function k(e,t){for(var n,r;;){if(e.lookahead<d){if(w(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=_(e,n)),e.match_length>=3)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function x(e,t){for(var n,r,i;;){if(e.lookahead<d){if(w(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=_(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(y(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&y(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}function S(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function E(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function O(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):f(e,l)}function A(e){var t=O(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function C(e,t,n,r,o,a){if(!e)return l;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||8!==n||r<8||15<r||t<0||9<t||a<0||4<a)return f(e,l);8===r&&(r=9);var c=new E;return(e.state=c).strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,A(e)}r=[new S(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(w(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,y(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(y(e,!1),e.strm.avail_out),1)})),new S(4,4,8,4,k),new S(4,5,16,8,k),new S(4,6,32,32,k),new S(4,4,16,16,x),new S(8,16,32,32,x),new S(8,16,128,128,x),new S(8,32,128,256,x),new S(32,128,258,1024,x),new S(32,258,258,4096,x)],n.deflateInit=function(e,t){return C(e,t,8,15,8,0)},n.deflateInit2=C,n.deflateReset=A,n.deflateResetKeep=O,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?l:(e.state.gzhead=t,0):l},n.deflate=function(e,t){var n,i,a,c;if(!e||!e.state||5<t||t<0)return e?f(e,l):l;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return f(e,0===e.avail_out?-5:l);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,b(i,31),b(i,139),b(i,8),i.gzhead?(b(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),b(i,255&i.gzhead.time),b(i,i.gzhead.time>>8&255),b(i,i.gzhead.time>>16&255),b(i,i.gzhead.time>>24&255),b(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),b(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(b(i,255&i.gzhead.extra.length),b(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(b(i,0),b(i,0),b(i,0),b(i,0),b(i,0),b(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),b(i,3),i.status=h);else{var d=8+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=h,v(i,d),0!==i.strstart&&(v(i,e.adler>>>16),v(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),g(e),a=i.pending,i.pending!==i.pending_buf_size));)b(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),g(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,b(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),g(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,b(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&g(e),i.pending+2<=i.pending_buf_size&&(b(i,255&e.adler),b(i,e.adler>>8&255),e.adler=0,i.status=h)):i.status=h),0!==i.pending){if(g(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return f(e,-5);if(666===i.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var _=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(w(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=u){if(w(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+u;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=u-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(y(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(y(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(y(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==_&&4!==_||(i.status=666),1===_||3===_)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),g(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(b(i,255&e.adler),b(i,e.adler>>8&255),b(i,e.adler>>16&255),b(i,e.adler>>24&255),b(i,255&e.total_in),b(i,e.total_in>>8&255),b(i,e.total_in>>16&255),b(i,e.total_in>>24&255)):(v(i,e.adler>>>16),v(i,65535&e.adler)),g(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?f(e,l):(e.state=null,t===h?f(e,-3):0):l},n.deflateSetDictionary=function(e,t){var n,r,o,s,c,u,d,h,f=t.length;if(!e||!e.state)return l;if(2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return l;for(1===s&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,f-n.w_size,n.w_size,0),t=h,f=n.w_size),c=e.avail_in,u=e.next_in,d=e.input,e.avail_in=f,e.next_in=0,e.input=t,w(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,w(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=c,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,a,s,c,l,u,d,h,f,p,m,g,y,b,v,_,w,k,x,S,E,O;n=e.state,r=e.next_in,E=e.input,i=r+(e.avail_in-5),o=e.next_out,O=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{p<15&&(f+=E[r++]<<p,p+=8,f+=E[r++]<<p,p+=8),v=m[f&y];t:for(;;){if(f>>>=_=v>>>24,p-=_,0==(_=v>>>16&255))O[o++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=m[(65535&v)+(f&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&v,(_&=15)&&(p<_&&(f+=E[r++]<<p,p+=8),w+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=E[r++]<<p,p+=8,f+=E[r++]<<p,p+=8),v=g[f&b];n:for(;;){if(f>>>=_=v>>>24,p-=_,!(16&(_=v>>>16&255))){if(0==(64&_)){v=g[(65535&v)+(f&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&v,p<(_&=15)&&(f+=E[r++]<<p,(p+=8)<_&&(f+=E[r++]<<p,p+=8)),c<(k+=f&(1<<_)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=_,p-=_,(_=o-a)<k){if(u<(_=k-_)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=h,(x=0)===d){if(x+=l-_,_<w){for(w-=_;O[o++]=h[x++],--_;);x=o-k,S=O}}else if(d<_){if(x+=l+d-_,(_-=d)<w){for(w-=_;O[o++]=h[x++],--_;);if(x=0,d<w){for(w-=_=d;O[o++]=h[x++],--_;);x=o-k,S=O}}}else if(x+=d-_,_<w){for(w-=_;O[o++]=h[x++],--_;);x=o-k,S=O}for(;2<w;)O[o++]=S[x++],O[o++]=S[x++],O[o++]=S[x++],w-=3;w&&(O[o++]=S[x++],1<w&&(O[o++]=S[x++]))}else{for(x=o-k;O[o++]=O[x++],O[o++]=O[x++],O[o++]=O[x++],2<(w-=3););w&&(O[o++]=O[x++],1<w&&(O[o++]=O[x++]))}break}}break}}while(r<i&&o<s);r-=w=p>>3,f&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),c=-2;function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):c}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):c}function f(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):c}function p(e,t){var n,r;return e?(r=new u,(e.state=r).window=null,0!==(n=f(e,t))&&(e.state=null),n):c}var m,g,y=!0;function b(e){if(y){var t;for(m=new r.Buf32(512),g=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,g,0,e.work,{bits:5}),y=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function v(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=h,n.inflateReset2=f,n.inflateResetKeep=d,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,u,d,h,f,p,m,g,y,_,w,k,x,S,E,O,A,C,T,j,I,L,P,M,R=0,B=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,d=e.output,m=e.avail_out,h=e.next_in,u=e.input,p=e.avail_in,g=n.hold,y=n.bits,_=p,w=m,L=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;y<16;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(2&n.wrap&&35615===g){B[n.check=0]=255&g,B[1]=g>>>8&255,n.check=o(n.check,B,2,0),y=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",n.mode=30;break}if(y-=4,I=8+(15&(g>>>=4)),0===n.wbits)n.wbits=I;else if(I>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<I,e.adler=n.check=1,n.mode=512&g?10:12,y=g=0;break;case 2:for(;y<16;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(n.flags=g,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(B[0]=255&g,B[1]=g>>>8&255,n.check=o(n.check,B,2,0)),y=g=0,n.mode=3;case 3:for(;y<32;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}n.head&&(n.head.time=g),512&n.flags&&(B[0]=255&g,B[1]=g>>>8&255,B[2]=g>>>16&255,B[3]=g>>>24&255,n.check=o(n.check,B,4,0)),y=g=0,n.mode=4;case 4:for(;y<16;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(B[0]=255&g,B[1]=g>>>8&255,n.check=o(n.check,B,2,0)),y=g=0,n.mode=5;case 5:if(1024&n.flags){for(;y<16;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(B[0]=255&g,B[1]=g>>>8&255,n.check=o(n.check,B,2,0)),y=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(k=n.length)&&(k=p),k&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,u,h,k,I)),512&n.flags&&(n.check=o(n.check,u,k,h)),p-=k,h+=k,n.length-=k),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(k=0;I=u[h+k++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I)),I&&k<p;);if(512&n.flags&&(n.check=o(n.check,u,k,h)),p-=k,h+=k,I)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(k=0;I=u[h+k++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I)),I&&k<p;);if(512&n.flags&&(n.check=o(n.check,u,k,h)),p-=k,h+=k,I)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;y<16;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}y=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;y<32;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}e.adler=n.check=l(g),y=g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=y,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&y,y-=7&y,n.mode=27;break}for(;y<3;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}switch(n.last=1&g,y-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6!==t)break;g>>>=2,y-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,y-=2;break;case 14:for(g>>>=7&y,y-=7&y;y<32;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,y=g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(k=n.length){if(p<k&&(k=p),m<k&&(k=m),0===k)break e;r.arraySet(d,u,h,k,f),p-=k,h+=k,m-=k,f+=k,n.length-=k;break}n.mode=12;break;case 17:for(;y<14;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(n.nlen=257+(31&g),g>>>=5,y-=5,n.ndist=1+(31&g),g>>>=5,y-=5,n.ncode=4+(15&g),g>>>=4,y-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;y<3;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}n.lens[F[n.have++]]=7&g,g>>>=3,y-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},L=s(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,L){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(R=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,A=65535&R,!((E=R>>>24)<=y);){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(A<16)g>>>=E,y-=E,n.lens[n.have++]=A;else{if(16===A){for(M=E+2;y<M;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(g>>>=E,y-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}I=n.lens[n.have-1],k=3+(3&g),g>>>=2,y-=2}else if(17===A){for(M=E+3;y<M;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}y-=E,I=0,k=3+(7&(g>>>=E)),g>>>=3,y-=3}else{for(M=E+7;y<M;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}y-=E,I=0,k=11+(127&(g>>>=E)),g>>>=7,y-=7}if(n.have+k>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;k--;)n.lens[n.have++]=I}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},L=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,L){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},L=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,L){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=m){e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=y,a(e,w),f=e.next_out,d=e.output,m=e.avail_out,h=e.next_in,u=e.input,p=e.avail_in,g=n.hold,y=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(R=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,A=65535&R,!((E=R>>>24)<=y);){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(O&&0==(240&O)){for(C=E,T=O,j=A;O=(R=n.lencode[j+((g&(1<<C+T)-1)>>C)])>>>16&255,A=65535&R,!(C+(E=R>>>24)<=y);){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}g>>>=C,y-=C,n.back+=C}if(g>>>=E,y-=E,n.back+=E,n.length=A,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(M=n.extra;y<M;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,y-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(R=n.distcode[g&(1<<n.distbits)-1])>>>16&255,A=65535&R,!((E=R>>>24)<=y);){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(0==(240&O)){for(C=E,T=O,j=A;O=(R=n.distcode[j+((g&(1<<C+T)-1)>>C)])>>>16&255,A=65535&R,!(C+(E=R>>>24)<=y);){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}g>>>=C,y-=C,n.back+=C}if(g>>>=E,y-=E,n.back+=E,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=A,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(M=n.extra;y<M;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,y-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(k=w-m,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}x=k>n.wnext?(k-=n.wnext,n.wsize-k):n.wnext-k,k>n.length&&(k=n.length),S=n.window}else S=d,x=f-n.offset,k=n.length;for(m<k&&(k=m),m-=k,n.length-=k;d[f++]=S[x++],--k;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;d[f++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;y<32;){if(0===p)break e;p--,g|=u[h++]<<y,y+=8}if(w-=m,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?o(n.check,d,w,f-w):i(n.check,d,w,f-w)),w=m,(n.flags?g:l(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}y=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;y<32;){if(0===p)break e;p--,g+=u[h++]<<y,y+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}y=g=0}n.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=y,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&v(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(_-=e.avail_in,w-=e.avail_out,e.total_in+=_,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?o(n.check,d,w,e.next_out-w):i(n.check,d,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==_&&0===w||4===t)&&0===L&&(L=-5),L)},n.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?c:((n.head=t).done=!1,0):c},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?c:11===n.mode&&i(1,t,r,0)!==n.check?-3:v(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):c},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,l,u,d,h){var f,p,m,g,y,b,v,_,w,k=h.bits,x=0,S=0,E=0,O=0,A=0,C=0,T=0,j=0,I=0,L=0,P=null,M=0,R=new r.Buf16(16),B=new r.Buf16(16),F=null,U=0;for(x=0;x<=15;x++)R[x]=0;for(S=0;S<c;S++)R[t[n+S]]++;for(A=k,O=15;1<=O&&0===R[O];O--);if(O<A&&(A=O),0===O)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(E=1;E<O&&0===R[E];E++);for(A<E&&(A=E),x=j=1;x<=15;x++)if(j<<=1,(j-=R[x])<0)return-1;if(0<j&&(0===e||1!==O))return-1;for(B[1]=0,x=1;x<15;x++)B[x+1]=B[x]+R[x];for(S=0;S<c;S++)0!==t[n+S]&&(d[B[t[n+S]]++]=S);if(b=0===e?(P=F=d,19):1===e?(P=i,M-=257,F=o,U-=257,256):(P=a,F=s,-1),x=E,y=u,T=S=L=0,m=-1,g=(I=1<<(C=A))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(v=x-T,w=d[S]<b?(_=0,d[S]):d[S]>b?(_=F[U+d[S]],P[M+d[S]]):(_=96,0),f=1<<x-T,E=p=1<<C;l[y+(L>>T)+(p-=f)]=v<<24|_<<16|w|0,0!==p;);for(f=1<<x-1;L&f;)f>>=1;if(0!==f?(L&=f-1,L+=f):L=0,S++,0==--R[x]){if(x===O)break;x=t[n+d[S]]}if(A<x&&(L&g)!==m){for(0===T&&(T=A),y+=E,j=1<<(C=x-T);C+T<O&&!((j-=R[C+T])<=0);)C++,j<<=1;if(I+=1<<C,1===e&&852<I||2===e&&592<I)return 1;l[m=L&g]=A<<24|C<<16|y-u|0}}return 0!==L&&(l[y+L]=x-T<<24|64<<16|0),h.bits=A,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=256,a=286,s=30,c=15,l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);i(f);var p=new Array(60);i(p);var m=new Array(512);i(m);var g=new Array(256);i(g);var y=new Array(29);i(y);var b,v,_,w=new Array(s);function k(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function x(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?m[e]:m[256+(e>>>7)]}function E(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function A(e,t,n){O(e,n[2*t],n[2*t+1])}function C(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function T(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=c;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=C(o[s]++,s))}}function j(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function I(e){8<e.bi_valid?E(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function L(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function P(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&L(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!L(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function M(e,t,n){var r,i,a,s,c=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?A(e,i,t):(A(e,(a=g[i])+o+1,t),0!==(s=l[a])&&O(e,i-=y[a],s),A(e,a=S(--r),n),0!==(s=u[a])&&O(e,r-=w[a],s)),c<e.last_lit;);A(e,256,t)}function R(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)P(e,o,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,P(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(o=0;o<=c;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(o=m,g++),l[2*r+1]=o,u<r||(e.bl_count[o]++,a=0,p<=r&&(a=f[r-p]),s=l[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(d[2*r+1]+a)));if(0!==g){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,g-=2}while(0<g);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)u<(i=e.heap[--n])||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),T(o,u,e.bl_count)}function B(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,l=(s=0)===a?(c=138,3):i===a?(c=6,3):(c=7,4))}function F(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<l)for(;A(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(A(e,i,e.bl_tree),s--),A(e,16,e.bl_tree),O(e,s-3,2)):s<=10?(A(e,17,e.bl_tree),O(e,s-3,3)):(A(e,18,e.bl_tree),O(e,s-11,7));o=i,l=(s=0)===a?(c=138,3):i===a?(c=6,3):(c=7,4)}}i(w);var U=!1;function D(e,t,n,i){O(e,0+(i?1:0),3),function(e,t,n,i){I(e),E(e,n),E(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){U||(function(){var e,t,n,r,i,o=new Array(16);for(r=n=0;r<28;r++)for(y[r]=n,e=0;e<1<<l[r];e++)g[n++]=r;for(g[n-1]=r,r=i=0;r<16;r++)for(w[r]=i,e=0;e<1<<u[r];e++)m[i++]=r;for(i>>=7;r<s;r++)for(w[r]=i<<7,e=0;e<1<<u[r]-7;e++)m[256+i++]=r;for(t=0;t<=c;t++)o[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,o[8]++;for(;e<=255;)f[2*e+1]=9,e++,o[9]++;for(;e<=279;)f[2*e+1]=7,e++,o[7]++;for(;e<=287;)f[2*e+1]=8,e++,o[8]++;for(T(f,287,o),e=0;e<s;e++)p[2*e+1]=5,p[2*e]=C(e,5);b=new k(f,l,257,a,c),v=new k(p,u,0,s,c),_=new k(new Array(0),d,0,19,7)}(),U=!0),e.l_desc=new x(e.dyn_ltree,b),e.d_desc=new x(e.dyn_dtree,v),e.bl_desc=new x(e.bl_tree,_),e.bi_buf=0,e.bi_valid=0,j(e)},n._tr_stored_block=D,n._tr_flush_block=function(e,t,n,r){var i,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),s=function(e){var t;for(B(e,e.dyn_ltree,e.l_desc.max_code),B(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?D(e,t,n,r):4===e.strategy||a===i?(O(e,2+(r?1:0),3),M(e,f,p)):(O(e,4+(r?1:0),3),function(e,t,n,r){var i;for(O(e,t-257,5),O(e,n-1,5),O(e,r-4,4),i=0;i<r;i++)O(e,e.bl_tree[2*h[i]+1],3);F(e,e.dyn_ltree,t-1),F(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),M(e,e.dyn_ltree,e.dyn_dtree)),j(e),r&&I(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+o+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){O(e,2,3),A(e,256,f),function(e){16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){"use strict";t.exports="function"==typeof r?r:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)}).call(this,n(35).Buffer,n(21),n(116).setImmediate)},function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var r=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}})),i=(r.defaults,r.getDefaults,r.changeDefaults,/[&<>"']/),o=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,s=/[<>"']|&(?!#?\w+;)/g,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(e){return c[e]},u=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function d(e){return e.replace(u,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var h=/(^|[^\[])\^/g,f=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,m={},g=/^[^:]+:\/*[^/]*$/,y=/^([^:]+:)[\s\S]*$/,b=/^([^:]+:\/*[^/]*)[\s\S]*$/;function v(e,t){m[" "+e]||(g.test(e)?m[" "+e]=e+"/":m[" "+e]=_(e,"/",!0));var n=-1===(e=m[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(y,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(b,"$1")+t:e+t}function _(e,t,n){var r=e.length;if(0===r)return"";for(var i=0;i<r;){var o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,r-i)}var w=function(e,t){if(t){if(i.test(e))return e.replace(o,l)}else if(a.test(e))return e.replace(s,l);return e},k=d,x=function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,r){return r=(r=r.source||r).replace(h,"$1"),e=e.replace(t,r),n},getRegex:function(){return new RegExp(e,t)}};return n},S=function(e,t,n){if(e){var r;try{r=decodeURIComponent(d(n)).replace(f,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!p.test(n)&&(n=v(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},E={exec:function(){}},O=function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},A=function(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var r=!1,i=t;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},C=_,T=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,i=0;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&--r<0)return i;return-1},j=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},I=function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e},L=r.defaults,P=C,M=A,R=w,B=T;function F(e,t,n){var r=t.href,i=t.title?R(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:i,text:o}:{type:"image",raw:n,href:r,title:i,text:R(o)}}var U=function(){function e(e){this.options=e||L}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var i=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:P(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=r.length?e.slice(r.length):e})).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:M(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=M(n.cells[r],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,r,i,o,a,s,c,l,u=t[0],d=t[2],h=d.length>1,f={type:"list",raw:u,ordered:h,start:h?+d.slice(0,-1):"",loose:!1,items:[]},p=t[0].match(this.rules.block.item),m=!1,g=p.length;i=this.rules.block.listItemStart.exec(p[0]);for(var y=0;y<g;y++){if(u=n=p[y],y!==g-1){if((o=this.rules.block.listItemStart.exec(p[y+1]))[1].length>i[0].length||o[1].length>3){p.splice(y,2,p[y]+"\n"+p[y+1]),y--,g--;continue}(!this.options.pedantic||this.options.smartLists?o[2][o[2].length-1]!==d[d.length-1]:h===(1===o[2].length))&&(a=p.slice(y+1).join("\n"),f.raw=f.raw.substring(0,f.raw.length-a.length),y=g-1),i=o}r=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),s=m||/\n\n(?!\s*$)/.test(n),y!==g-1&&(m="\n"===n.charAt(n.length-1),s||(s=m)),s&&(f.loose=!0),l=void 0,(c=/^\[[ xX]\] /.test(n))&&(l=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,"")),f.items.push({type:"list_item",raw:u,task:c,checked:l,loose:s,text:n})}return f}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):R(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:M(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var r,i=n.align.length;for(r=0;r<i;r++)/^ *-+: *$/.test(n.align[r])?n.align[r]="right":/^ *:-+: *$/.test(n.align[r])?n.align[r]="center":/^ *:-+ *$/.test(n.align[r])?n.align[r]="left":n.align[r]=null;for(i=n.cells.length,r=0;r<i;r++)n.cells[r]=M(n.cells[r].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var r=t[t.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:R(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):R(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=B(t[2],"()");if(n>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,r).trim(),t[3]=""}var i=t[2],o="";if(this.options.pedantic){var a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a?(i=a[1],o=a[3]):o=""}else o=t[3]?t[3].slice(1,-1):"";return F(t,{href:(i=i.trim().replace(/^<([\s\S]*)>$/,"$1"))?i.replace(this.rules.inline._escapes,"$1"):i,title:o?o.replace(this.rules.inline._escapes,"$1"):o},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if(!(r=t[r.toLowerCase()])||!r.href){var i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return F(n,r,n[0])}},t.strong=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.strong.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var i,o="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(o.lastIndex=0;null!=(r=o.exec(t));)if(i=this.rules.inline.strong.middle.exec(t.slice(0,r.index+3)))return{type:"strong",raw:e.slice(0,i[0].length),text:e.slice(2,i[0].length-2)}}},t.em=function(e,t,n){void 0===n&&(n="");var r=this.rules.inline.em.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var i,o="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(o.lastIndex=0;null!=(r=o.exec(t));)if(i=this.rules.inline.em.middle.exec(t.slice(0,r.index+2)))return{type:"em",raw:e.slice(0,i[0].length),text:e.slice(1,i[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),i=n.startsWith(" ")&&n.endsWith(" ");return r&&i&&(n=n.substring(1,n.length-1)),n=R(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[1]}},t.autolink=function(e,t){var n,r,i=this.rules.inline.autolink.exec(e);if(i)return r="@"===i[2]?"mailto:"+(n=R(this.options.mangle?t(i[1]):i[1])):n=R(i[1]),{type:"link",raw:i[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var r,i;if("@"===n[2])i="mailto:"+(r=R(this.options.mangle?t(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);r=R(n[0]),i="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r,i=this.rules.inline.text.exec(e);if(i)return r=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):R(i[0]):i[0]:R(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}},e}(),D=E,N=x,z=O,q={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:D,table:D,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};q.def=N(q.def).replace("label",q._label).replace("title",q._title).getRegex(),q.bullet=/(?:[*+-]|\d{1,9}[.)])/,q.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,q.item=N(q.item,"gm").replace(/bull/g,q.bullet).getRegex(),q.listItemStart=N(/^( *)(bull)/).replace("bull",q.bullet).getRegex(),q.list=N(q.list).replace(/bull/g,q.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+q.def.source+")").getRegex(),q._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",q._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,q.html=N(q.html,"i").replace("comment",q._comment).replace("tag",q._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),q.paragraph=N(q._paragraph).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",q._tag).getRegex(),q.blockquote=N(q.blockquote).replace("paragraph",q.paragraph).getRegex(),q.normal=z({},q),q.gfm=z({},q.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),q.gfm.nptable=N(q.gfm.nptable).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",q._tag).getRegex(),q.gfm.table=N(q.gfm.table).replace("hr",q.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",q._tag).getRegex(),q.pedantic=z({},q.normal,{html:N("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",q._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:D,paragraph:N(q.normal._paragraph).replace("hr",q.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",q.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var H={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:D,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:D,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};H.punctuation=N(H.punctuation).replace(/punctuation/g,H._punctuation).getRegex(),H._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",H._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",H._comment=N(q._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),H.em.start=N(H.em.start).replace(/punctuation/g,H._punctuation).getRegex(),H.em.middle=N(H.em.middle).replace(/punctuation/g,H._punctuation).replace(/overlapSkip/g,H._overlapSkip).getRegex(),H.em.endAst=N(H.em.endAst,"g").replace(/punctuation/g,H._punctuation).getRegex(),H.em.endUnd=N(H.em.endUnd,"g").replace(/punctuation/g,H._punctuation).getRegex(),H.strong.start=N(H.strong.start).replace(/punctuation/g,H._punctuation).getRegex(),H.strong.middle=N(H.strong.middle).replace(/punctuation/g,H._punctuation).replace(/overlapSkip/g,H._overlapSkip).getRegex(),H.strong.endAst=N(H.strong.endAst,"g").replace(/punctuation/g,H._punctuation).getRegex(),H.strong.endUnd=N(H.strong.endUnd,"g").replace(/punctuation/g,H._punctuation).getRegex(),H.blockSkip=N(H._blockSkip,"g").getRegex(),H.overlapSkip=N(H._overlapSkip,"g").getRegex(),H._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,H._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,H._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,H.autolink=N(H.autolink).replace("scheme",H._scheme).replace("email",H._email).getRegex(),H._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,H.tag=N(H.tag).replace("comment",H._comment).replace("attribute",H._attribute).getRegex(),H._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,H._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,H._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,H.link=N(H.link).replace("label",H._label).replace("href",H._href).replace("title",H._title).getRegex(),H.reflink=N(H.reflink).replace("label",H._label).getRegex(),H.reflinkSearch=N(H.reflinkSearch,"g").replace("reflink",H.reflink).replace("nolink",H.nolink).getRegex(),H.normal=z({},H),H.pedantic=z({},H.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:N(/^!?\[(label)\]\((.*?)\)/).replace("label",H._label).getRegex(),reflink:N(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",H._label).getRegex()}),H.gfm=z({},H.normal,{escape:N(H.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),H.gfm.url=N(H.gfm.url,"i").replace("email",H.gfm._extended_email).getRegex(),H.breaks=z({},H.gfm,{br:N(H.br).replace("{2,}","*").getRegex(),text:N(H.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var $={block:q,inline:H},W=r.defaults,Z=$.block,G=$.inline,V=I;function Y(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function K(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}var X=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||W,this.options.tokenizer=this.options.tokenizer||new U,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:Z.normal,inline:G.normal};this.options.pedantic?(t.block=Z.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=Z.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var n,r,i,o=t.prototype;return o.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},o.blockTokens=function(e,t,n){var r,i,o,a;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),o=r.items.length,i=0;i<o;i++)r.items[i].tokens=this.blockTokens(r.items[i].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((a=t[t.length-1]).raw+="\n"+r.raw,a.text+="\n"+r.text);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return t},o.inline=function(e){var t,n,r,i,o,a,s=e.length;for(t=0;t<s;t++)switch((a=e[t]).type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},i=a.header.length,n=0;n<i;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(i=a.cells.length,n=0;n<i;n++)for(o=a.cells[n],a.tokens.cells[n]=[],r=0;r<o.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(o[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(i=a.items.length,n=0;n<i;n++)this.inline(a.items[n].tokens)}return e},o.inlineTokens=function(e,t,n,r,i){var o;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i="");var a,s=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(s));)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+V("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(s));)s=s.slice(0,a.index)+"["+V("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(o=this.tokenizer.escape(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.tag(e,n,r))e=e.substring(o.raw.length),n=o.inLink,r=o.inRawBlock,t.push(o);else if(o=this.tokenizer.link(e))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.strong(e,s,i))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.em(e,s,i))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.codespan(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.br(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.del(e))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.autolink(e,K))e=e.substring(o.raw.length),t.push(o);else if(n||!(o=this.tokenizer.url(e,K))){if(o=this.tokenizer.inlineText(e,r,Y))e=e.substring(o.raw.length),i=o.raw.slice(-1),t.push(o);else if(e){var l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}throw new Error(l)}}else e=e.substring(o.raw.length),t.push(o);return t},n=t,i=[{key:"rules",get:function(){return{block:Z,inline:G}}}],(r=null)&&e(n.prototype,r),i&&e(n,i),t}(),J=r.defaults,Q=S,ee=w,te=function(){function e(e){this.options=e||J}var t=e.prototype;return t.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+ee(r,!0)+'">'+(n?e:ee(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:ee(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=Q(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+ee(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=Q(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ne=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),re=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{n=e+"-"+ ++r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),ie=r.defaults,oe=k,ae=function(){function e(e){this.options=e||ie,this.options.renderer=this.options.renderer||new te,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ne,this.slugger=new re}e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,r,i,o,a,s,c,l,u,d,h,f,p,m,g,y,b,v,_="",w=e.length;for(n=0;n<w;n++)switch((d=e[n]).type){case"space":continue;case"hr":_+=this.renderer.hr();continue;case"heading":_+=this.renderer.heading(this.parseInline(d.tokens),d.depth,oe(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":_+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(l="",c="",o=d.header.length,r=0;r<o;r++)c+=this.renderer.tablecell(this.parseInline(d.tokens.header[r]),{header:!0,align:d.align[r]});for(l+=this.renderer.tablerow(c),u="",o=d.cells.length,r=0;r<o;r++){for(c="",a=(s=d.tokens.cells[r]).length,i=0;i<a;i++)c+=this.renderer.tablecell(this.parseInline(s[i]),{header:!1,align:d.align[i]});u+=this.renderer.tablerow(c)}_+=this.renderer.table(l,u);continue;case"blockquote":u=this.parse(d.tokens),_+=this.renderer.blockquote(u);continue;case"list":for(h=d.ordered,f=d.start,p=d.loose,o=d.items.length,u="",r=0;r<o;r++)y=(g=d.items[r]).checked,b=g.task,m="",g.task&&(v=this.renderer.checkbox(y),p?g.tokens.length>0&&"text"===g.tokens[0].type?(g.tokens[0].text=v+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=v+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:v}):m+=v),m+=this.parse(g.tokens,p),u+=this.renderer.listitem(m,b,y);_+=this.renderer.list(u,h,f);continue;case"html":_+=this.renderer.html(d.text);continue;case"paragraph":_+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;n+1<w&&"text"===e[n+1].type;)u+="\n"+((d=e[++n]).tokens?this.parseInline(d.tokens):d.text);_+=t?this.renderer.paragraph(u):u;continue;default:var k='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(k);throw new Error(k)}return _},t.parseInline=function(e,t){t=t||this.renderer;var n,r,i="",o=e.length;for(n=0;n<o;n++)switch((r=e[n]).type){case"escape":i+=t.text(r.text);break;case"html":i+=t.html(r.text);break;case"link":i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":i+=t.image(r.href,r.title,r.text);break;case"strong":i+=t.strong(this.parseInline(r.tokens,t));break;case"em":i+=t.em(this.parseInline(r.tokens,t));break;case"codespan":i+=t.codespan(r.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(r.tokens,t));break;case"text":i+=t.text(r.text);break;default:var a='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}return i},e}(),se=O,ce=j,le=w,ue=r.getDefaults,de=r.changeDefaults,he=r.defaults;function fe(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=se({},fe.defaults,t||{}),ce(t),n){var r,i=t.highlight;try{r=X.lex(e,t)}catch(e){return n(e)}var o=function(e){var o;if(!e)try{o=ae.parse(r,t)}catch(t){e=t}return t.highlight=i,e?n(e):n(null,o)};if(!i||i.length<3)return o();if(delete t.highlight,!r.length)return o();var a=0;return fe.walkTokens(r,(function(e){"code"===e.type&&(a++,setTimeout((function(){i(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&o()}))}),0))})),void(0===a&&o())}try{var s=X.lex(e,t);return t.walkTokens&&fe.walkTokens(s,t.walkTokens),ae.parse(s,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+le(e.message+"",!0)+"</pre>";throw e}}return fe.options=fe.setOptions=function(e){return se(fe.defaults,e),de(fe.defaults),fe},fe.getDefaults=ue,fe.defaults=he,fe.use=function(e){var t=se({},e);if(e.renderer&&function(){var n=fe.defaults.renderer||new te,r=function(t){var r=n[t];n[t]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=e.renderer[t].apply(n,o);return!1===s&&(s=r.apply(n,o)),s}};for(var i in e.renderer)r(i);t.renderer=n}(),e.tokenizer&&function(){var n=fe.defaults.tokenizer||new U,r=function(t){var r=n[t];n[t]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=e.tokenizer[t].apply(n,o);return!1===s&&(s=r.apply(n,o)),s}};for(var i in e.tokenizer)r(i);t.tokenizer=n}(),e.walkTokens){var n=fe.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}fe.setOptions(t)},fe.walkTokens=function(e,t){for(var r,i=n(e);!(r=i()).done;){var o=r.value;switch(t(o),o.type){case"table":for(var a,s=n(o.tokens.header);!(a=s()).done;){var c=a.value;fe.walkTokens(c,t)}for(var l,u=n(o.tokens.cells);!(l=u()).done;)for(var d,h=n(l.value);!(d=h()).done;){var f=d.value;fe.walkTokens(f,t)}break;case"list":fe.walkTokens(o.items,t);break;default:o.tokens&&fe.walkTokens(o.tokens,t)}}},fe.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=se({},fe.defaults,t||{}),ce(t);try{var n=X.lexInline(e,t);return t.walkTokens&&fe.walkTokens(n,t.walkTokens),ae.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+le(e.message+"",!0)+"</pre>";throw e}},fe.Parser=ae,fe.parser=ae.parse,fe.Renderer=te,fe.TextRenderer=ne,fe.Lexer=X,fe.lexer=X.lex,fe.Tokenizer=U,fe.Slugger=re,fe.parse=fe,fe}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(13),i=n(0),o=n(12),a=n(2),s=n(5),c=n(18),l=n(70),u=n(11),d=n(9),h=n(26),f=n(8),p=n(1);async function m(e,t,n,r){const o=Object(f.a)(e),a=document.createElement("div");n.style.pointerEvents="none";const s=t===p.B?388:t.offsetLeft,c=t===p.B?window.innerHeight-36-370:t.offsetTop;t===p.B&&a.classList.add("is-that-hardcoded-shit"),r?Object(d.d)("element.valid"):Object(d.d)("element.valid.rediscover"),a.classList.add("elem-found-wrapper");const l=s-Object(f.c)()-(n.offsetLeft-Object(f.c)()),u=c-Object(f.c)()-(n.offsetTop-Object(f.c)()),h=(.95*(l**2+(4*u)**2))**.4,m=Math.max(260,Math.min(250+h,1e3));a.setAttribute("style",(t===p.B?"--offset-scale:2;":"")+"--offset-x:"+l+"px;--offset-y:"+u+"px;--offset-x-zero:"+(0===l?"1":"0")+";left:"+(n.offsetLeft-Object(f.c)())+"px;top:"+(n.offsetTop-Object(f.c)())+"px;--calculated-animation-time:"+m+"ms"),a.appendChild(o),p.d.appendChild(a),await Object(i.b)(m+250),a.remove(),n.style.pointerEvents=""}var g=n(7),y=n.n(g);function b(e,t,n){if(!e)return;const g=document.querySelector(`[data-element="${e.id}"]`);if(g)return Object(u.c)("rediscoveries"),void(t?m(e,t,g,!1):g.classList.contains("animate-bounce")||(g.classList.add("animate-bounce"),setTimeout(()=>{g.classList.remove("animate-bounce")},600)));n||Object(a.z)(Object(s.c)(),e.id);const v=Object(f.a)(e);v.addEventListener("click",async t=>{if(p.E&&(document.querySelector("#tutorial1").classList.remove("tutorial-visible"),Object(p.n)(!1),Object(a.w)("tutorial1",!0),setTimeout(()=>{document.querySelector("#tutorial1").style.display="none"},250)),p.e){const t=e.id,n=p.e.id,o=p.e,[l]=await Promise.all([(async()=>{const e=await Object(s.c)().getCombo(Object(i.h)(t,n));return 0===e.length?null:Promise.all(e.map(e=>Object(s.c)().getElement(e)))})(),Object(p.c)(v)]);if(v.classList.remove("restock"),v.offsetWidth,v.classList.add("restock"),l)Object(u.c)("combinationsSuccess"),l.forEach(e=>{b(e,v)});else{Object(u.c)("combinationsFailure"),async function(e){const t=document.createElement("div");t.className="elem error";const n=document.createElement("div");n.classList.add("elem-error-wrapper"),n.setAttribute("style","left:"+(e.offsetLeft-Object(f.c)())+"px;top:"+(e.offsetTop-Object(f.c)())+"px"),n.appendChild(t),p.d.appendChild(n),Object(d.d)("element.invalid"),await Object(i.b)(850),n.remove()}(v);if(Object(s.c)("suggestion")){const[t,n,s]=Object(c.randomOf)([e,o]).display.color.split("_");Object(p.m)({color:{base:t,lightness:parseFloat(s),saturation:parseFloat(n)},text:"New Element"},e,o),p.s.innerHTML=Object(i.e)(e.display.text),p.s.className="elem "+Object(r.b)(e.display),p.D.innerHTML=Object(i.e)(o.display.text),p.D.className="elem "+Object(r.b)(o.display),document.querySelector('[data-suggest-prompt="left"]').innerHTML=Object(i.e)(e.display.text),document.querySelector('[data-suggest-prompt="right"]').innerHTML=Object(i.e)(o.display.text),p.B.style.display="",Object(f.d)(),p.p.classList.add("animate-prompt"),p.p.style.width="",p.p.style.width=p.p.offsetWidth+5+"px",p.z.classList.add("no"),p.u.classList.add("no"),p.t.classList.add("no"),p.w.classList.add("no"),p.v.classList.add("no"),p.y.classList.add("no"),p.x.classList.add("no"),p.q.classList.add("animate-in"),Object(a.i)("tutorial2",!1)||(Object(p.o)(!0),document.querySelector("#tutorial2").classList.add("tutorial-visible"),document.querySelector("#tutorial2").style.display="block"),Object(a.i)("always-suggest",!1)&&(p.p.style.width="486px",document.querySelector(".suggest-label").dispatchEvent(new MouseEvent("click")))}}}else{Object(d.d)("element.pickup"),Object(u.c)("elementsPickedUp"),Object(p.j)(v.getBoundingClientRect()),v.classList.remove("restock"),v.offsetWidth,v.classList.add("restock"),Object(p.h)(e);const n=Object(f.a)(e);n.classList.add("held");const r=document.createElement("div");r.setAttribute("style","--offset-x:"+(p.f.left-8-t.pageX)+"px;--offset-y:"+(p.f.top-8-(t.pageY+4))+"px;left:"+t.pageX+"px;top:"+(t.pageY+4)+"px"),r.classList.add("elem-held-wrapper"),r.appendChild(n),document.body.appendChild(r),Object(p.i)(r)}}),v.addEventListener("contextmenu",async t=>{var n;try{Object(u.c)("infoOpened"),p.g.classList.remove("animate-in"),Object(p.c)(),t.preventDefault(),e.stats||(e.stats={}),v.style.height="150px",v.style.top="-10px",v.scrollIntoView({block:"nearest"}),v.style.height="",v.style.top="",await Object(i.b)(0),p.g.style.display="flex";const a=v.getBoundingClientRect(),s=Math.max(8,Math.min(window.innerWidth-462-8,a.left-17)),c=Math.max(38,Math.min(window.innerHeight-402-8,a.top-17));p.g.style.left=s+"px",p.g.style.top=c+"px",p.g.classList.add("animate-in"),Object(p.k)(!0),p.g.querySelectorAll(".info-tab,.info-section").forEach(e=>e.classList.remove("selected")),p.g.querySelector(".info-section-info").classList.add("selected"),p.g.querySelector('[data-info-tab="info"]').classList.add("selected"),p.g.querySelector(".elem").innerHTML=Object(i.e)(e.display.text),p.g.querySelector(".elem").className="elem "+Object(r.b)(e.display),p.g.querySelector("#element-info-title").innerHTML=isNaN(Number(e.id))?"Element Info":"Element #"+Number(e.id),p.g.querySelector("#element-created-date-root").style.display=e.createdOn?"":"none",e.createdOn&&(p.g.querySelector("#element-created-date").innerHTML=""+Object(i.f)(new Date(e.createdOn))),p.g.querySelector("#info-tier").style.display=void 0!==e.stats.treeComplexity?"":"none",void 0!==e.stats.treeComplexity&&(p.g.querySelector("#info-tier").innerHTML=e.stats.treeComplexity?"Tier "+e.stats.treeComplexity:"Starter",p.g.querySelector("#info-tier").setAttribute("data-tier-level",Math.floor(e.stats.treeComplexity/5).toString())),"number"==typeof e.stats.recipeCount&&(p.g.querySelector("#element-recipe-count").innerHTML=e.stats.recipeCount+" "+Object(o.plural)(e.stats.recipeCount,"Recipe")),"number"==typeof e.stats.usageCount&&(p.g.querySelector("#element-usage-count").innerHTML=e.stats.usageCount+" "+Object(o.plural)(e.stats.usageCount,"Use")),p.g.querySelector("#element-comments").innerHTML=((null===(n=e.stats)||void 0===n?void 0:n.comments)||[]).map(e=>e.author?`<p>"${Object(i.e)(e.comment)}" - ${Object(i.e)(e.author)}</p>`:`<p>${Object(i.e)(e.comment)}</p>`).join(""),p.g.querySelector("#element-data-json").innerHTML=JSON.stringify(e,null,2),p.g.querySelector("#element-css-class").innerHTML="."+Object(r.b)(e.display),p.g.querySelector("#element-css-color").innerHTML=y()(getComputedStyle(v).backgroundColor).hex();const d=document.getElementById("element-fundamentals");d.innerHTML="";const f=["fire","water","air","earth"];e.stats.fundamentals&&Object.keys(e.stats.fundamentals).forEach(t=>{const n=document.createElement("div");if(n.classList.add("data-row"),f.includes(t)){const e=document.createElement("img");e.src="/"+t+".svg",n.appendChild(e)}else{const e=document.createElement("strong");e.innerHTML=Object(i.e)(Object(o.capitalize)(t)),n.appendChild(e)}const r=document.createElement("span");r.innerHTML=Object(l.compactMiniNumber)(e.stats.fundamentals[t]),n.appendChild(r),d.appendChild(n)}),p.g.querySelector(".info-equation-container").style.display="",Object(h.b)(e).then(e=>{if(e.parent1){let t=e.parent1,n=e.parent2||e.parent1;p.g.querySelector(".info-equation-container").style.display="",p.g.querySelector("#info-left-element").innerHTML=Object(i.e)(t.elem.display.text),p.g.querySelector("#info-left-element").setAttribute("style",Object(r.a)(t.elem.display)),p.g.querySelector("#info-right-element").innerHTML=Object(i.e)(n.elem.display.text),p.g.querySelector("#info-right-element").setAttribute("style",Object(r.a)(n.elem.display))}else p.g.querySelector(".info-equation-container").style.display="none";Object(h.c)(e)})}catch(e){console.error(e)}}),v.setAttribute("data-element",e.id);const _=e.display.categoryName||e.display.color||"none";let w=p.d.querySelector(`[data-category="${_}"]`);if(!w){const e=document.createElement("h3");e.classList.add("category-header"),e.appendChild(document.createTextNode(Object(f.b)(_))),p.d.appendChild(e),w=document.createElement("div"),w.setAttribute("data-category",_),p.d.appendChild(w)}t?v.style.opacity="0":(v.classList.add("animate-in"),setTimeout(()=>{v.classList.remove("animate-in")},1e3)),w.appendChild(v),t&&m(e,t,v,!0).then(()=>{v.style.opacity="1"})}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(32)("socket.io-parser"),i=n(44),o=n(88),a=n(45),s=n(55);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return l;n+=i}return r("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function f(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){o.removeBlobs(e,(function(e){var n=o.deconstructPacket(e),r=u(n.packet),i=n.buffers;i.unshift(r),t(i)}))}(e,n):n([u(e)])},i(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return f("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(n+1))for(i.nsp="";++n;){if(","===(c=e.charAt(n)))break;if(i.nsp+=c,n===e.length)break}else i.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var c;if(null==(c=e.charAt(n))||Number(c)!=c){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==l&&(i.type===t.ERROR||a(l))))return f("invalid payload");i.data=l}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new h(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(94),i=n(47);e.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(28),i=n(49);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t,n){var r=n(85),i=n(43),o=n(56),a=n(32)("socket.io-client");e.exports=t=c;var s=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),c=i.source,l=i.id,u=i.path,d=s[l]&&u in s[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(a("ignoring socket cache for %s",c),n=o(c,t)):(s[l]||(a("new io instance for %s",c),s[l]=o(c,t)),n=s[l]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=i.protocol,t.connect=c,t.Manager=n(56),t.Socket=n(62)},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){var r=n(52),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var c=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:c}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),c=s-a;return s===a?t=0:r===s?t=(i-o)/c:i===s?t=2+(o-r)/c:o===s&&(t=4+(r-i)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?c/(s+a):c/(2-s-a)),100*n]},a.rgb.hsv=function(e){var t,n,r,i,o,a=e[0]/255,s=e[1]/255,c=e[2]/255,l=Math.max(a,s,c),u=l-Math.min(a,s,c),d=function(e){return(l-e)/6/u+.5};return 0===u?i=o=0:(o=u/l,t=d(a),n=d(s),r=d(c),a===l?i=r-n:s===l?i=1/3+t-r:c===l&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},a.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=i[e];if(t)return t;var n,o,a,s=1/0;for(var c in r)if(r.hasOwnProperty(c)){var l=r[c],u=(o=e,a=l,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));u<s&&(s=u,n=c)}return n},a.keyword.rgb=function(e){return r[e]},a.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,c=e[2]/100;if(0===s)return[o=255*c,o,o];t=2*c-(n=c<.5?c*(1+s):c+s-c*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[l]=255*o;return i},a.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,c,a];case 1:return[s,r,a];case 2:return[a,r,c];case 3:return[a,s,r];case 4:return[c,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(e){var t,n,r,i=e[0],o=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(t=(2-o)*s)<=1?t:2-t)||0),100*(r/=2)]},a.hwb.rgb=function(e){var t,n,r,i,o,a,s,c=e[0]/360,l=e[1]/100,u=e[2]/100,d=l+u;switch(d>1&&(l/=d,u/=d),r=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(r=1-r),i=l+r*((n=1-u)-l),t){default:case 6:case 0:o=n,a=i,s=l;break;case 1:o=i,a=n,s=l;break;case 2:o=l,a=n,s=i;break;case 3:o=l,a=i,s=n;break;case 4:o=i,a=l,s=n;break;case 5:o=n,a=l,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var o=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},a.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},a.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return t=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},a.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=t%1*6,s=a%1,c=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},a.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?a(s=e,o,"day")||a(s,i,"hour")||a(s,r,"minute")||a(s,n,"second")||s+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,n(35).Buffer)},function(e,t,n){var r=n(92),i=n(62),o=n(44),a=n(43),s=n(63),c=n(64),l=n(32)("socket.io-client:manager"),u=n(61),d=n(109),h=Object.prototype.hasOwnProperty;function f(e,t){if(!(this instanceof f))return new f(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=f,f.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},f.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},f.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(f.prototype),f.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},f.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},f.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=s(n,"open",(function(){i.onopen(),e&&e()})),a=s(n,"error",(function(t){if(l("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&o.destroy();var u=setTimeout((function(){l("connect attempt timed out after %d",c),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(a),this},f.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(e,"ping",c(this,"onping"))),this.subs.push(s(e,"pong",c(this,"onpong"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(e){this.decoder.add(e)},f.prototype.ondecoded=function(e){this.emit("packet",e)},f.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},f.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&o()}function o(){~u(r.connecting,n)||r.connecting.push(n)}return n},f.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},f.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},f.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},f.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},f.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(46),i=n(95),o=n(103),a=n(104);t.polling=function(e){var t=!1,n=!1,a=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,c=location.port;c||(c=s?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==s}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!a)throw new Error("JSONP disabled");return new o(e)},t.websocket=a},function(e,t,n){var r=n(48),i=n(50),o=n(28),a=n(36),s=n(60),c=n(37)("engine.io-client:polling");e.exports=u;var l=null!=new(n(46))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),r.call(this,e)}a(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--r||n()}))),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){c("pre-pause writing complete"),--r||n()})))}else n()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(45),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var i=0,s=n.length;i<s;i++)if(e(n[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&e(n[c]))return!0;return!1}}).call(this,n(35).Buffer)},function(e,t,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},a=0,s=0;function c(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=c(+new Date);return e!==r?(a=0,r=e):e+"."+c(a++)}for(;s<64;s++)o[i[s]]=s;l.encode=c,l.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+o[e.charAt(s)];return t},e.exports=l},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(43),i=n(44),o=n(107),a=n(63),s=n(64),c=n(32)("socket.io-client:socket"),l=n(108),u=n(59);e.exports=f;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function f(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",s(this,"onopen")),a(e,"packet",s(this,"onpacket")),a(e,"close",s(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},f.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},f.prototype.emit=function(e){if(d.hasOwnProperty(e))return h.apply(this,arguments),this;var t=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},f.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},f.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},f.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},f.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},f.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},f.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);c("sending ack %j",i),t.packet({type:u(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},f.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(e){return this.flags.compress=e,this},f.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r;(r=n(33))&&r.UNITS&&(r.UNITS.seconds.patterns=["millisecond","msec","ms"],r.UNITS.seconds.patterns=["second","sec","s"],r.UNITS.minutes.patterns=["minute","min","m(?!s)"],r.UNITS.hours.patterns=["hour","hr","h"],r.UNITS.days.patterns=["day","dy","d"],r.UNITS.weeks.patterns=["week","wk","w"],r.UNITS.months.patterns=["month","mon","mo","mth"],r.UNITS.years.patterns=["year","yr","y"],r.UNITS.milliseconds.formats={chrono:"",micro:"ms",short:"msec",long:"millisecond",plural:"milliseconds"},r.UNITS.seconds.formats={chrono:"",micro:"s",short:"sec",long:"second",plural:"seconds"},r.UNITS.minutes.formats={chrono:":",micro:"m",short:"min",long:"minute",plural:"minutes"},r.UNITS.hours.formats={chrono:":",micro:"h",short:"hr",long:"hour",plural:"hours"},r.UNITS.days.formats={chrono:":",micro:"d",short:"day",long:"day",plural:"days"},r.UNITS.weeks.formats={chrono:":",micro:"w",short:"wk",long:"week",plural:"weeks"},r.UNITS.months.formats={chrono:":",micro:"m",short:"mth",long:"month",plural:"months"},r.UNITS.years.formats={chrono:":",micro:"y",short:"yr",long:"year",plural:"years"})},function(e,t,n){var r;(r=n(33))&&r.UNITS&&(r.UNITS.seconds.patterns=["millisecond","msec","ms"],r.UNITS.seconds.patterns=["second","sec","s"],r.UNITS.minutes.patterns=["minute","min","m(?!s)"],r.UNITS.hours.patterns=["hour","hr","h"],r.UNITS.days.patterns=["day","dy","d"],r.UNITS.weeks.patterns=["week","wk","w"],r.UNITS.months.patterns=["month","mon","mo","mth"],r.UNITS.years.patterns=["year","yr","y"],r.UNITS.milliseconds.formats={chrono:"",micro:"ms",short:"msec",long:"millisecond",plural:"milliseconds"},r.UNITS.seconds.formats={chrono:"",micro:"s",short:"sec",long:"second",plural:"seconds"},r.UNITS.minutes.formats={chrono:":",micro:"m",short:"min",long:"minute",plural:"minutes"},r.UNITS.hours.formats={chrono:":",micro:"h",short:"hr",long:"hour",plural:"hours"},r.UNITS.days.formats={chrono:":",micro:"d",short:"day",long:"day",plural:"days"},r.UNITS.weeks.formats={chrono:":",micro:"w",short:"wk",long:"week",plural:"weeks"},r.UNITS.months.formats={chrono:":",micro:"m",short:"mth",long:"month",plural:"months"},r.UNITS.years.formats={chrono:":",micro:"y",short:"yr",long:"year",plural:"years"})},function(e,t,n){var r;(r=n(33))&&r.UNITS&&(r.UNITS.seconds.patterns=["millisecond","msec","ms"],r.UNITS.seconds.patterns=["second","sec","s"],r.UNITS.minutes.patterns=["minute","min","m(?!s)"],r.UNITS.hours.patterns=["hour","hr","h"],r.UNITS.days.patterns=["day","dy","d"],r.UNITS.weeks.patterns=["week","wk","w"],r.UNITS.months.patterns=["month","mon","mo","mth"],r.UNITS.years.patterns=["year","yr","y"],r.UNITS.milliseconds.formats={chrono:"",micro:"ms",short:"msec",long:"millisecondo",plural:"millisecondi"},r.UNITS.seconds.formats={chrono:"",micro:"s",short:"sec",long:"secondo",plural:"secondi"},r.UNITS.minutes.formats={chrono:":",micro:"m",short:"min",long:"minuto",plural:"minuti"},r.UNITS.hours.formats={chrono:":",micro:"h",short:"hr",long:"ora",plural:"ore"},r.UNITS.days.formats={chrono:":",micro:"d",short:"day",long:"giorno",plural:"giorni"},r.UNITS.weeks.formats={chrono:":",micro:"w",short:"wk",long:"settimana",plural:"settimane"},r.UNITS.months.formats={chrono:":",micro:"m",short:"mth",long:"mese",plural:"mesi"},r.UNITS.years.formats={chrono:":",micro:"y",short:"yr",long:"anno",plural:"anni"})},function(e,t,n){!function(t){"use strict";var r={};e.exports?(r.bytesToHex=n(83).bytesToHex,r.convertString=n(84),e.exports=s):(r.bytesToHex=t.convertHex.bytesToHex,r.convertString=t.convertString,t.sha256=s);var i=[];!function(){function e(e){for(var t=Math.sqrt(e),n=2;n<=t;n++)if(!(e%n))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)e(n)&&(i[r]=t(Math.pow(n,1/3)),r++),n++}();var o=[],a=function(e,t,n){for(var r=e[0],a=e[1],s=e[2],c=e[3],l=e[4],u=e[5],d=e[6],h=e[7],f=0;f<64;f++){if(f<16)o[f]=0|t[n+f];else{var p=o[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=o[f-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;o[f]=m+o[f-7]+y+o[f-16]}var b=r&a^r&s^a&s,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&d)+i[f]+o[f];h=d,d=u,u=l,l=c+_|0,c=s,s=a,a=r,r=_+(v+b)|0}e[0]=e[0]+r|0,e[1]=e[1]+a|0,e[2]=e[2]+s|0,e[3]=e[3]+c|0,e[4]=e[4]+l|0,e[5]=e[5]+u|0,e[6]=e[6]+d|0,e[7]=e[7]+h|0};function s(e,t){e.constructor===String&&(e=r.convertString.UTF8.stringToBytes(e));var n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t}(e),o=8*e.length;i[o>>5]|=128<<24-o%32,i[15+(o+64>>9<<4)]=o;for(var s=0;s<i.length;s+=16)a(n,i,s);var c=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t}(n);return t&&t.asBytes?c:t&&t.asString?r.convertString.bytesToString(c):r.bytesToHex(c)}s.x2=function(e,t){return s(s(e,{asBytes:!0}),t)}}(this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={4:"K",7:"M",10:"B",13:"T",16:"Q",19:"q",22:"S",25:"s",28:"O",31:"N",34:"D"};function i(e){if(/\d+\.?\d*e[\+\-]*\d+/i.test(String(e))){const n="0",r=String(e).toLowerCase().split("e"),i=Number(r.pop());let o=Math.abs(Number(i));const a=i/o,s=r[0].split(".");if(-1===a)s[0]=Math.abs(Number(s[0])).toString(),e="-"+n+"."+new Array(o).join(n)+s.join("");else{var t=s[1];t&&(o-=t.length),e=s.join("")+new Array(o+1).join(n)}}return e.toString()}function o(e,t,n){let r,i,o;const a=t||",",s=n||".";switch(typeof e){case"string":if(e.length<("-"===e[0]?5:4))return e;i=e,r=Number("."!==s?i.replace(s,"."):i);break;case"number":i=String(e),r=e;break;default:return e}if(-1e3<r&&r<1e3||isNaN(r)||!isFinite(r))return i;let c=i.lastIndexOf(s);return c>-1&&(o=i.slice(c),i=i.slice(0,-o.length)),i=function(e,t){const n="-"===e[0]?1:0;let r=(e.length-n-1)%3+1+n;const i=[e.slice(0,r)];for(;r<e.length;)i.push(e.substr(r,3)),r+=3;return i.join(t)}(i,a),o?i+o:i}var a=o,s=function(e,t){return function(n){return o(n,e,t)}};function c(e){if(/\d+\.?\d*e[\+\-]*\d+/i.test(String(e))){const n="0",r=String(e).toLowerCase().split("e"),i=Number(r.pop());let o=Math.abs(Number(i));const a=i/o,s=r[0].split(".");if(-1===a)s[0]=Math.abs(Number(s[0])).toString(),e="-"+n+"."+new Array(o).join(n)+s.join("");else{var t=s[1];t&&(o-=t.length),e=s.join("")+new Array(o+1).join(n)}}return e.toString()}a.bindWith=s,t.compactMiniNumber=function(e){if("number"!=typeof e)throw new TypeError("The number provided must be a number.");if(e>=1e36)return e.toString();if(Math.floor(e)<1e3)return Math.floor(e).toString();const t=r[3*Math.floor((i(e).length-1)/3)+1];return i(e).replace(/\B(?=(\d{3})+(?!\d))/g,".").substring(0,3).replace(/\.$/,"")+t},t.compactNumber=function(e,t){if("number"!=typeof e)throw new TypeError("The number provided must be a number.");if(e>=1e36)return e.toString();if(Math.floor(e)<1e7){const n=a(Math.round(10*e)/10);return n.includes(".")?n:t?n+".0":n}const n=r[3*Math.floor((c(e).length-1)/3)+1];return c(e).replace(/\B(?=(\d{3})+(?!\d))/g,".").substring(0,4).replace(/\.$/,"")+n},t.compactTime=function(e){if("number"!=typeof e)throw new TypeError("The amount of seconds provided must be a number.");if(e<0)throw new TypeError("The amount of seconds provided must be a positive number.");function t(e,t){return(e=Math.floor(e))+" "+t+(1===e?"":"s")}return e<120?t(e,"Second"):e<3600?t(e/60,"Minute")+" "+t(e%60,"Second"):e<86400?t(e/3600,"Hour")+" "+t(e%3600/60,"Minute")+" "+t(e%60,"Second"):t(e/86400,"Day")+" "+t(e%86400/3600,"Hour")+" "+t(e%3600/60,"Minute")+" "+t(e%60,"Second")}},function(e,t,n){!function(t){"use strict";var n=function(){return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var n=t(e).toLowerCase();return(r="application/font-woff",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var r},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise((function(t){e.toBlob(t)})):function(e){return new Promise((function(t){for(var n=window.atob(e.toDataURL().split(",")[1]),r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);t(new Blob([i],{type:"image/png"}))}))}(e)},resolveUrl:function(e,t){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var i=n.createElement("a");return n.body.appendChild(i),r.href=t,i.href=e,i.href},getAndEncode:function(e){s.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());return new Promise((function(t){var n,r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4!==r.readyState)return;if(200!==r.status)return void(n?t(n):o("cannot fetch resource: "+e+", status: "+r.status));var i=new FileReader;i.onloadend=function(){var e=i.result.split(/,/)[1];t(e)},i.readAsDataURL(r.response)},r.ontimeout=function(){n?t(n):o("timeout of 30000ms occured while fetching resource: "+e)},r.responseType="blob",r.timeout=3e4,r.open("GET",e,!0),r.send(),s.impl.options.imagePlaceholder){var i=s.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(n=i[1])}function o(e){console.error(e),t("")}}))},uid:(e=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}),delay:function(e){return function(t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}},asArray:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src=e}))},width:function(e){var t=n(e,"border-left-width"),r=n(e,"border-right-width");return e.scrollWidth+t+r},height:function(e){var t=n(e,"border-top-width"),r=n(e,"border-bottom-width");return e.scrollHeight+t+r}};var e;function t(e){var t=/\.([^\.\/]*?)$/g.exec(e);return t?t[1]:""}function n(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}}(),r=function(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,n,o){return function(){return!t(e)}()?Promise.resolve(e):Promise.resolve(e).then(r).then((function(t){var r=Promise.resolve(e);return t.forEach((function(e){r=r.then((function(t){return i(t,e,n,o)}))})),r}))},shouldProcess:t,impl:{readUrls:r,inline:i}};function t(t){return-1!==t.search(e)}function r(t){for(var r,i=[];null!==(r=e.exec(t));)i.push(r[1]);return i.filter((function(e){return!n.isDataUrl(e)}))}function i(e,t,r,i){return Promise.resolve(t).then((function(e){return r?n.resolveUrl(e,r):e})).then(i||n.getAndEncode).then((function(e){return n.dataAsUrl(e,n.mimeType(t))})).then((function(r){return e.replace(function(e){return new RegExp("(url\\(['\"]?)("+n.escape(e)+")(['\"]?\\))","g")}(t),"$1"+r+"$3")}))}}(),i=function(){return{resolveAll:function(){return e(document).then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:e}};function e(){return Promise.resolve(n.asArray(document.styleSheets)).then((function(e){var t=[];return e.forEach((function(e){try{n.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}})),t})).then((function(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return r.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(t){return t.map(e)}));function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return r.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function t(i){return i instanceof Element?function(e){var t=e.style.getPropertyValue("background");return t?r.inlineAll(t).then((function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}(i).then((function(){return i instanceof HTMLImageElement?e(i).inline():Promise.all(n.asArray(i.childNodes).map((function(e){return t(e)})))})):Promise.resolve(i)},impl:{newImage:e}};function e(e){return{inline:function(t){return n.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||n.getAndEncode).then((function(t){return n.dataAsUrl(t,n.mimeType(e.src))})).then((function(t){return new Promise((function(n,r){e.onload=n,e.onerror=r,e.src=t}))}))}}}}(),a={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:c,toPng:function(e,t){return l(e,t||{}).then((function(e){return e.toDataURL()}))},toJpeg:function(e,t){return l(e,t=t||{}).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))},toBlob:function(e,t){return l(e,t||{}).then(n.canvasToBlob)},toPixelData:function(e,t){return l(e,t||{}).then((function(t){return t.getContext("2d").getImageData(0,0,n.width(e),n.height(e)).data}))},impl:{fontFaces:i,images:o,util:n,inliner:r,options:{}}};function c(e,t){return function(e){void 0===e.imagePlaceholder?s.impl.options.imagePlaceholder=a.imagePlaceholder:s.impl.options.imagePlaceholder=e.imagePlaceholder;void 0===e.cacheBust?s.impl.options.cacheBust=a.cacheBust:s.impl.options.cacheBust=e.cacheBust}(t=t||{}),Promise.resolve(e).then((function(e){return function e(t,r,i){return i||!r||r(t)?Promise.resolve(t).then((function(e){return e instanceof HTMLCanvasElement?n.makeImage(e.toDataURL()):e.cloneNode(!1)})).then((function(e){return o(t,e,r)})).then((function(e){return function(e,t){return t instanceof Element?Promise.resolve().then(r).then(i).then(o).then(a).then((function(){return t})):t;function r(){var r,i;r=window.getComputedStyle(e),i=t.style,r.cssText?i.cssText=r.cssText:function(e,t){n.asArray(e).forEach((function(n){t.setProperty(n,e.getPropertyValue(n),e.getPropertyPriority(n))}))}(r,i)}function i(){[":before",":after"].forEach((function(r){!function(r){var i=window.getComputedStyle(e,r),o=i.getPropertyValue("content");if(""===o||"none"===o)return;var a=n.uid();t.className=t.className+" "+a;var s=document.createElement("style");s.appendChild(function(e,t,r){var i="."+e+":"+t,o=r.cssText?function(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}(r):function(e){return n.asArray(e).map((function(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")})).join("; ")+";"}(r);return document.createTextNode(i+"{"+o+"}")}(a,r,i)),t.appendChild(s)}(r)}))}function o(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function a(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach((function(e){var n=t.getAttribute(e);n&&t.style.setProperty(e,n)})))}}(t,e)})):Promise.resolve();function o(t,r,i){var o=t.childNodes;return 0===o.length?Promise.resolve(r):a(r,n.asArray(o),i).then((function(){return r}));function a(t,n,r){var i=Promise.resolve();return n.forEach((function(n){i=i.then((function(){return e(n,r)})).then((function(e){e&&t.appendChild(e)}))})),i}}}(e,t.filter,!0)})).then(u).then(d).then((function(e){t.bgcolor&&(e.style.backgroundColor=t.bgcolor);t.width&&(e.style.width=t.width+"px");t.height&&(e.style.height=t.height+"px");t.style&&Object.keys(t.style).forEach((function(n){e.style[n]=t.style[n]}));return e})).then((function(r){return function(e,t,r){return Promise.resolve(e).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(n.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+r+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))}(r,t.width||n.width(e),t.height||n.height(e))}))}function l(e,t){return c(e,t).then(n.makeImage).then(n.delay(100)).then((function(r){var i=function(e){var r=document.createElement("canvas");if(r.width=t.width||n.width(e),r.height=t.height||n.height(e),t.bgcolor){var i=r.getContext("2d");i.fillStyle=t.bgcolor,i.fillRect(0,0,r.width,r.height)}return r}(e);return i.getContext("2d").drawImage(r,0,0),i}))}function u(e){return i.resolveAll().then((function(t){var n=document.createElement("style");return e.appendChild(n),n.appendChild(document.createTextNode(t)),e}))}function d(e){return o.inlineAll(e).then((function(){return e}))}e.exports=s}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.listeners=new Set}addListener(e){return this.on(e)}removeListener(e){return this.off(e)}on(e){this.listeners.add(e)}off(e){this.listeners.delete(e)}removeAllListeners(){this.listeners.clear()}emit(...e){this.listeners.forEach(t=>t(...e))}}class i{constructor(e){this.emitter=new r,this.value=e}get(){return this.value}set(e){this.value=e,this.emitter.emit(e)}map(e,...t){this.value=e(this.value),this.emitter.emit(this.value)}addListener(e){this.emitter.addListener(e)}onChange(e){this.emitter.addListener(e)}removeListener(e){this.emitter.removeListener(e)}offChange(e){this.emitter.removeListener(e)}}const o={};let a;t.SimpleState=i,t.StorageState=class extends i{constructor(e,t){if(e in o)return o[e];super(function(e,t){try{if(localStorage.getItem(e))return JSON.parse(localStorage.getItem(e)||"!")}catch(e){}return t}(e,t)),this.name=e,this.initialValue=t,this.onChange(t=>{localStorage.setItem(e,JSON.stringify(t))})}reset(){localStorage.removeItem(name),this.set(this.initialValue)}},t.hookFromState=function(e){a||(a=n(!function(){var e=new Error("Cannot find module 'react'");throw e.code="MODULE_NOT_FOUND",e}()));const t=()=>e.get();return function(){const[n,r]=a.useState(t);return a.useLayoutEffect(()=>{function t(e){r(()=>e)}return e.addListener(t),()=>{e.removeListener(t)}},[]),n}}},function(e,t,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,a){var s=o.URL||o.webkitURL,c=document.createElement("a");n=n||e.name||"download",c.download=n,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):r(c.href)?t(e,n,a):i(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var a="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,d=u.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?r.apply(t,i):r)||(e.exports=o)}).call(this,n(21))},function(e,t){var n=[[/\*/g,"\\*","asterisks"],[/#/g,"\\#","number signs"],[/\//g,"\\/","slashes"],[/\(/g,"\\(","parentheses"],[/\)/g,"\\)","parentheses"],[/\[/g,"\\[","square brackets"],[/\]/g,"\\]","square brackets"],[/</g,"&lt;","angle brackets"],[/>/g,"&gt;","angle brackets"],[/_/g,"\\_","underscores"]];e.exports=function(e,t){return t=t||[],n.reduce((function(e,n){var r=n[2];return r&&-1!==t.indexOf(r)?e:e.replace(n[0],n[1])}),e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r,i,o,a=n(0),s=n(4),c=n(11),l=n(6),u=n(31),d=n.n(u),h=n(9),f=n(24),p=n(2),m=navigator.userAgent,g=navigator.appName,y=""+parseFloat(navigator.appVersion),b=parseInt(navigator.appVersion,10);-1!=(i=m.indexOf("Opera"))?(g="Opera",y=m.substring(i+6),-1!=(i=m.indexOf("Version"))&&(y=m.substring(i+8))):-1!=(i=m.indexOf("MSIE"))?(g="Microsoft Internet Explorer",y=m.substring(i+5)):-1!=(i=m.indexOf("Edg"))?(g="Microsoft Edge",y=m.substring(i+7)):-1!=(i=m.indexOf("Chrome"))?(g="Google Chrome",y=m.substring(i+7)):-1!=(i=m.indexOf("Safari"))?(g="Safari",y=m.substring(i+7),-1!=(i=m.indexOf("Version"))&&(y=m.substring(i+8))):-1!=(i=m.indexOf("Firefox"))?(g="Mozilla Firefox",y=m.substring(i+8)):(r=m.lastIndexOf(" ")+1)<(i=m.lastIndexOf("/"))&&(g=m.substring(r,i),y=m.substring(i+1),g.toLowerCase()==g.toUpperCase()&&(g=navigator.appName)),-1!=(o=y.indexOf(";"))&&(y=y.substring(0,o)),-1!=(o=y.indexOf(" "))&&(y=y.substring(0,o)),b=parseInt(""+y,10),isNaN(b)&&(y=""+parseFloat(navigator.appVersion),b=parseInt(navigator.appVersion,10));var v="Unknown OS";-1!=navigator.appVersion.indexOf("Win")&&(v="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(v="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(v="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(v="Linux");var _=g,w=y,k=v,x=n(39),S=n.n(x);function E(){document.querySelectorAll("[data-reset-button]").forEach(e=>{e.addEventListener("click",async()=>{var t,n;const r=e.getAttribute("data-reset-button");"build"===r?await Object(s.b)({title:"Re-download game bundle?",text:"This may help fix updates. It will not modify user data.",trueButton:"Reset"})&&(localStorage.setItem("auto_start","true"),localStorage.removeItem("cache"),await caches.has("ELEMENTAL")&&caches.delete("ELEMENTAL"),location.reload()):"themes"===r?"delete themes"===(null===(t=await Object(s.e)({title:"Clear Downloaded Themes?",text:'Type "Delete Themes" to confirm.'}))||void 0===t?void 0:t.toLowerCase())&&(await Object(p.u)(),localStorage.removeItem("themes-enabled"),location.reload()):"all"===r&&"delete all data"===(null===(n=await Object(s.e)({title:"Delete Everything?",text:'Clear Packs, Themes, and ALL PROGRESS on ALL SERVERS? You will be logged out, unlinking your suggestions from this account. This will not remove your created suggestions from the server. Type "Delete All Data" to confirm.'}))||void 0===n?void 0:n.toLowerCase())&&(localStorage.clear(),localStorage.setItem("clear_idb","1"),location.reload())})}),document.querySelector("#dump-everything").addEventListener("click",async()=>{var e=new S.a;e.file("readme.txt",["This is a data dump for Elemental 4","","Elemental v"+n(34).version,"Built on 2022-03-05 23:16",`${_} ${w} on ${k}`,"Exported on "+Object(a.f)(new Date)].join("\n")),await new Promise(t=>{indexedDB.open("ELEMENTAL").onsuccess=function(){!function(e,t){const n={},r=new Set(e.objectStoreNames);if(0===r.size)t(null,JSON.stringify(n));else{const i=Array.from(r),o=e.transaction(i,"readonly");o.onerror=e=>t(e,null),i.forEach(e=>{const r={};o.objectStore(e).openCursor().onsuccess=o=>{const a=o.target.result;a?(r[a.key]=a.value,a.continue()):(n[e]=r,i.length===Object.keys(n).length&&t(null,n))}})}}(this.result,(n,r)=>{Object.keys(r).forEach(t=>{"local-forage-detect-blob-support"!==t&&e.file(t+".json",JSON.stringify(r[t],null,2))}),t()})}});const t={};for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);t[n]=localStorage.getItem(n)}e.file("local_storage.json",JSON.stringify(t,null,2)),e.generateAsync({type:"blob"}).then((function(e){saveAs(e,`Elem4-${Date.now()}.zip`)}))})}var O=n(14),A=n(10),C=n(74),T=n.n(C),j=n(15),I=n(5);async function L(){let e=!1;const t=document.querySelector("#dialog-settings");let n="";async function r(e){if("theme"===n&&"theme"!==e&&f.d&&(await Object(l.n)(),Object(f.b)(!1)),n=e,t.querySelectorAll("[data-settings]").forEach(t=>{t.classList[t.getAttribute("data-settings")===e?"add":"remove"]("selected")}),t.querySelectorAll("[data-action]").forEach(t=>{t.classList[t.getAttribute("data-action")===e?"add":"remove"]("selected")}),"stats"===e){const e=document.querySelector(".settings-stats");e.innerHTML="",Object(c.b)().then(t=>{e.innerHTML=`<h2>Statistics for Current Save File</h2><table><tbody>${t.map(e=>`<tr><td><strong>${e[0]}</strong></td><td>${e[1]}</td></tr>`).join("")}</tbody></table>`})}"reset"===e&&P()}document.querySelectorAll(".settings-category,a[data-action]").forEach(n=>{n.addEventListener("click",async()=>{const i=n.getAttribute("data-action");"settings-close"===i?(e=!1,f.d&&(Object(f.b)(!1),await Object(l.n)()),Object(s.f)(t)):(Object(h.d)("dialog.button"),r(i))})}),document.querySelector("[data-action='open-settings']").addEventListener("click",()=>{e||(document.querySelector(".animate-panel")&&document.querySelector(".suggest-close").dispatchEvent(new MouseEvent("click")),e=!0,Object(s.g)(t),r("general"))}),document.querySelector("#open-server-settings").addEventListener("click",()=>{e||(document.querySelector(".animate-panel")&&document.querySelector(".suggest-close").dispatchEvent(new MouseEvent("click")),e=!0,Object(s.g)(t),r("server"))}),function(){Object(p.i)("always-suggest",!1)&&(document.querySelector("#always-suggest").checked=!0),Object(p.i)("show-category-names",!1)&&(document.querySelector("#show-category-names").checked=!0,document.body.classList.add("config-show-category-names"));const e=Object(p.k)("element-scale","normal");document.body.setAttribute("data-element-scale",e),document.querySelector("#element-scale").value=e,Object(p.i)("config-play-startup-sound",!0)&&(document.querySelector("#play-startup-sound").checked=!0),Object(p.i)("config-play-news-sound",!0)&&(document.querySelector("#play-news-sound").checked=!0),Object(p.i)("config-show-internal-servers",!1)&&(document.querySelector("#show-internal-servers").checked=!0),document.querySelector("#show-category-names").addEventListener("click",e=>{const t=e.currentTarget.checked;Object(p.w)("show-category-names",t),document.body.classList[t?"add":"remove"]("config-show-category-names")}),document.querySelector("#always-suggest").addEventListener("click",e=>{const t=e.currentTarget.checked;Object(p.w)("always-suggest",t)}),document.querySelector("#play-startup-sound").addEventListener("click",e=>{const t=e.currentTarget.checked;Object(p.w)("config-play-startup-sound",t)}),document.querySelector("#play-news-sound").addEventListener("click",e=>{const t=e.currentTarget.checked;Object(p.w)("config-play-news-sound",t)}),document.querySelector("#show-internal-servers").addEventListener("click",e=>{const t=e.currentTarget.checked;Object(p.w)("config-show-internal-servers",t),Object(p.q)(null,null)}),document.querySelector("#element-scale").addEventListener("click",e=>{const t=e.currentTarget.value;Object(p.y)("element-scale",t),document.body.setAttribute("data-element-scale",t)})}(),E(),function(){document.querySelector("#server-connect-main").addEventListener("click",()=>{Object(I.b)(A.d[0],null,null)}),document.querySelector("#server-add").addEventListener("click",async()=>{const e=await Object(s.e)({title:"Add Server",text:"Paste the Server URL here.",confirmButton:"Add Server",cancelButton:"Cancel"});e&&await Object(O.a)(e,"server")}),document.querySelector("#server-remove").addEventListener("click",async()=>{const e=Object(I.c)().config;await Object(s.b)({title:"Remove Server",text:`Remove **${T()(e.name||`Untitled Server (type=${e.type})`)}**? This will remove all downloaded server data, and your local save files.`})&&await Object(p.B)(Object(I.c)().baseUrl)});const e=document.querySelector("#change-server");e.value="internal:change-btn",e.addEventListener("change",async()=>{const t=e.value;if(t&&"internal:change-btn"!==t){const e=Object(j.a)();e.status("Connecting to "+Object(p.s)(t),0),e.show(),Object(A.i)(t),document.querySelector(".suggest-close").dispatchEvent(new MouseEvent("click"));try{await Object(I.b)(t,null,e)}catch(e){await Object(s.c)({title:"Server Connection Error",parts:[`Could not connect to \`${Object(a.e)(t)}\``,`\`${e.stack}\``]})}e.dispose()}e.value="internal:change-btn"});const t=document.querySelector("#change-savefile");t.addEventListener("change",async()=>{const e=t.value;e.startsWith("save:")&&Object(I.f)(e.slice(5))});const n=document.querySelector("#modify-savefile");n.addEventListener("change",async()=>{const e=n.value,r=Object(I.c)();if("create"===e){const e=await Object(s.e)({title:"Create Save File",text:"Enter the savefile name",defaultInput:"Save #"+(t.options.length+1),confirmButton:"Create"});e&&(await Object(p.d)(r,e),Object(I.e)())}else if("rename"===e){const e=await Object(s.e)({title:"Rename Save File",text:"Enter the savefile name",defaultInput:""+t.options[t.selectedIndex].text,confirmButton:"Rename"});e&&(await Object(p.t)(r,await Object(p.h)(r),e),Object(I.e)())}else if("delete"===e){await Object(s.b)({title:"Delete Save File",text:"Are you sure you want to delete this save file?",trueButton:"Delete",falseButton:"Keep"})&&(await Object(p.e)(r,await Object(p.h)(r)),Object(p.v)(r,(await Object(p.g)(r))[0].id),Object(I.e)())}n.value="title"})}(),Object(f.c)(),function(){const e=Object(p.j)("volume-sound",1),t=Object(p.j)("volume-music",.5);document.querySelector('[data-volume-slider="sound"]').value=100*e,document.querySelector('[data-volume-display="sound"]').innerHTML=Object(a.e)(Math.floor(100*e)+"%"),document.querySelector('[data-volume-slider="sound"]').addEventListener("input",e=>{Object(p.x)("volume-sound",e.currentTarget.value/100),document.querySelector('[data-volume-display="sound"]').innerHTML=Object(a.e)(e.currentTarget.value+"%")}),document.querySelector('[data-volume-slider="music"]').value=100*t,document.querySelector('[data-volume-display="music"]').innerHTML=Object(a.e)(Math.floor(100*t)+"%"),document.querySelector('[data-volume-slider="music"]').addEventListener("input",e=>{Object(p.x)("volume-music",e.currentTarget.value/100),document.querySelector('[data-volume-display="music"]').innerHTML=Object(a.e)(e.currentTarget.value+"%"),Object(h.f)()})}(),await P()}async function P(){try{const{quota:e,usage:t,usageDetails:n}=await navigator.storage.estimate();if(document.getElementById("storage-no-anything").style.display="none",document.querySelector("#storage-quota-used").innerHTML=Object(a.e)(d()(t)),document.querySelector("#storage-quota-total").innerHTML=Object(a.e)(d()(e)),n){const e=n.caches||0,t=n.indexedDB||0,r=n.serviceWorkerRegistrations||0,i=e+t+r;document.getElementById("storage-bar").innerHTML=[e>0&&`<div style='flex:1 1 ${e/i*100}%' class='storage-caches'></div>`,t>0&&`<div style='flex:1 1 ${t/i*100}%' class='storage-indexedDB'></div>`,r>0&&`<div style='flex:1 1 ${r/i*100}%' class='storage-workers'></div>`].filter(Boolean).join(""),document.getElementById("storage-breakdown").innerHTML=[e>0&&`<tr><td style='width:max-content'><strong>${d()(e)}</strong></td><td style='display:flex;align-items:center;justify-content:center'><span class='inline-storage-icon storage-caches'></span></td><td>Game and Theme Caches</td></tr>`,t>0&&`<tr><td style='width:max-content'><strong>${d()(t)}</strong></td><td style='display:flex;align-items:center;justify-content:center'><span class='inline-storage-icon storage-indexedDB'></span></td><td>Element and Config Databases</td></tr>`,r>0&&`<tr><td style='width:max-content'><strong>${d()(r)}</strong></td><td style='display:flex;align-items:center;justify-content:center'><span class='inline-storage-icon storage-workers'></span></td><td>Service Worker</td></tr>`].filter(Boolean).join(""),document.getElementById("storage-no-breakdown").style.display="none"}else document.getElementById("storage-yes-breakdown").style.display="none"}catch(e){document.getElementById("storage-yes-breakdown").style.display="none",document.getElementById("storage-no-breakdown").style.display="none"}}},function(e,t,n){e.exports=n(77)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SKIPPED_UPDATES",(function(){return SKIPPED_UPDATES}));var _settings_settings__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(75),_theme__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),_element_game__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_shared_shared__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_shared_fetch_progress__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(38),_api__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5),_loading__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),_server_manager__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10),_audio__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9),_dialog__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4),_savefile__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2),howler__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(30),howler__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(howler__WEBPACK_IMPORTED_MODULE_11__),_service_worker__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(19),marked__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(40),marked__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(marked__WEBPACK_IMPORTED_MODULE_13__);const cacheName="ELEMENTAL";let SKIPPED_UPDATES=!1;async function boot(MenuAPI){if(delete window.$elemental4,console.clear(),console.log(" Hello Elemental, version 4.4.1"),"undefined"==typeof localStorage)return location.reload();const ui=MenuAPI.status?MenuAPI:Object(_loading__WEBPACK_IMPORTED_MODULE_6__.a)();if(MenuAPI.upgraded&&(ui.status("Finalizing Updates",0),window.navigator&&navigator.serviceWorker&&await navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(e=>e.unregister()))),await caches.delete("ELEMENTAL")),ui.status("Checking Updates",0),!("serviceWorker"in navigator))return alert("Service workers not supported, game cannot start. Make sure to use a Modern Web Browser!"),void location.reload();{ui.status("Loading Service",0);const e=await navigator.serviceWorker.register("pwa.js");await navigator.serviceWorker.ready,Object(_service_worker__WEBPACK_IMPORTED_MODULE_12__.b)(e)}let failedUpdateApply;ui.status("Checking Updates",0);try{const latestVersion=await fetch("version").then(e=>e.text());if("4.4.1"!==latestVersion&&await new Promise(async resolve=>{const cacheKey=latestVersion+"-"+Math.random().toFixed(6).substr(2),progress=Object(_shared_fetch_progress__WEBPACK_IMPORTED_MODULE_4__.a)(await fetch("elemental.js?v="+cacheKey));progress.on("progress",({percent:e,current:t,total:n})=>{ui.status("Updating Client",e)}),progress.on("done",async text=>{localStorage.cache=cacheKey,await caches.has(cacheName)&&await caches.delete(cacheName),await Object(_theme__WEBPACK_IMPORTED_MODULE_1__.k)();try{eval(text),window.$elemental4(Object.assign(Object.assign(Object.assign({},MenuAPI),ui),{cache:cacheKey,upgraded:"4.4.1"})),resolve(!0)}catch(e){ui.status("Error Updating",0),failedUpdateApply=e,resolve(!1)}})}))return}catch(e){console.log(e),SKIPPED_UPDATES=!0,console.log("Could not check version, Updates Skipped.")}if(await caches.has(cacheName))ui.status("Loading Themes",0),await Object(_theme__WEBPACK_IMPORTED_MODULE_1__.a)();else{ui.status("Downloading Game Files",0);const e=await caches.open(cacheName);let t=0;await Promise.all([...["elemental.js?v="+MenuAPI.cache,"/","logo.svg","air.svg","earth.svg","fire.svg","water.svg","logo-workshop.svg","no-element.svg","game","font.css","icon/maskable.png","icon/normal.png","developer.png","theme.schema.json","p5_background","theme_editor","manifest.json","changelog.md","chrome-bypass.mp3"].map(async(n,r,i)=>{await e.add(n),t++,ui.status("Downloading Game Files",t/i.length)}),Object(_theme__WEBPACK_IMPORTED_MODULE_1__.a)()])}ui.status("Loading Game HTML",0);const gameRoot=document.getElementById("game");gameRoot.innerHTML=await fetch("game").then(e=>e.text());const changelogRoot=document.getElementById("changelog-root");changelogRoot.innerHTML=marked__WEBPACK_IMPORTED_MODULE_13___default()(await fetch("changelog.md").then(e=>e.text()));const versionInfo={version:"4.4.1","build-date":"2022-03-05 23:16"};document.querySelectorAll("[data-build-info]").forEach(e=>e.innerHTML=versionInfo[e.getAttribute("data-build-info")]),ui.status("Loading Servers",0),await Object(_server_manager__WEBPACK_IMPORTED_MODULE_7__.g)(),ui.status("Loading Servers",.8);const initialServer=await Object(_server_manager__WEBPACK_IMPORTED_MODULE_7__.f)();ui.status("Loading Themes",0),await Object(_theme__WEBPACK_IMPORTED_MODULE_1__.n)(),failedUpdateApply&&await Object(_dialog__WEBPACK_IMPORTED_MODULE_9__.a)({title:"Failed to apply updates.",text:`You are playing a potentially outdated version of the game. Error: \`\`\`${failedUpdateApply&&failedUpdateApply.stack}\`\`\``}),ui.status("Loading Settings",0),await Object(_settings_settings__WEBPACK_IMPORTED_MODULE_0__.a)(),ui.status("Loading Audio",0),await Object(_audio__WEBPACK_IMPORTED_MODULE_8__.b)(),ui.status("Checking for new DLC",0),await Object(_theme__WEBPACK_IMPORTED_MODULE_1__.l)(),ui.status("Loading Element UI",0),Object(_element_game__WEBPACK_IMPORTED_MODULE_2__.b)(),ui.status("Loading API",0),await Object(_api__WEBPACK_IMPORTED_MODULE_5__.b)(initialServer.baseUrl,null,ui),"dispose"in ui&&ui.dispose(),localStorage.cache=MenuAPI.cache;for(;"suspended"===howler__WEBPACK_IMPORTED_MODULE_11__.Howler.ctx.state;)await Object(_dialog__WEBPACK_IMPORTED_MODULE_9__.a)({title:"Autoplay Disabled",text:"Click OK on this dialog to enable audio autoplay. [Learn More](/chrome_autoplay)"}),await Object(_shared_shared__WEBPACK_IMPORTED_MODULE_3__.b)(350);if(MenuAPI.showGame&&MenuAPI.showGame(),localStorage.setItem("auto_start","true"),await Object(_shared_shared__WEBPACK_IMPORTED_MODULE_3__.b)(10),document.getElementById("game").classList.add("animate-in"),Object(_savefile__WEBPACK_IMPORTED_MODULE_10__.i)("config-play-startup-sound",!0)&&(Object(_audio__WEBPACK_IMPORTED_MODULE_8__.d)("startup"),await Object(_shared_shared__WEBPACK_IMPORTED_MODULE_3__.b)(500)),Object(_audio__WEBPACK_IMPORTED_MODULE_8__.c)(Object(_audio__WEBPACK_IMPORTED_MODULE_8__.a)()),await caches.has("monaco_editor")&&caches.delete("monaco_editor"),await caches.has("secondary_cache")&&caches.delete("secondary_cache"),await caches.has("secondary_cache_v2")){const e=document.createElement("script");e.src="/p5.min.js",e.async=!0,document.head.appendChild(e)}else{const e=await caches.open("secondary_cache_v2");Promise.all(__webpack_require__(120).files.map(e=>"/vs/"+e).concat("/p5.min.js").map(async(t,n,r)=>{if(await e.add(t),"/p5.min.js"===t){const e=document.createElement("script");e.src="/p5.min.js",e.async=!0,document.head.appendChild(e)}}))}}async function kill(){}window.$elemental4=boot},function(e,t,n){var r=n(52),i=n(79),o={};for(var a in r)r.hasOwnProperty(a)&&(o[r[a]]=a);var s=e.exports={to:{},get:{}};function c(e,t,n){return Math.min(Math.max(t,e),n)}function l(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}s.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=s.get.hsl(e),n="hsl";break;case"hwb":t=s.get.hwb(e),n="hwb";break;default:t=s.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},s.get.rgb=function(e){if(!e)return null;var t,n,i,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],n=0;n<3;n++){var a=2*n;o[n]=parseInt(t.slice(a,a+2),16)}i&&(o[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(i=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);i&&(o[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);t[4]&&(o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(o=r[t[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=c(o[n],0,255);return o[3]=c(o[3],0,1),o},s.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},s.to.hex=function(){var e=i(arguments);return"#"+l(e[0])+l(e[1])+l(e[2])+(e[3]<1?l(Math.round(255*e[3])):"")},s.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},s.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},s.to.keyword=function(e){return o[e.slice(0,3)]}},function(e,t,n){"use strict";var r=n(80),i=Array.prototype.concat,o=Array.prototype.slice,a=e.exports=function(e){for(var t=[],n=0,a=e.length;n<a;n++){var s=e[n];r(s)?t=i.call(t,o.call(s)):t.push(s)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},function(e,t){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,n){var r=n(53),i=n(82),o={};Object.keys(r).forEach((function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:r[e].channels}),Object.defineProperty(o[e],"labels",{value:r[e].labels});var t=i(e);Object.keys(t).forEach((function(n){var r=t[n];o[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),o[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=o},function(e,t,n){var r=n(53);function i(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,i=0;i<n;i++)e[t[i]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var c=o[s],l=t[c];-1===l.distance&&(l.distance=t[i].distance+1,l.parent=i,n.unshift(c))}return t}function o(e,t){return function(n){return t(e(n))}}function a(e,t){for(var n=[t[e].parent,e],i=r[t[e].parent][e],a=t[e].parent;t[a].parent;)n.unshift(t[a].parent),i=o(r[t[a].parent][a],i),a=t[a].parent;return i.conversion=n,i}e.exports=function(e){for(var t=i(e),n={},r=Object.keys(t),o=r.length,s=0;s<o;s++){var c=r[s];null!==t[c].parent&&(n[c]=a(c,t))}return n}},function(e,t,n){!function(t){"use strict";var n={bytesToHex:function(e){return function(e){return e.map((function(e){return t=e.toString(16),n=2,t.length>n?t:Array(n-t.length+1).join("0")+t;var t,n})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=n:t.convertHex=n}(this)},function(e,t,n){!function(t){"use strict";var n={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};n.UTF8={bytesToString:function(e){return decodeURIComponent(escape(n.bytesToString(e)))},stringToBytes:function(e){return n.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=n:t.convertString=n}(this)},function(e,t,n){var r=n(86),i=n(32)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a,s,c=n.exec(e||""),l={},u=14;u--;)l[r[u]]=c[u]||"";return-1!=i&&-1!=o&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,l.path),l.queryKey=(a=l.query,s={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(s[t]=n)})),s),l}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(e,o),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var l=r.log||t.log||console.log.bind(console);l.apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(54),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(45),i=n(55),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,o=e;return o.data=function e(t,n){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var a=new Array(t.length),s=0;s<t.length;s++)a[s]=e(t[s],n);return a}if("object"==typeof t&&!(t instanceof Date)){a={};for(var c in t)a[c]=e(t[c],n);return a}return t}(n,t),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,o=e;!function e(c,l,u){if(!c)return c;if(a&&c instanceof Blob||s&&c instanceof File){n++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:o=this.result,--n||t(o)},d.readAsArrayBuffer(c)}else if(r(c))for(var h=0;h<c.length;h++)e(c[h],h,c);else if("object"==typeof c&&!i(c))for(var f in c)e(c[f],f,c)}(o),n||t(o)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(u(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(93),e.exports.parser=n(28)},function(e,t,n){var r=n(57),i=n(49),o=n(37)("engine.io-client:socket"),a=n(61),s=n(28),c=n(106),l=n(50);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,i(u.prototype),u.protocol=s.protocol,u.Socket=u,u.Transport=n(48),u.transports=n(57),u.parser=n(28),u.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),h(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{o('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,r.emit("upgradeError",a)}})))}function a(){n||(n=!0,h(),t.close(),t=null)}function s(n){var i=new Error("probe error: "+n);i.transport=t.name,a(),o('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function c(){s("transport closed")}function l(){s("socket closed")}function d(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),a())}function h(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",c),r.removeListener("close",l),r.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",c),this.once("close",l),this.once("upgrading",d),t.open()},u.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},u.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},u.prototype.onError=function(e){o("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(46),i=n(58),o=n(49),a=n(36),s=n(37)("engine.io-client:polling-xhr"),c=n(47);function l(){}function u(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=d,a(u,i),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},u.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",(function(e){i.onError("xhr post error",e)})),this.sendXhr=r},u.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},o(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",h);else if("function"==typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",h,!1)}function h(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,r,i,o=String.fromCharCode;function a(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return o(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),n=o(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+=o(63&e|128)}function u(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,o;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|u())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|u()<<6|u())>=2048)return s(o,e)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=a(e),i=r.length,o=-1,s="";++o<i;)s+=l(r[o],n);return s},decode:function(e,t){var s=!1!==(t=t||{}).strict;n=a(e),r=n.length,i=0;for(var c,l=[];!1!==(c=d(s));)l.push(c);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}(l)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,r,i,o,a,s=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),d[l++]=r<<2|i>>4,d[l++]=(15&i)<<4|o>>2,d[l++]=(3&o)<<6|63&a;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function a(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function s(e,t){t=t||{};var r=new n;return a(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function c(e,t){return new Blob(a(e),t||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=r?i?Blob:c:o?s:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(e,o),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var l=r.log||t.log||console.log.bind(console);l.apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(54),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(58),i=n(36),o=n(47);e.exports=u;var a,s=/\n/g,c=/\\n/g;function l(){}function u(e){r.call(this,e),this.query=this.query||{},a||(a=o.___eio=o.___eio||[]),this.index=a.length;var t=this;a.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}i(u,r),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=a,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function l(){u(),t()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),u(),e=e.replace(c,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}},function(e,t,n){(function(t){var r,i,o=n(48),a=n(28),s=n(50),c=n(36),l=n(60),u=n(37)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{i=n(105)}catch(e){}var d=r||i;function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=i),o.call(this,e)}e.exports=h,c(h,o),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},h.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,o=r;i<o;i++)!function(e){a.encodePacket(e,n.supportsBinary,(function(i){if(!n.usingBrowserWebSocket){var o={};if(e.options&&(o.compress=e.options.compress),n.perMessageDeflate)("string"==typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(e){u("websocket closed before onclose event")}--r||s()}))}(e[i]);function s(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},h.prototype.onClose=function(){o.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},h.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===h.prototype.name)}}).call(this,n(35).Buffer)},function(e,t){},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var a,s,c=n.exec(e||""),l={},u=14;u--;)l[r[u]]=c[u]||"";return-1!=i&&-1!=o&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,l.path),l.queryKey=(a=l.query,s={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(s[t]=n)})),s),l}},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var r={"./en-GB":66,"./en-GB.js":66,"./en-US":67,"./en-US.js":67,"./it-IT":68,"./it-IT.js":68};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=110},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,p=String.fromCharCode;function m(e){throw new RangeError(h[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(d,".")).split("."),t).join(".")}function b(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=p(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?f(e/700):e>>1,e+=f(e/t);e>455;r+=36)e=f(e/35);return f(r+36*e/(e+38))}function k(e){var t,n,r,i,o,a,s,l,u,d,h,p=[],g=e.length,y=0,b=128,_=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&m("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=y,a=1,s=36;i>=g&&m("invalid-input"),((l=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)>=36||l>f((c-y)/a))&&m("overflow"),y+=l*a,!(l<(u=s<=_?1:s>=_+26?26:s-_));s+=36)a>f(c/(d=36-u))&&m("overflow"),a*=d;_=w(y-o,t=p.length+1,0==o),f(y/t)>c-b&&m("overflow"),b+=f(y/t),y%=t,p.splice(y++,0,b)}return v(p)}function x(e){var t,n,r,i,o,a,s,l,u,d,h,g,y,v,k,x=[];for(g=(e=b(e)).length,t=128,n=0,o=72,a=0;a<g;++a)(h=e[a])<128&&x.push(p(h));for(r=i=x.length,i&&x.push("-");r<g;){for(s=c,a=0;a<g;++a)(h=e[a])>=t&&h<s&&(s=h);for(s-t>f((c-n)/(y=r+1))&&m("overflow"),n+=(s-t)*y,t=s,a=0;a<g;++a)if((h=e[a])<t&&++n>c&&m("overflow"),h==t){for(l=n,u=36;!(l<(d=u<=o?1:u>=o+26?26:u-o));u+=36)k=l-d,v=36-d,x.push(p(_(d+k%v,0))),l=f(k/v);x.push(p(_(l,0))),o=w(n,y,r==i),n=0,++r}++n,++t}return x.join("")}s={version:"1.4.1",ucs2:{decode:b,encode:v},decode:k,encode:x,toASCII:function(e){return y(e,(function(e){return u.test(e)?"xn--"+x(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(65)(e),n(21))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(114),t.encode=t.stringify=n(115)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,h,f,p,m=e[u].replace(s,"%20"),g=m.indexOf(n);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),f=decodeURIComponent(d),p=decodeURIComponent(h),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(117),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(21))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,l={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[c]=i,r(c),c++},h.clearImmediate=f}function f(e){delete l[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(21),n(42))},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return i})),n.d(t,"json",(function(){return o})),n.d(t,"style",(function(){return a})),n.d(t,"sketch",(function(){return s}));var r=n(17);const i="Customizing Colors",o={type:"elemental4:theme",format_version:r.a,id:"example",version:1,name:"Example: Customizing Colors",description:"An example theme to show the basics.",author:"Dave Caruso",colors:{red:{color:"#00ff00",lightnessMultiplier:1,saturationMultiplier:1},green:{color:"#ff0000",lightnessMultiplier:.5,saturationMultiplier:0},blue:{color:"#5555ff",lightnessMultiplier:2,saturationMultiplier:.25}},icon:"developer.png"},a="",s=n(27).sketch},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return i})),n.d(t,"json",(function(){return o})),n.d(t,"style",(function(){return a})),n.d(t,"sketch",(function(){return s}));var r=n(17);const i="Using p5.js",o={type:"elemental4:theme",format_version:r.a,id:"example",version:1,name:"Example: Using p5.js",description:"An example theme to show the basics.",author:"Dave Caruso",icon:"/developer.png"},a="",s="let freqX, freqY, modx, mody\n\nfunction setup() {\n  colorMode(HSB, 360, 100, 100, 1)\n  noFill()\n  frameRate(30)\n\n  randomOne()\n}\n\nfunction randomOne() {\n  freqX = floor(random(1, 25))\n  freqY = floor(random(1, 25))\n  modx = floor(random(1, 25))\n  mody = floor(random(1, 25))\n}\n\nfunction addVert(i) {\n  curveVertex(\n    sin(i * freqX + radians(frameCount*0.5)) * cos(i * modx) * width/2,\n    sin(i * freqY) * cos(i * mody) * height/2\n  )\n}\n\nfunction draw() {\n  clear()\n\n  translate(width / 2, height / 2)\n  beginShape()\n  let i = 0\n  addVert(i)\n  for (i; i < TWO_PI; i += TWO_PI / 360) addVert(i)\n  addVert(i)\n  endShape()\n}\n"},function(e){e.exports=JSON.parse('{"files":["loader.js","editor/editor.main.js","editor/editor.main.css","editor/editor.main.nls.js","language/json/jsonMode.js","language/json/jsonWorker.js","language/css/cssMode.js","language/css/cssWorker.js","language/typescript/tsMode.js","language/typescript/tsWorker.js","basic-languages/css/css.js","basic-languages/javascript/javascript.js","base/worker/workerMain.js","base/browser/ui/codicons/codicon/codicon.ttf"],"base":"node_modules/monaco-editor/min/vs"}')}]);
